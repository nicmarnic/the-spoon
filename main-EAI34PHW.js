import{$ as gt,A as c,Aa as A,B as n,Ba as be,C as i,Ca as he,D as g,Da as $,E as Ge,Ea as Q,F as qe,Fa as K,G as b,Ga as Pt,H as f,Ha as xe,I as d,Ia as wt,J as ct,Ja as Ot,K as X,Ka as U,L as C,La as Ce,M as me,Ma as St,N as s,Na as J,O as _,Oa as I,P as x,Pa as ye,Q as j,Qa as It,R as y,Ra as H,S as M,Sa as kt,T as P,Ta as Et,U as dt,Ua as Me,Va as Tt,W as ge,Wa as Rt,X as oe,Y as ae,_ as mt,a as Ze,aa as T,b as Xe,ba as pt,c as ce,ca as D,d as et,da as S,e as tt,ea as pe,f as nt,fa as ut,g as it,ga as ft,h as rt,i as G,ia as O,j as Y,ja as vt,k as te,ka as _t,l as p,la as q,m as u,ma as bt,n as ot,na as ht,o as at,oa as ue,p as st,pa as xt,q as ne,qa as Ct,r as B,ra as R,sa as fe,t as a,ta as yt,u as lt,ua as Mt,v as h,va as ie,w,wa as F,x as v,xa as N,y as de,ya as ve,z as We,za as _e}from"./chunk-R2EDM64R.js";var se=ce(Ce());function Ft(o,t){if(o&1){let e=b();n(0,"div",9),f("click",function(){p(e);let l=d();return u(l.cancelEdit())}),n(1,"div",10),f("click",function(l){return p(e),u(l.stopPropagation())}),n(2,"div",11)(3,"div",12),g(4,"i",13),i(),n(5,"h4",14),s(6),i(),n(7,"button",15),f("click",function(){p(e);let l=d();return u(l.cancelEdit())}),g(8,"i",16),i()(),n(9,"div",17)(10,"p",18),s(11,"Modifica i dettagli della tua prenotazione:"),i(),n(12,"div",19)(13,"div",20)(14,"label",21),g(15,"i",22),s(16," Numero Persone "),i(),n(17,"div",23)(18,"input",24),P("ngModelChange",function(l){p(e);let m=d();return M(m.editData.numberOfPeople,l)||(m.editData.numberOfPeople=l),u(l)}),i()(),n(19,"small",25),s(20,"Minimo 1, massimo 20 persone"),i()(),n(21,"div",20)(22,"label",26),g(23,"i",27),s(24," Data Prenotazione "),i(),n(25,"div",23)(26,"input",28),P("ngModelChange",function(l){p(e);let m=d();return M(m.editData.reservationDate,l)||(m.editData.reservationDate=l),u(l)}),i()(),n(27,"small",25),s(28,"Seleziona una data futura"),i()(),n(29,"div",20)(30,"label",29),g(31,"i",30),s(32," Orario "),i(),n(33,"div",23)(34,"input",31),P("ngModelChange",function(l){p(e);let m=d();return M(m.editData.reservationTime,l)||(m.editData.reservationTime=l),u(l)}),i()(),n(35,"small",25),s(36,"Orario di apertura: 12:00 - 23:30"),i()(),n(37,"div",20)(38,"label",32),g(39,"i",33),s(40," Note Aggiuntive "),n(41,"span",4),s(42,"(opzionale)"),i()(),n(43,"div",23)(44,"textarea",34),P("ngModelChange",function(l){p(e);let m=d();return M(m.editData.notes,l)||(m.editData.notes=l),u(l)}),i()()()()(),n(45,"div",35)(46,"button",36),f("click",function(){p(e);let l=d();return u(l.cancelEdit())}),g(47,"i",37),s(48," Annulla "),i(),n(49,"button",38),f("click",function(){p(e);let l=d();return u(l.confirmEdit())}),g(50,"i",39),s(51," Salva Modifiche "),i()()()()}if(o&2){let e=d();a(6),x("Modifica Prenotazione #",e.currentReservation==null?null:e.currentReservation.id),a(12),y("ngModel",e.editData.numberOfPeople),a(8),y("ngModel",e.editData.reservationDate),c("min",e.minDate),a(8),y("ngModel",e.editData.reservationTime),a(10),y("ngModel",e.editData.notes),a(5),c("disabled",!e.isValidEditData())}}function Nt(o,t){if(o&1){let e=b();n(0,"div",40)(1,"div",41)(2,"button",42),f("click",function(){p(e);let l=d();return u(l.onFilterChange("future"))}),g(3,"i",30),s(4," Future "),n(5,"span",43),s(6),i()(),n(7,"button",42),f("click",function(){p(e);let l=d();return u(l.onFilterChange("past"))}),g(8,"i",44),s(9," Passate "),n(10,"span",43),s(11),i()(),n(12,"button",42),f("click",function(){p(e);let l=d();return u(l.onFilterChange("all"))}),g(13,"i",45),s(14," Tutte "),n(15,"span",43),s(16),i()()()()}if(o&2){let e=d();a(2),C("active",e.selectedFilter==="future"),a(4),_(e.filterCounts.future),a(),C("active",e.selectedFilter==="past"),a(4),_(e.filterCounts.past),a(),C("active",e.selectedFilter==="all"),a(4),_(e.filterCounts.all)}}function At(o,t){o&1&&(n(0,"div",46),g(1,"div",47),n(2,"p"),s(3,"Elaborazione in corso..."),i()())}function Ut(o,t){o&1&&(n(0,"div",48)(1,"div",49),g(2,"i",50),i(),n(3,"h4"),s(4,"Nessuna prenotazione"),i(),n(5,"p"),s(6,"Non hai ancora effettuato prenotazioni."),i(),n(7,"a",51),g(8,"i",52),s(9," Trova Ristoranti "),i()())}function Bt(o,t){o&1&&(n(0,"div",48)(1,"div",49),g(2,"i",53),i(),n(3,"h4"),s(4,"Nessun risultato"),i(),n(5,"p"),s(6,"Non ci sono prenotazioni per il filtro selezionato."),i()())}function Lt(o,t){if(o&1&&(n(0,"div",67),g(1,"i",77),n(2,"span"),s(3),i()()),o&2){let e=d().$implicit;a(3),_(e.customerPhone)}}function jt(o,t){if(o&1&&(n(0,"div",66)(1,"div",78),g(2,"i",79),n(3,"span"),s(4),i()()()),o&2){let e=d().$implicit;a(4),_(e.notes)}}function Ht(o,t){if(o&1){let e=b();n(0,"button",80),f("click",function(){p(e);let l=d().$implicit,m=d(2);return u(m.editReservation(l))}),g(1,"i",81),n(2,"span",82),s(3,"Modifica"),i()()}if(o&2){let e=d(3);c("disabled",e.loading)}}function Yt(o,t){if(o&1){let e=b();n(0,"button",83),f("click",function(){p(e);let l=d().$implicit,m=d(2);return u(m.cancelReservation(l))}),g(1,"i",84),n(2,"span",82),s(3,"Cancella"),i()()}if(o&2){let e=d(3);c("disabled",e.loading)}}function Wt(o,t){o&1&&(n(0,"div",85),g(1,"i",86),n(2,"span",82),s(3,"Completata"),i()())}function Gt(o,t){if(o&1&&(n(0,"div",57)(1,"div",58)(2,"div",59)(3,"h5",60),s(4),i(),n(5,"p",61),g(6,"i",62),s(7),i()(),n(8,"div",63),g(9,"i"),n(10,"span"),s(11),i()()(),n(12,"div",64)(13,"div",65)(14,"div",66)(15,"div",67),g(16,"i",68),n(17,"span"),s(18),i()(),n(19,"div",67),g(20,"i",69),n(21,"span"),s(22),i()()(),n(23,"div",66)(24,"div",67),g(25,"i",70),n(26,"span"),s(27),i()(),v(28,Lt,4,1,"div",71),i(),v(29,jt,5,1,"div",72),i(),n(30,"div",73),v(31,Ht,4,1,"button",74)(32,Yt,4,1,"button",75)(33,Wt,4,0,"div",76),i()()()),o&2){let e=t.$implicit,r=d(2);C("upcoming",r.getStatusText(e)==="Prossima")("past",r.getStatusText(e)==="Completata"),a(4),x(" Prenotazione #",e.id," "),a(3),x(" ",e.customerName," "),a(),C("upcoming",r.getStatusText(e)==="Prossima")("completed",r.getStatusText(e)==="Completata"),a(),me(r.getStatusIcon(e)),a(2),_(r.getStatusText(e)),a(7),_(r.formatDate(e.reservationDate)),a(4),_(r.formatTime(e.reservationTime)),a(5),j("",e.numberOfPeople," ",e.numberOfPeople===1?"persona":"persone"),a(),c("ngIf",e.customerPhone),a(),c("ngIf",e.notes),a(2),c("ngIf",r.getStatusText(e)==="Prossima"),a(),c("ngIf",r.getStatusText(e)==="Prossima"),a(),c("ngIf",r.getStatusText(e)==="Completata")}}function qt(o,t){if(o&1&&(n(0,"div",54)(1,"div",55),v(2,Gt,34,22,"div",56),i()()),o&2){let e=d();a(2),c("ngForOf",e.filteredReservations)("ngForTrackBy",e.trackByReservation)}}var Pe=class o{constructor(t,e){this.reservationService=t;this.cdr=e}reservations=[];currentUser=null;reservationUpdated=new de;selectedFilter="future";filteredReservations=[];upcomingReservations=[];pastReservations=[];loading=!1;showEditModal=!1;currentReservation=null;editData={numberOfPeople:1,reservationDate:"",reservationTime:"",notes:""};ngOnInit(){this.categorizeReservations(),this.applyFilter()}ngOnChanges(){this.categorizeReservations(),this.applyFilter()}categorizeReservations(){let t=new Date;this.upcomingReservations=this.reservations.filter(e=>this.isReservationFuture(e,t)).sort((e,r)=>{let l=new Date(e.reservationDate+" "+e.reservationTime),m=new Date(r.reservationDate+" "+r.reservationTime);return l.getTime()-m.getTime()}),this.pastReservations=this.reservations.filter(e=>!this.isReservationFuture(e,t)).sort((e,r)=>{let l=new Date(e.reservationDate+" "+e.reservationTime);return new Date(r.reservationDate+" "+r.reservationTime).getTime()-l.getTime()}),this.cdr.detectChanges()}isReservationFuture(t,e){try{return new Date(t.reservationDate+" "+t.reservationTime)>e}catch(r){return console.error("\u274C Errore nel controllo data prenotazione:",r),!1}}onFilterChange(t){this.selectedFilter=t,this.applyFilter()}applyFilter(){switch(this.selectedFilter){case"future":this.filteredReservations=[...this.upcomingReservations];break;case"past":this.filteredReservations=[...this.pastReservations];break;case"all":this.filteredReservations=[...this.upcomingReservations,...this.pastReservations];break}this.cdr.detectChanges()}editReservation(t){if(!t){console.error("\u274C Prenotazione non trovata per modifica");return}if(!this.isReservationFuture(t,new Date)){this.showErrorMessage("Non puoi modificare una prenotazione passata");return}this.currentReservation=t,this.editData={numberOfPeople:t.numberOfPeople,reservationDate:t.reservationDate,reservationTime:t.reservationTime.substring(0,5),notes:t.notes||""},this.showEditModal=!0,this.cdr.detectChanges()}async cancelReservation(t){if(!t){console.error("\u274C Prenotazione non trovata per cancellazione");return}let e=this.isReservationFuture(t,new Date);(await se.default.fire({title:"Cancella Prenotazione",html:`
        <div style="text-align: left; margin: 1rem 0;">
          <p style="margin-bottom: 1rem;">${e?"Sei sicuro di voler cancellare questa prenotazione? Il ristorante ricever\xE0 la notifica.":"Questa prenotazione \xE8 gi\xE0 passata. Vuoi comunque procedere?"}</p>
          <div style="background: #f8f9fa; padding: 1rem; border-radius: 0.5rem; border-left: 4px solid #dc3545;">
            <strong>Prenotazione #${t.id}</strong><br>
            <small>${t.customerName}</small>
          </div>
        </div>
      `,icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d",confirmButtonText:'<i class="fas fa-trash"></i> Cancella',cancelButtonText:'<i class="fas fa-times"></i> Annulla',reverseButtons:!0,customClass:{container:"swal-container",popup:"swal-popup",title:"swal-title",confirmButton:"swal-confirm",cancelButton:"swal-cancel"}})).isConfirmed&&this.executeCancel(t.id)}confirmEdit(){this.currentReservation&&this.isValidEditData()&&this.executeEdit(this.currentReservation.id),this.cancelEdit()}cancelEdit(){this.showEditModal=!1,this.currentReservation=null,this.editData={numberOfPeople:1,reservationDate:"",reservationTime:"",notes:""},this.cdr.detectChanges()}showSuccessMessage(t){t==="edit"?se.default.fire({title:"Modifica Completata!",html:`
          <div style="text-align: center; margin: 1rem 0;">
            <div style="margin: 1rem 0; font-size: 3rem; color: #28a745;">
              <i class="fas fa-edit"></i>
              <i class="fas fa-arrow-right" style="margin: 0 0.5rem; color: #6c757d;"></i>
              <i class="fas fa-check"></i>
            </div>
            <p>Le tue modifiche sono state inviate correttamente al ristorante.</p>
            <small style="color: #6c757d;">Riceverai una conferma via email.</small>
          </div>
        `,icon:"success",confirmButtonText:'<i class="fas fa-check"></i> Perfetto!',confirmButtonColor:"#28a745",timer:4e3,timerProgressBar:!0,customClass:{container:"swal-container",popup:"swal-popup-success",title:"swal-title-success",htmlContainer:"swal-content-success",confirmButton:"swal-confirm-success"}}):t==="delete"&&se.default.fire({title:"Cancellazione Completata!",html:`
          <div style="text-align: center; margin: 1rem 0;">
            <div style="margin: 1rem 0; font-size: 3rem; color: #28a745;">
              <i class="fas fa-calendar-alt"></i>
              <i class="fas fa-arrow-right" style="margin: 0 0.5rem; color: #6c757d;"></i>
              <i class="fas fa-trash"></i>
              <i class="fas fa-arrow-right" style="margin: 0 0.5rem; color: #6c757d;"></i>
              <i class="fas fa-check"></i>
            </div>
            <p>Prenotazione cancellata correttamente.</p>
            <small style="color: #6c757d;">Il ristorante \xE8 stato notificato e riceverai una conferma via email.</small>
          </div>
        `,icon:"success",confirmButtonText:'<i class="fas fa-check"></i> Ho capito',confirmButtonColor:"#28a745",timer:4e3,timerProgressBar:!0,customClass:{container:"swal-container",popup:"swal-popup-success",title:"swal-title-success",htmlContainer:"swal-content-success",confirmButton:"swal-confirm-success"}})}showErrorMessage(t){se.default.fire({title:"Ops! Qualcosa \xE8 andato storto",text:t,icon:"error",confirmButtonText:'<i class="fas fa-times"></i> Chiudi',confirmButtonColor:"#dc3545",customClass:{container:"swal-container",popup:"swal-popup-error",title:"swal-title-error",confirmButton:"swal-confirm-error"}})}isValidEditData(){return this.editData.numberOfPeople>=1&&this.editData.numberOfPeople<=20&&this.editData.reservationDate!==""&&this.editData.reservationTime!==""}executeEdit(t){this.loading=!0;let e={numberOfPeople:this.editData.numberOfPeople,reservationDate:this.editData.reservationDate,reservationTime:this.editData.reservationTime,notes:this.editData.notes||void 0};console.log("\u{1F504} Inviando aggiornamento al backend:",e),this.reservationService.updateReservation(t,e).subscribe({next:r=>{this.loading=!1,console.log("\u2705 Prenotazione aggiornata dal backend:",r),this.updateReservationInLists(r),this.showSuccessMessage("edit"),this.reservationUpdated.emit()},error:r=>{this.loading=!1,console.error("\u274C Errore nella modifica:",r),this.showErrorMessage("Errore durante la modifica. Riprova pi\xF9 tardi.")}})}executeCancel(t){this.loading=!0,console.log("\u{1F5D1}\uFE0F Inviando cancellazione al backend per ID:",t),this.reservationService.deleteReservation(t).subscribe({next:()=>{this.loading=!1,console.log("\u2705 Prenotazione cancellata dal backend"),this.removeReservationFromLists(t),this.showSuccessMessage("delete"),this.reservationUpdated.emit()},error:e=>{this.loading=!1,console.error("\u274C Errore nella cancellazione:",e),this.showErrorMessage("Errore durante la cancellazione. Riprova pi\xF9 tardi.")}})}removeReservationFromLists(t){this.reservations=this.reservations.filter(e=>e.id!==t),this.upcomingReservations=this.upcomingReservations.filter(e=>e.id!==t),this.pastReservations=this.pastReservations.filter(e=>e.id!==t),this.applyFilter()}updateReservationInLists(t){[this.reservations,this.upcomingReservations,this.pastReservations].forEach(r=>{let l=r.findIndex(m=>m.id===t.id);l!==-1&&(r[l]=t)}),this.categorizeReservations(),this.applyFilter()}formatDate(t){try{return new Date(t).toLocaleDateString("it-IT",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}catch{return t}}formatTime(t){try{return t.slice(0,5)}catch{return t}}getStatusIcon(t){return this.isReservationFuture(t,new Date)?"fas fa-clock text-warning":"fas fa-check-circle text-success"}getStatusText(t){return this.isReservationFuture(t,new Date)?"Prossima":"Completata"}trackByReservation(t,e){return e.id}get filterCounts(){return{future:this.upcomingReservations.length,past:this.pastReservations.length,all:this.reservations.length}}get hasFilteredReservations(){return this.filteredReservations.length>0}get minDate(){return new Date().toISOString().split("T")[0]}static \u0275fac=function(e){return new(e||o)(h(J),h(T))};static \u0275cmp=w({type:o,selectors:[["app-my-reservations"]],inputs:{reservations:"reservations",currentUser:"currentUser"},outputs:{reservationUpdated:"reservationUpdated"},features:[ne],decls:13,vars:6,consts:[[1,"reservations-container"],["class","custom-modal-overlay",3,"click",4,"ngIf"],[1,"section-header"],[1,"fas","fa-calendar-alt","me-2"],[1,"text-muted"],["class","filters-section",4,"ngIf"],["class","loading-overlay",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","reservations-content",4,"ngIf"],[1,"custom-modal-overlay",3,"click"],[1,"custom-modal","edit-modal",3,"click"],[1,"modal-header"],[1,"modal-icon","edit"],[1,"fas","fa-edit"],[1,"modal-title"],[1,"modal-close",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],[1,"modal-message"],[1,"edit-form"],[1,"form-group"],["for","editPeople",1,"form-label"],[1,"fas","fa-users","me-2"],[1,"input-wrapper"],["type","number","id","editPeople","min","1","max","20",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-text"],["for","editDate",1,"form-label"],[1,"fas","fa-calendar","me-2"],["type","date","id","editDate",1,"form-control",3,"ngModelChange","ngModel","min"],["for","editTime",1,"form-label"],[1,"fas","fa-clock","me-2"],["type","time","id","editTime","min","12:00","max","23:30",1,"form-control",3,"ngModelChange","ngModel"],["for","editNotes",1,"form-label"],[1,"fas","fa-sticky-note","me-2"],["id","editNotes","rows","3","placeholder","Allergie, richieste speciali, ecc...",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-actions"],[1,"btn","btn-secondary",3,"click"],[1,"fas","fa-times","me-2"],[1,"btn","btn-primary",3,"click","disabled"],[1,"fas","fa-save","me-2"],[1,"filters-section"],[1,"filter-buttons"],[1,"filter-btn",3,"click"],[1,"badge"],[1,"fas","fa-history","me-2"],[1,"fas","fa-list","me-2"],[1,"loading-overlay"],[1,"spinner-border","text-primary"],[1,"empty-state"],[1,"empty-icon"],[1,"fas","fa-calendar-times"],["routerLink","/",1,"btn","btn-primary"],[1,"fas","fa-search","me-2"],[1,"fas","fa-filter"],[1,"reservations-content"],[1,"reservations-grid"],["class","reservation-card",3,"upcoming","past",4,"ngFor","ngForOf","ngForTrackBy"],[1,"reservation-card"],[1,"card-header"],[1,"restaurant-info"],[1,"restaurant-name"],[1,"reservation-customer"],[1,"fas","fa-user","me-1"],[1,"status-badge"],[1,"card-body"],[1,"reservation-details"],[1,"detail-row"],[1,"detail-item"],[1,"fas","fa-calendar"],[1,"fas","fa-clock"],[1,"fas","fa-users"],["class","detail-item",4,"ngIf"],["class","detail-row",4,"ngIf"],[1,"card-actions"],["class","btn btn-outline-primary btn-sm",3,"disabled","click",4,"ngIf"],["class","btn btn-outline-danger btn-sm",3,"disabled","click",4,"ngIf"],["class","btn btn-outline-success btn-sm disabled",4,"ngIf"],[1,"fas","fa-phone"],[1,"detail-item","notes"],[1,"fas","fa-sticky-note"],[1,"btn","btn-outline-primary","btn-sm",3,"click","disabled"],[1,"fas","fa-edit","me-1"],[1,"d-none","d-md-inline"],[1,"btn","btn-outline-danger","btn-sm",3,"click","disabled"],[1,"fas","fa-times","me-1"],[1,"btn","btn-outline-success","btn-sm","disabled"],[1,"fas","fa-check","me-1"]],template:function(e,r){e&1&&(n(0,"div",0),v(1,Ft,52,7,"div",1),n(2,"div",2)(3,"h3"),g(4,"i",3),s(5," Le Mie Prenotazioni "),i(),n(6,"p",4),s(7," Gestisci le tue prenotazioni passate e future "),i()(),v(8,Nt,17,9,"div",5)(9,At,4,0,"div",6)(10,Ut,10,0,"div",7)(11,Bt,7,0,"div",7)(12,qt,3,2,"div",8),i()),e&2&&(a(),c("ngIf",r.showEditModal),a(7),c("ngIf",r.reservations.length>0),a(),c("ngIf",r.loading),a(),c("ngIf",r.reservations.length===0),a(),c("ngIf",r.reservations.length>0&&!r.hasFilteredReservations),a(),c("ngIf",r.hasFilteredReservations))},dependencies:[O,D,S,ie,fe,U,F,he,N,xe,Pt,A],styles:[".reservations-container[_ngcontent-%COMP%]{padding:0;background-color:var(--bg-color);color:var(--text-color);min-height:100vh}.custom-modal-overlay[_ngcontent-%COMP%]{position:fixed!important;top:0!important;left:0!important;width:100vw!important;height:100vh!important;background:#3b3f3bcc!important;z-index:999998!important;display:flex!important;opacity:1!important;visibility:visible!important}.custom-modal[_ngcontent-%COMP%]{background:var(--card-bg);border-radius:1rem;box-shadow:var(--shadow-hover);max-width:420px;width:100%;max-height:85vh;overflow-y:auto;animation:_ngcontent-%COMP%_slideUp .3s ease-out;border:1px solid var(--border-color);margin:auto}.modal-header[_ngcontent-%COMP%]{padding:1.5rem 1.5rem 1rem;text-align:center;position:relative;border-bottom:1px solid var(--border-color)}.modal-icon[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto .75rem;font-size:2rem;color:#fff}.modal-icon.delete[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dc3545,#c82333)}.modal-icon.edit[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color),var(--primary-dark))}.modal-title[_ngcontent-%COMP%]{color:var(--text-color);font-weight:700;margin-bottom:0;font-size:1.25rem}.modal-close[_ngcontent-%COMP%]{position:absolute;top:.75rem;right:.75rem;background:none;border:none;color:var(--text-muted);font-size:1.25rem;cursor:pointer;transition:all .3s ease;width:35px;height:35px;border-radius:50%;display:flex;align-items:center;justify-content:center}.modal-close[_ngcontent-%COMP%]:hover{background:var(--bg-secondary);color:var(--text-color)}.modal-body[_ngcontent-%COMP%]{padding:1rem 1.5rem}.modal-message[_ngcontent-%COMP%]{color:var(--text-color);font-size:1rem;text-align:center;margin-bottom:.75rem;line-height:1.4}.modal-details[_ngcontent-%COMP%]{text-align:center;margin-top:.75rem}.modal-actions[_ngcontent-%COMP%]{padding:.75rem 1.5rem 1.5rem;display:flex;gap:.75rem;justify-content:center}.modal-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{min-width:100px;padding:.6rem 1.25rem;border-radius:.5rem;font-weight:600;font-size:.9rem;transition:all .3s ease}.edit-modal[_ngcontent-%COMP%]{max-width:480px;width:100%}.edit-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;margin-top:.5rem}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.form-label[_ngcontent-%COMP%]{color:var(--text-color);font-weight:600;font-size:.9rem;display:flex;align-items:center;margin-bottom:.25rem}.form-label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--primary-color);width:18px;margin-right:.5rem}.input-wrapper[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border:2px solid var(--border-color);border-radius:.5rem;background:var(--bg-color);color:var(--text-color);font-size:.9rem;padding:.6rem .75rem;transition:all .3s ease;width:100%;font-family:inherit}.input-wrapper[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:var(--primary-color);box-shadow:0 0 0 .2rem #00cdb540;background:var(--bg-color);outline:none}.form-control[type=number][_ngcontent-%COMP%]{text-align:center;font-weight:600}textarea.form-control[_ngcontent-%COMP%]{resize:vertical;min-height:70px;font-family:inherit;line-height:1.4}.form-text[_ngcontent-%COMP%]{color:var(--text-muted);font-size:.75rem;margin-top:.25rem}.success-modal[_ngcontent-%COMP%]{position:fixed!important;top:50%!important;left:50%!important;transform:translate(-50%,-50%)!important;z-index:999999!important;background:red!important;border:10px solid yellow!important;width:400px!important;height:300px!important;display:block!important;opacity:1!important;visibility:visible!important}.success-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a7451a,#28a7450d);border-bottom:1px solid rgba(40,167,69,.2)}.success-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a745,#20c997);box-shadow:0 6px 20px #28a74566;animation:_ngcontent-%COMP%_successPulse 2s infinite}.success-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2.5rem;color:#fff;animation:_ngcontent-%COMP%_successCheckmark .8s ease-out .3s both}.success-decoration[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.75rem;margin:1rem 0;font-size:1.25rem;color:#28a745}.success-decoration[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_successSlideIn .5s ease-out}.success-decoration[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:nth-child(1){animation-delay:.2s}.success-decoration[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:nth-child(2){animation-delay:.4s;color:var(--text-muted)}.success-decoration[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:nth-child(3){animation-delay:.6s}.success-decoration[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:nth-child(4){animation-delay:.8s;color:var(--text-muted)}.success-decoration[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:nth-child(5){animation-delay:1s}.btn-success.btn-lg[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a745,#20c997);border:none;padding:.75rem 1.5rem;font-size:1rem;font-weight:600;border-radius:1.5rem;box-shadow:0 6px 20px #28a7454d;transition:all .3s ease;min-width:150px}.btn-success.btn-lg[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#218838,#1ea080);transform:translateY(-2px);box-shadow:0 8px 25px #28a74566}.section-header[_ngcontent-%COMP%]{margin-bottom:2rem;text-align:center}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--text-color);font-weight:700;font-size:1.75rem;margin-bottom:.5rem}.section-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-muted);font-size:1rem;margin-bottom:0}.filters-section[_ngcontent-%COMP%]{margin-bottom:2rem;background-color:var(--card-bg);border-radius:1rem;padding:1.5rem;border:1px solid var(--border-color)}.filter-buttons[_ngcontent-%COMP%]{display:flex;gap:.75rem;flex-wrap:wrap;justify-content:center}.filter-btn[_ngcontent-%COMP%]{background-color:var(--bg-secondary);color:var(--text-light);border:2px solid var(--border-color);border-radius:2rem;padding:.75rem 1.5rem;font-size:.9rem;font-weight:600;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;gap:.5rem;min-width:120px;justify-content:center}.filter-btn[_ngcontent-%COMP%]:hover{background-color:var(--primary-color);border-color:var(--primary-color);color:#fff;transform:translateY(-2px);box-shadow:var(--shadow-hover)}.filter-btn.active[_ngcontent-%COMP%]{background:var(--primary-gradient);border-color:var(--primary-color);color:#fff;transform:translateY(-2px);box-shadow:var(--shadow-hover)}.filter-btn[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{background-color:#fff3;color:inherit;font-size:.75rem;padding:.25rem .5rem;border-radius:1rem;font-weight:600}.loading-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:1040;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px)}.loading-overlay[_ngcontent-%COMP%]   .spinner-border[_ngcontent-%COMP%]{width:3rem;height:3rem;color:var(--primary-color)}.loading-overlay[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;font-weight:600;margin-top:1rem;font-size:1.1rem}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:3rem 1rem;background-color:var(--card-bg);border-radius:1rem;border:1px solid var(--border-color)}.empty-icon[_ngcontent-%COMP%]{font-size:4rem;color:var(--text-muted);margin-bottom:1.5rem}.empty-state[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:var(--text-color);font-weight:600;margin-bottom:1rem}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-muted);margin-bottom:2rem}.reservations-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:1rem}.reservation-card[_ngcontent-%COMP%]{background-color:var(--card-bg);border:1px solid var(--border-color);border-radius:1rem;box-shadow:var(--shadow);overflow:hidden;transition:all .3s ease;animation:_ngcontent-%COMP%_fadeInUp .3s ease-out}.reservation-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--shadow-hover)}.reservation-card.upcoming[_ngcontent-%COMP%]{border-left:4px solid #ffc107}.reservation-card.past[_ngcontent-%COMP%]{border-left:4px solid #28a745}.card-header[_ngcontent-%COMP%]{padding:1rem;background:linear-gradient(135deg,var(--bg-secondary),var(--card-bg));border-bottom:1px solid var(--border-color);display:flex;flex-direction:column;gap:1rem}.restaurant-info[_ngcontent-%COMP%]{flex:1}.restaurant-name[_ngcontent-%COMP%]{color:var(--text-color);font-size:1.1rem;font-weight:700;margin-bottom:.25rem}.reservation-customer[_ngcontent-%COMP%]{color:var(--text-muted);font-size:.875rem;margin-bottom:0}.reservation-customer[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--primary-color)}.status-badge[_ngcontent-%COMP%]{align-self:flex-start;padding:.375rem .75rem;border-radius:1rem;font-size:.75rem;font-weight:600;display:flex;align-items:center;gap:.25rem;border:1px solid var(--border-color);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);box-shadow:var(--shadow)}.status-badge.upcoming[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffc10733,#ffc1071a);color:#ffc107;border-color:#ffc1074d}.status-badge.completed[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a74533,#28a7451a);color:#28a745;border-color:#28a7454d}.card-body[_ngcontent-%COMP%]{padding:1rem}.reservation-details[_ngcontent-%COMP%]{margin-bottom:1rem}.detail-row[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;margin-bottom:.75rem}.detail-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:.875rem;color:var(--text-light)}.detail-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--primary-color);width:16px;text-align:center}.detail-item.notes[_ngcontent-%COMP%]{background-color:var(--bg-secondary);padding:.75rem;border-radius:.5rem;border-left:3px solid var(--primary-color);margin-top:.5rem}.detail-item.notes[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-style:italic;color:var(--text-light)}.card-actions[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;padding-top:1rem;border-top:1px solid var(--border-color)}.card-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-size:.875rem;padding:.5rem 1rem;border-radius:.5rem;font-weight:500;transition:all .3s ease;flex:1;min-width:100px;text-align:center}.card-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover:not(.disabled){transform:translateY(-1px);box-shadow:var(--shadow)}.card-actions[_ngcontent-%COMP%]   .btn.disabled[_ngcontent-%COMP%]{opacity:.6;cursor:not-allowed;background-color:var(--bg-secondary);border-color:var(--border-color);color:var(--text-muted)}.btn-primary[_ngcontent-%COMP%]{background:var(--primary-gradient);border:none;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background:var(--primary-dark);transform:translateY(-2px)}.btn-outline-primary[_ngcontent-%COMP%]{border:1px solid var(--primary-color);color:var(--primary-color);background:transparent}.btn-outline-primary[_ngcontent-%COMP%]:hover{background:var(--primary-color);color:#fff}.btn-outline-danger[_ngcontent-%COMP%]{border:1px solid #dc3545;color:#dc3545;background:transparent}.btn-outline-danger[_ngcontent-%COMP%]:hover{background:#dc3545;color:#fff}.btn-danger[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dc3545,#c82333);border:none;color:#fff}.btn-danger[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#c82333,#a71e2a)}.btn-secondary[_ngcontent-%COMP%]{background:var(--bg-secondary);border:2px solid var(--border-color);color:var(--text-color)}.btn-secondary[_ngcontent-%COMP%]:hover{background:var(--border-color)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(30px);opacity:0}to{transform:translateY(0);opacity:1}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}@keyframes _ngcontent-%COMP%_successBounce{0%{transform:scale(.3) translateY(-50px);opacity:0}50%{transform:scale(1.05)}70%{transform:scale(.95)}to{transform:scale(1) translateY(0);opacity:1}}@keyframes _ngcontent-%COMP%_successPulse{0%,to{transform:scale(1);box-shadow:0 6px 20px #28a74566}50%{transform:scale(1.05);box-shadow:0 8px 25px #28a74599}}@keyframes _ngcontent-%COMP%_successCheckmark{0%{transform:scale(0) rotate(-45deg);opacity:0}50%{transform:scale(1.2) rotate(-10deg)}to{transform:scale(1) rotate(0);opacity:1}}@keyframes _ngcontent-%COMP%_successSlideIn{0%{transform:translate(-20px);opacity:0}to{transform:translate(0);opacity:1}}@media (max-width: 575px){.custom-modal[_ngcontent-%COMP%]{max-width:350px;margin:.5rem}.modal-header[_ngcontent-%COMP%]{padding:1rem 1rem .75rem}.modal-body[_ngcontent-%COMP%]{padding:.75rem 1rem}.modal-actions[_ngcontent-%COMP%]{padding:.75rem 1rem 1rem;flex-direction:column;gap:.5rem}.modal-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;min-width:auto}.modal-icon[_ngcontent-%COMP%]{width:50px;height:50px;font-size:1.5rem}.modal-title[_ngcontent-%COMP%]{font-size:1.1rem}.edit-modal[_ngcontent-%COMP%]{max-width:350px}.edit-form[_ngcontent-%COMP%]{gap:.75rem}.success-modal[_ngcontent-%COMP%]{max-width:350px}.success-decoration[_ngcontent-%COMP%]{gap:.5rem;font-size:1rem;flex-wrap:wrap}.btn-success.btn-lg[_ngcontent-%COMP%]{width:100%;min-width:auto;padding:.75rem 1rem}.filters-section[_ngcontent-%COMP%]{padding:1rem}.filter-buttons[_ngcontent-%COMP%]{flex-direction:column}.filter-btn[_ngcontent-%COMP%]{min-width:auto;width:100%}.card-actions[_ngcontent-%COMP%]{flex-direction:column}.card-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;min-width:auto}}@media (min-width: 768px){.reservations-container[_ngcontent-%COMP%]{padding:0 1rem}.section-header[_ngcontent-%COMP%]{text-align:left}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:2rem}.reservations-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(350px,1fr));gap:1.5rem}.card-header[_ngcontent-%COMP%]{flex-direction:row;align-items:flex-start}.detail-row[_ngcontent-%COMP%]{flex-direction:row;gap:1.5rem}.card-actions[_ngcontent-%COMP%]{flex-direction:row;justify-content:flex-start}.card-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{flex:0 1 auto;min-width:120px}}@media (min-width: 1024px){.reservations-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(400px,1fr));gap:2rem}.reservation-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}}@media (min-width: 1200px){.reservations-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}.reservations-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(450px,1fr))}}.dark-theme[_ngcontent-%COMP%]   .success-modal[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--card-bg),rgba(40,167,69,.08));border-color:#28a745}.dark-theme[_ngcontent-%COMP%]   .success-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a74526,#28a74514)}.filter-btn[_ngcontent-%COMP%]:focus, .btn[_ngcontent-%COMP%]:focus, .modal-close[_ngcontent-%COMP%]:focus{outline:2px solid var(--primary-color);outline-offset:2px}@media (prefers-reduced-motion: reduce){.filter-btn[_ngcontent-%COMP%], .card-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .reservation-card[_ngcontent-%COMP%], .custom-modal-overlay[_ngcontent-%COMP%], .custom-modal[_ngcontent-%COMP%], .success-modal[_ngcontent-%COMP%], .success-icon[_ngcontent-%COMP%], .success-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .success-decoration[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transition:none;animation:none}.filter-btn[_ngcontent-%COMP%]:hover, .filter-btn.active[_ngcontent-%COMP%], .reservation-card[_ngcontent-%COMP%]:hover, .btn-success.btn-lg[_ngcontent-%COMP%]:hover{transform:none}}"]})};var k=ce(Ce());var we=class o{constructor(t){this.http=t}API_URL=`${St.apiUrl}/users`;getAllUsers(){return this.http.get(this.API_URL)}getUserById(t){return this.http.get(`${this.API_URL}/${t}`)}getUserByEmail(t){return this.http.get(`${this.API_URL}/email/${t}`)}checkEmailExists(t){return this.http.get(`${this.API_URL}/check-email/${t}`)}getAllBusinessUsers(){return this.http.get(`${this.API_URL}/business`)}getAllCustomers(){return this.http.get(`${this.API_URL}/customers`)}updateProfile(t,e,r){let l={firstName:e.trim(),lastName:r.trim()};return console.log("\u{1F504} UserService: Aggiornamento profilo per ID",t,":",l),this.http.put(`${this.API_URL}/${t}/profile`,l)}changePassword(t,e,r){let l={currentPassword:e,newPassword:r};return console.log("\u{1F511} UserService: Cambio password per ID",t),this.http.put(`${this.API_URL}/${t}/password`,l)}deleteAccount(t,e){let r={headers:new _t({"Content-Type":"application/json"}),body:{password:e}};return console.log("\u{1F5D1}\uFE0F UserService: Eliminazione account per ID",t),this.http.delete(`${this.API_URL}/${t}`,r)}registerBusiness(t){return console.log("\u{1F4DD} UserService: Registrazione business:",t.email),this.http.post(`${this.API_URL}/register/business`,t)}validateEmail(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}validatePassword(t){let e=[];return t.length<6&&e.push("La password deve essere di almeno 6 caratteri"),/[A-Za-z]/.test(t)||e.push("La password deve contenere almeno una lettera"),/[0-9]/.test(t)||e.push("La password deve contenere almeno un numero"),{isValid:e.length===0,errors:e}}validateName(t){return typeof t=="string"&&t.trim().length>=2&&/^[a-zA-ZÀ-ÿ\s]+$/.test(t.trim())}formatDisplayName(t,e){return!t&&!e?"Utente":t?e?`${t} ${e}`:t:e||"Utente"}getUserInitials(t,e){let r=t?.charAt(0).toUpperCase()||"",l=e?.charAt(0).toUpperCase()||"";return r+l||"U"}formatRole(t){return{CUSTOMER:"Cliente",BUSINESS:"Azienda",ADMIN:"Amministratore"}[t]||t}getRoleColor(t){return{CUSTOMER:"#28a745",BUSINESS:"#007bff",ADMIN:"#dc3545"}[t]||"#6c757d"}createEmptyUser(){return{userId:0,email:"",firstName:"",lastName:"",role:"CUSTOMER"}}cloneUser(t){return{userId:t.userId,email:t.email,firstName:t.firstName,lastName:t.lastName,role:t.role}}getUserStats(t){return new et(e=>{setTimeout(()=>{e.next({totalReservations:0,completedReservations:0,cancelledReservations:0,favoriteRestaurants:0,memberSince:"2024"}),e.complete()},500)})}canEditField(t,e){return{CUSTOMER:["firstName","lastName"],BUSINESS:["firstName","lastName"],ADMIN:["firstName","lastName","email","role"]}[e]?.includes(t)||!1}sendVerificationEmail(t){return console.log("\u{1F4E7} UserService: Invio email verifica per ID",t),this.http.post(`${this.API_URL}/${t}/verify-email`,{})}resetPassword(t){return console.log("\u{1F504} UserService: Reset password per email",t),this.http.post(`${this.API_URL}/reset-password`,{email:t})}static \u0275fac=function(e){return new(e||o)(Y(q))};static \u0275prov=G({token:o,factory:o.\u0275fac,providedIn:"root"})};function Qt(o,t){o&1&&(n(0,"div",4)(1,"div",5)(2,"span",6),s(3,"Caricamento..."),i()(),n(4,"p",7),s(5,"Caricamento profilo..."),i()())}function Kt(o,t){if(o&1&&(n(0,"div",8),g(1,"i",9),s(2),i()),o&2){let e=d();a(2),x(" ",e.error," ")}}function Jt(o,t){if(o&1){let e=b();n(0,"div",64)(1,"span",65),s(2),i(),n(3,"button",66),f("click",function(){p(e);let l=d().ngIf,m=d(2);return u(m.startEdit(l))}),g(4,"i",67),i()()}if(o&2){let e=d().ngIf;a(2),_(e.value),a(),c("disabled",e.loading)}}function Zt(o,t){o&1&&g(0,"i",76)}function Xt(o,t){o&1&&g(0,"i",77)}function en(o,t){if(o&1){let e=b();n(0,"div",68)(1,"input",69),P("ngModelChange",function(l){p(e);let m=d().ngIf;return M(m.value,l)||(m.value=l),u(l)}),f("keydown",function(l){p(e);let m=d().ngIf,V=d(2);return u(V.onKeydown(l,m))})("blur",function(){p(e);let l=d().ngIf,m=d(2);return u(m.onBlur(l))}),i(),n(2,"div",70)(3,"button",71),f("click",function(){p(e);let l=d().ngIf,m=d(2);return u(m.saveField(l))}),v(4,Zt,1,0,"i",72)(5,Xt,1,0,"i",73),i(),n(6,"button",74),f("click",function(){p(e);let l=d().ngIf,m=d(2);return u(m.cancelEdit(l))}),g(7,"i",75),i()()()}if(o&2){let e=d().ngIf;a(),y("ngModel",e.value),c("disabled",e.loading)("placeholder",e.placeholder),We("data-field",e.name),a(2),c("disabled",e.loading||!e.value.trim()),a(),c("ngIf",!e.loading),a(),c("ngIf",e.loading),a(),c("disabled",e.loading)}}function tn(o,t){if(o&1&&(n(0,"div",61),v(1,Jt,5,2,"div",62)(2,en,8,8,"div",63),i()),o&2){let e=t.ngIf;a(),c("ngIf",!e.editing),a(),c("ngIf",e.editing)}}function nn(o,t){if(o&1){let e=b();n(0,"div",64)(1,"span",65),s(2),i(),n(3,"button",66),f("click",function(){p(e);let l=d().ngIf,m=d(2);return u(m.startEdit(l))}),g(4,"i",67),i()()}if(o&2){let e=d().ngIf;a(2),_(e.value),a(),c("disabled",e.loading)}}function rn(o,t){o&1&&g(0,"i",76)}function on(o,t){o&1&&g(0,"i",77)}function an(o,t){if(o&1){let e=b();n(0,"div",68)(1,"input",69),P("ngModelChange",function(l){p(e);let m=d().ngIf;return M(m.value,l)||(m.value=l),u(l)}),f("keydown",function(l){p(e);let m=d().ngIf,V=d(2);return u(V.onKeydown(l,m))})("blur",function(){p(e);let l=d().ngIf,m=d(2);return u(m.onBlur(l))}),i(),n(2,"div",70)(3,"button",71),f("click",function(){p(e);let l=d().ngIf,m=d(2);return u(m.saveField(l))}),v(4,rn,1,0,"i",72)(5,on,1,0,"i",73),i(),n(6,"button",74),f("click",function(){p(e);let l=d().ngIf,m=d(2);return u(m.cancelEdit(l))}),g(7,"i",75),i()()()}if(o&2){let e=d().ngIf;a(),y("ngModel",e.value),c("disabled",e.loading)("placeholder",e.placeholder),We("data-field",e.name),a(2),c("disabled",e.loading||!e.value.trim()),a(),c("ngIf",!e.loading),a(),c("ngIf",e.loading),a(),c("disabled",e.loading)}}function sn(o,t){if(o&1&&(n(0,"div",61),v(1,nn,5,2,"div",62)(2,an,8,8,"div",63),i()),o&2){let e=t.ngIf;a(),c("ngIf",!e.editing),a(),c("ngIf",e.editing)}}function ln(o,t){if(o&1){let e=b();n(0,"div",61)(1,"div",64)(2,"span",65),s(3),i(),n(4,"button",78),f("click",function(){let l=p(e).ngIf,m=d(2);return u(m.startEdit(l))}),g(5,"i",79),i()()()}if(o&2){let e=t.ngIf;a(3),_(e.value),a(),c("title","L'email non pu\xF2 essere modificata per motivi di sicurezza")}}function cn(o,t){o&1&&(n(0,"div",80)(1,"div",81),g(2,"i",77),i(),n(3,"div",82)(4,"div",83),s(5,"..."),i(),n(6,"div",84),s(7,"Caricamento..."),i()()())}function dn(o,t){if(o&1&&(n(0,"div",80)(1,"div",81),g(2,"i",85),i(),n(3,"div",82)(4,"div",83),s(5),i(),n(6,"div",84),s(7,"Prenotazioni Totali"),i()()()),o&2){let e=d(2);a(5),_(e.userStats.totalReservations)}}function mn(o,t){if(o&1&&(n(0,"div",80)(1,"div",81),g(2,"i",86),i(),n(3,"div",82)(4,"div",83),s(5),i(),n(6,"div",84),s(7,"Prenotazioni Completate"),i()()()),o&2){let e=d(2);a(5),_(e.userStats.completedReservations)}}function gn(o,t){if(o&1&&(n(0,"div",80)(1,"div",81),g(2,"i",87),i(),n(3,"div",82)(4,"div",83),s(5),i(),n(6,"div",84),s(7,"Ultimo Accesso"),i()()()),o&2){let e=d(2);a(5),_(e.userStats.lastLogin)}}function pn(o,t){if(o&1){let e=b();n(0,"div",10)(1,"div",11)(2,"div",12)(3,"div",13)(4,"div",14)(5,"div",15)(6,"div",16)(7,"span",17),s(8),i()(),n(9,"div")(10,"h2",18),s(11),i()()(),n(12,"div",19)(13,"div",20),g(14,"i",21),s(15," Verificato "),i()()()()()(),n(16,"div",22)(17,"div",23)(18,"div",24)(19,"div",25)(20,"h3",26),g(21,"i",27),s(22," Informazioni Personali "),i()(),n(23,"div",28)(24,"div",29)(25,"label",30),g(26,"i",27),s(27," Nome * "),i(),v(28,tn,3,2,"div",31),i(),n(29,"div",29)(30,"label",30),g(31,"i",27),s(32," Cognome * "),i(),v(33,sn,3,2,"div",31),i(),n(34,"div",29)(35,"label",30),g(36,"i",32),s(37," Email "),i(),v(38,ln,6,2,"div",31),n(39,"small",7),g(40,"i",33),s(41," L'email non pu\xF2 essere modificata per motivi di sicurezza "),i()()(),n(42,"div",34)(43,"h5",35),g(44,"i",36),s(45," Gestione Account "),i(),n(46,"div",37)(47,"button",38),f("click",function(){p(e);let l=d();return u(l.changePassword())}),g(48,"i",39),s(49," Cambia Password "),i(),n(50,"button",40),f("click",function(){p(e);let l=d();return u(l.deleteAccount())}),g(51,"i",41),s(52," Elimina Account "),i()()()()(),n(53,"div",42)(54,"div",24)(55,"div",25)(56,"h3",26),g(57,"i",43),s(58," Le Tue Statistiche "),i()(),n(59,"div",44),v(60,cn,8,0,"div",45)(61,dn,8,1,"div",45)(62,mn,8,1,"div",45)(63,gn,8,1,"div",45),i(),n(64,"div",46)(65,"h5",35),g(66,"i",47),s(67," Informazioni Account "),i(),n(68,"div",48)(69,"div",49)(70,"div",50),s(71,"ID Utente"),i(),n(72,"div",51),s(73),i()(),n(74,"div",49)(75,"div",50),s(76,"Tipo Account"),i(),n(77,"div",51)(78,"span",52),s(79),i()()(),n(80,"div",49)(81,"div",50),s(82,"Membro dal"),i(),n(83,"div",51),s(84),i()()()(),n(85,"div",53)(86,"h5",35),g(87,"i",54),s(88," Link Utili "),i(),n(89,"div",55)(90,"button",56),f("click",function(){p(e);let l=d();return u(l.openSupportCenter())}),g(91,"i",57),s(92," Centro Assistenza "),i(),n(93,"button",58),f("click",function(){p(e);let l=d();return u(l.showPrivacyPolicy())}),g(94,"i",59),s(95," Privacy Policy "),i(),n(96,"button",58),f("click",function(){p(e);let l=d();return u(l.showTermsOfService())}),g(97,"i",60),s(98," Termini di Servizio "),i()()()()()()()}if(o&2){let e=d();a(8),_(e.userInitials),a(3),_(e.fullName),a(17),c("ngIf",e.getField("firstName")),a(5),c("ngIf",e.getField("lastName")),a(5),c("ngIf",e.getField("email")),a(22),c("ngIf",e.loadingStats),a(),c("ngIf",!e.loadingStats),a(),c("ngIf",!e.loadingStats),a(),c("ngIf",!e.loadingStats),a(10),_(e.currentUser.userId),a(6),_(e.currentUser.role),a(5),_(e.userStats.memberSince)}}var Oe=class o{constructor(t,e,r,l,m){this.userService=t;this.authService=e;this.reservationService=r;this.http=l;this.cdr=m}currentUser=null;loading=!1;error=null;saving=!1;loadingStats=!0;editableFields=[];userStats={totalReservations:0,completedReservations:0,memberSince:"",lastLogin:""};userReservations=[];ngOnInit(){this.initializeProfile()}ngOnChanges(){this.currentUser&&this.initializeProfile()}initializeProfile(){if(!this.currentUser){this.error="Errore: dati utente non disponibili";return}this.initializeEditableFields(),this.loadUserStats(),console.log("\u2705 Profilo utente inizializzato:",this.currentUser)}initializeEditableFields(){this.currentUser&&(this.editableFields=[{name:"firstName",value:this.currentUser.firstName||"",editing:!1,originalValue:this.currentUser.firstName||"",loading:!1,required:!0,type:"text",placeholder:"Il tuo nome",icon:"fas fa-user"},{name:"lastName",value:this.currentUser.lastName||"",editing:!1,originalValue:this.currentUser.lastName||"",loading:!1,required:!0,type:"text",placeholder:"Il tuo cognome",icon:"fas fa-user"},{name:"email",value:this.currentUser.email||"",editing:!1,originalValue:this.currentUser.email||"",loading:!1,required:!0,type:"email",placeholder:"La tua email",icon:"fas fa-envelope",readonly:!0}])}loadUserStats(){this.currentUser&&(this.loadingStats=!0,this.reservationService.getReservationsByCustomer(this.currentUser.userId).subscribe({next:t=>{this.userReservations=t,console.log("\u{1F4CA} Prenotazioni utente caricate:",t.length),this.calculateUserStats(t),this.loadingStats=!1,this.cdr.detectChanges()},error:t=>{console.error("\u274C Errore caricamento prenotazioni:",t),this.userStats={totalReservations:0,completedReservations:0,memberSince:this.formatJoinDate(),lastLogin:"Oggi"},this.loadingStats=!1,this.cdr.detectChanges()}}))}calculateUserStats(t){let e=new Date,r=t.length,l=t.filter(m=>{try{return new Date(m.reservationDate+" "+m.reservationTime)<e}catch{return!1}}).length;this.userStats={totalReservations:r,completedReservations:l,memberSince:this.formatJoinDate(),lastLogin:"Oggi"},console.log("\u{1F4CA} Statistiche calcolate:",this.userStats)}startEdit(t){if(t.readonly){this.showInfoMessage("Campo non modificabile","Questo campo non pu\xF2 essere modificato per motivi di sicurezza.");return}this.editableFields.forEach(e=>{e!==t&&e.editing&&this.cancelEdit(e)}),t.editing=!0,t.originalValue=t.value,this.cdr.detectChanges(),console.log("\u270F\uFE0F Modifica campo:",t.name),setTimeout(()=>{let e=document.querySelector(`[data-field="${t.name}"]`);e&&(e.focus(),e.select())},50)}saveField(t){if(t.required&&!t.value.trim()){this.showErrorMessage("Campo obbligatorio","Questo campo \xE8 obbligatorio e non pu\xF2 essere vuoto.");return}if(t.type==="email"&&!this.isValidEmail(t.value)){this.showErrorMessage("Email non valida","Inserisci un indirizzo email valido.");return}t.loading=!0,this.cdr.detectChanges(),console.log("\u{1F4BE} Salvando campo:",t.name,"=",t.value),this.currentUser&&this.userService.updateProfile(this.currentUser.userId,this.getFieldValue("firstName"),this.getFieldValue("lastName")).subscribe({next:e=>{console.log("\u2705 Profilo aggiornato dal backend:",e),this.currentUser&&(this.currentUser.firstName=e.firstName,this.currentUser.lastName=e.lastName),this.authService.updateUserProfileData(e),t.editing=!1,t.loading=!1,t.originalValue=t.value,this.cdr.detectChanges(),this.showSuccessMessage("Profilo aggiornato!","Le tue informazioni sono state salvate con successo.")},error:e=>{console.error("\u274C Errore aggiornamento profilo:",e),t.value=t.originalValue,t.editing=!1,t.loading=!1,this.cdr.detectChanges(),this.showErrorMessage("Errore di salvataggio","Si \xE8 verificato un errore durante il salvataggio. Riprova pi\xF9 tardi.")}})}cancelEdit(t){t.value=t.originalValue,t.editing=!1,t.loading=!1,this.cdr.detectChanges(),console.log("\u274C Modifica annullata:",t.name)}async deleteAccount(){(await k.default.fire({title:"Elimina Account",html:`
        <div style="text-align: left; margin: 1rem 0;">
          <p style="margin-bottom: 1rem;"><strong>\u26A0\uFE0F ATTENZIONE: Questa azione \xE8 irreversibile!</strong></p>
          <p style="margin-bottom: 1rem;">Eliminando il tuo account:</p>
          <ul style="text-align: left; margin: 1rem 0;">
            <li>Perderai tutte le tue ${this.userStats.totalReservations} prenotazioni</li>
            <li>Non potrai pi\xF9 accedere con questo account</li>
            <li>Tutti i tuoi dati verranno cancellati</li>
          </ul>
          <p style="margin-top: 1rem;"><strong>Sei sicuro di voler procedere?</strong></p>
        </div>
      `,icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d",confirmButtonText:'<i class="fas fa-trash"></i> S\xEC, elimina tutto',cancelButtonText:'<i class="fas fa-times"></i> Annulla',reverseButtons:!0,customClass:{container:"swal-container",popup:"swal-popup"}})).isConfirmed&&(await k.default.fire({title:"Ultima conferma",text:"Inserisci la tua password per confermare l'eliminazione dell'account",input:"password",inputPlaceholder:"Password attuale",inputAttributes:{autocapitalize:"off",autocorrect:"off"},showCancelButton:!0,confirmButtonText:"Elimina definitivamente",cancelButtonText:"Annulla",confirmButtonColor:"#dc3545",preConfirm:r=>r||(k.default.showValidationMessage("La password \xE8 obbligatoria"),!1)})).isConfirmed&&(console.log("\u{1F5D1}\uFE0F Eliminazione account confermata"),this.showSuccessMessage("Account eliminato","Il tuo account \xE8 stato eliminato con successo. Verrai reindirizzato alla homepage."),setTimeout(()=>{this.authService.logout(),window.location.href="/"},3e3))}async changePassword(){let{value:t}=await k.default.fire({title:"Cambia Password",html:`
  <div style="display: flex; flex-direction: column; gap: 1rem;">
    <div>
      <label style="display: block; text-align: left; margin-bottom: 0.5rem; font-weight: 600;">Password attuale:</label>
      <input
        id="current-password"
        type="password"
        class="swal2-input"
        placeholder="Inserisci la password attuale"
        autocomplete="off"
        autocorrect="off"
        autocapitalize="off"
        spellcheck="false"
        style="margin: 0;"
        value="">
    </div>
    <div>
      <label style="display: block; text-align: left; margin-bottom: 0.5rem; font-weight: 600;">Nuova password:</label>
      <input
        id="new-password"
        type="password"
        class="swal2-input"
        placeholder="Inserisci la nuova password"
        autocomplete="new-password"
        autocorrect="off"
        autocapitalize="off"
        spellcheck="false"
        style="margin: 0;"
        value="">
    </div>
    <div>
      <label style="display: block; text-align: left; margin-bottom: 0.5rem; font-weight: 600;">Conferma nuova password:</label>
      <input
        id="confirm-password"
        type="password"
        class="swal2-input"
        placeholder="Conferma la nuova password"
        autocomplete="new-password"
        autocorrect="off"
        autocapitalize="off"
        spellcheck="false"
        style="margin: 0;"
        value="">
    </div>
  </div>
`,focusConfirm:!1,showCancelButton:!0,confirmButtonText:'<i class="fas fa-key"></i> Cambia Password',cancelButtonText:"Annulla",confirmButtonColor:"#28a745",preConfirm:()=>{let e=document.getElementById("current-password").value,r=document.getElementById("new-password").value,l=document.getElementById("confirm-password").value;return!e||!r||!l?(k.default.showValidationMessage("Tutti i campi sono obbligatori"),!1):r.length<6?(k.default.showValidationMessage("La nuova password deve essere di almeno 6 caratteri"),!1):r!==l?(k.default.showValidationMessage("Le nuove password non corrispondono"),!1):{currentPassword:e,newPassword:r}}});t&&this.currentUser&&(k.default.fire({title:"Cambio in corso...",html:"Verifica della password attuale e aggiornamento...",allowOutsideClick:!1,allowEscapeKey:!1,showConfirmButton:!1,didOpen:()=>{k.default.showLoading()}}),console.log("\u{1F511} Cambio password richiesto per utente:",this.currentUser.userId),this.userService.changePassword(this.currentUser.userId,t.currentPassword,t.newPassword).subscribe({next:e=>{console.log("\u2705 Password cambiata con successo:",e),k.default.fire({title:"\u{1F511} Password Cambiata!",html:`
            <div style="text-align: center;">
              <div style="font-size: 3rem; margin-bottom: 1rem;">\u2705</div>
              <p style="margin-bottom: 1rem;">La tua password \xE8 stata aggiornata con successo!</p>
              <div style="background: #d4edda; padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                <p style="margin: 0; color: #155724;"><strong>Per sicurezza, effettua il login con la nuova password</strong></p>
              </div>
            </div>
          `,icon:"success",confirmButtonText:"Perfetto!",confirmButtonColor:"#28a745",timer:5e3,timerProgressBar:!0})},error:e=>{console.error("\u274C Errore cambio password:",e);let r="Si \xE8 verificato un errore durante il cambio password.";e.status===400?r="Password attuale non corretta. Riprova.":e.status===404?r="Utente non trovato.":e.error?.message&&(r=e.error.message),k.default.fire({title:"\u274C Errore Cambio Password",html:`
            <div style="text-align: center;">
              <div style="font-size: 3rem; margin-bottom: 1rem;">\u{1F6AB}</div>
              <p style="margin-bottom: 1rem;">${r}</p>
              <div style="background: #f8d7da; padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                <p style="margin: 0; color: #721c24;"><strong>Verifica di aver inserito correttamente la password attuale</strong></p>
              </div>
            </div>
          `,icon:"error",confirmButtonText:"Riprova",confirmButtonColor:"#dc3545"})}}))}async openSupportCenter(){let{value:t}=await k.default.fire({title:"\u{1F198} Centro Assistenza",html:`
        <div style="text-align: left; margin: 1rem 0;">
  <p style="margin-bottom: 1rem;">Descrivi il tuo problema e ti risponderemo al pi\xF9 presto!</p>

  <div style="margin-bottom: 1rem;">
    <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Tipo di problema:</label>
    <select id="issue-type" class="swal2-select" style="width: 100%; margin: 0 auto; display: block;">
      <option value="">Seleziona una categoria</option>
      <option value="reservation">Problemi con prenotazioni</option>
      <option value="account">Problemi con l'account</option>
      <option value="payment">Problemi di pagamento</option>
      <option value="restaurant">Problemi con un ristorante</option>
      <option value="technical">Problemi tecnici</option>
      <option value="other">Altro</option>
    </select>
  </div>

  <div style="margin-bottom: 1rem;">
    <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Descrizione del problema:</label>
    <textarea id="issue-description" class="swal2-textarea" placeholder="Descrivi dettagliatamente il tuo problema..." style="min-height: 120px; resize: vertical; width: 100%; margin: 0 auto; display: block;"></textarea>
  </div>

  <div style="background: #f8f9fa; padding: 1rem; border-radius: 8px; font-size: 0.9em; color: #6c757d;">
    <p style="margin: 0;"><strong>\u{1F4E7} Ti risponderemo via email entro 24 ore!</strong></p>
    <p style="margin: 0.5rem 0 0 0;">Email di contatto: ${this.currentUser?.email}</p>
  </div>
</div>
      `,width:"600px",showCancelButton:!0,confirmButtonText:'<i class="fas fa-paper-plane"></i> Invia Segnalazione',cancelButtonText:'<i class="fas fa-times"></i> Annulla',confirmButtonColor:"#28a745",focusConfirm:!1,preConfirm:()=>{let e=document.getElementById("issue-type").value,r=document.getElementById("issue-description").value;return e?!r||r.trim().length<10?(k.default.showValidationMessage("Descrivi il problema (almeno 10 caratteri)"),!1):{issueType:e,description:r.trim()}:(k.default.showValidationMessage("Seleziona il tipo di problema"),!1)}});t&&await this.sendSupportEmail(t.issueType,t.description)}async sendSupportEmail(t,e){k.default.fire({title:"Invio in corso...",html:"Stiamo inviando la tua segnalazione...",allowOutsideClick:!1,allowEscapeKey:!1,showConfirmButton:!1,didOpen:()=>{k.default.showLoading()}});let r={to:"cinque.sabrina@gmail.com",subject:`[TheSpoon] Segnalazione: ${this.getIssueTypeLabel(t)}`,html:`
        <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
          <h2 style="color: #333; border-bottom: 2px solid #007bff; padding-bottom: 10px;">
            \u{1F198} Nuova Segnalazione da TheSpoon
          </h2>

          <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0;">
            <h3 style="margin-top: 0; color: #007bff;">Informazioni Cliente</h3>
            <p><strong>Nome:</strong> ${this.fullName}</p>
            <p><strong>Email:</strong> ${this.currentUser?.email}</p>
            <p><strong>ID Utente:</strong> ${this.currentUser?.userId}</p>
            <p><strong>Data:</strong> ${new Date().toLocaleString("it-IT")}</p>
          </div>

          <div style="background: #fff; padding: 20px; border: 1px solid #dee2e6; border-radius: 8px;">
            <h3 style="margin-top: 0; color: #dc3545;">Dettagli Problema</h3>
            <p><strong>Categoria:</strong> ${this.getIssueTypeLabel(t)}</p>
            <p><strong>Descrizione:</strong></p>
            <div style="background: #f8f9fa; padding: 15px; border-left: 4px solid #007bff; margin: 10px 0;">
              ${e.replace(/\n/g,"<br>")}
            </div>
          </div>

          <div style="margin-top: 20px; padding: 15px; background: #d4edda; border-radius: 8px; color: #155724;">
            <p style="margin: 0;"><strong>Ricorda:</strong> Rispondi a questa email per contattare direttamente il cliente.</p>
          </div>
        </div>
      `};try{await new Promise(l=>setTimeout(l,2e3)),console.log("\u{1F4E7} Email di supporto inviata:",r),k.default.fire({title:"\u2705 Segnalazione Inviata!",html:`
          <div style="text-align: center;">
            <div style="font-size: 3rem; margin-bottom: 1rem;">\u{1F4E7}</div>
            <p style="margin-bottom: 1rem;">La tua segnalazione \xE8 stata inviata con successo!</p>
            <div style="background: #d4edda; padding: 1rem; border-radius: 8px; margin: 1rem 0;">
              <p style="margin: 0; color: #155724;"><strong>Ti risponderemo entro 24 ore</strong></p>
              <p style="margin: 0.5rem 0 0 0; color: #155724;">Controlla la tua email: ${this.currentUser?.email}</p>
            </div>
          </div>
        `,icon:"success",confirmButtonText:"Perfetto!",confirmButtonColor:"#28a745",timer:5e3,timerProgressBar:!0})}catch(l){console.error("\u274C Errore invio email supporto:",l),k.default.fire({title:"Errore Invio",text:"Si \xE8 verificato un errore durante l'invio. Riprova pi\xF9 tardi o contattaci direttamente.",icon:"error",confirmButtonText:"Ho capito",confirmButtonColor:"#dc3545"})}}getIssueTypeLabel(t){return{reservation:"Problemi con prenotazioni",account:"Problemi con l'account",payment:"Problemi di pagamento",restaurant:"Problemi con un ristorante",technical:"Problemi tecnici",other:"Altro"}[t]||"Non specificato"}showPrivacyPolicy(){k.default.fire({title:"\u{1F512} Privacy Policy",html:`
        <div style="text-align: left; max-height: 400px; overflow-y: auto; padding: 1rem;">
          <h4>Informativa sulla Privacy</h4>
          <p><strong>Ultima modifica:</strong> Luglio 2025</p>

          <h5>1. Raccolta Dati</h5>
          <p>Raccogliamo i seguenti dati personali:</p>
          <ul>
            <li>Nome e cognome</li>
            <li>Indirizzo email</li>
            <li>Storico prenotazioni</li>
            <li>Recensioni e valutazioni</li>
          </ul>

          <h5>2. Utilizzo Dati</h5>
          <p>I tuoi dati vengono utilizzati per:</p>
          <ul>
            <li>Gestire le prenotazioni</li>
            <li>Migliorare il servizio</li>
            <li>Comunicazioni relative al servizio</li>
          </ul>

          <h5>3. Sicurezza</h5>
          <p>Proteggiamo i tuoi dati con tecnologie di sicurezza avanzate e non li condividiamo con terze parti senza il tuo consenso.</p>

          <h5>4. I Tuoi Diritti</h5>
          <p>Hai il diritto di accedere, modificare o eliminare i tuoi dati in qualsiasi momento.</p>

          <div style="background: #f8f9fa; padding: 1rem; border-radius: 8px; margin-top: 1rem;">
            <p style="margin: 0;"><strong>\u{1F4E7} Contatti:</strong> Per domande sulla privacy, scrivi a cinque.sabrina@gmail.com</p>
          </div>
        </div>
      `,width:"600px",confirmButtonText:"Ho capito",confirmButtonColor:"#007bff"})}showTermsOfService(){k.default.fire({title:"\u{1F4C4} Termini di Servizio",html:`
        <div style="text-align: left; max-height: 400px; overflow-y: auto; padding: 1rem;">
          <h4>Termini e Condizioni</h4>
          <p><strong>Ultima modifica:</strong> Luglio 2025</p>

          <h5>1. Accettazione dei Termini</h5>
          <p>Utilizzando TheSpoon, accetti questi termini di servizio.</p>

          <h5>2. Utilizzo del Servizio</h5>
          <p>TheSpoon \xE8 una piattaforma per:</p>
          <ul>
            <li>Prenotare tavoli nei ristoranti</li>
            <li>Lasciare recensioni</li>
            <li>Gestire il proprio profilo</li>
          </ul>

          <h5>3. Comportamento Utente</h5>
          <p>\xC8 vietato:</p>
          <ul>
            <li>Lasciare recensioni false o offensive</li>
            <li>Prenotare tavoli senza presentarsi</li>
            <li>Utilizzare il servizio per scopi illeciti</li>
          </ul>

          <h5>4. Responsabilit\xE0</h5>
          <p>TheSpoon funge da intermediario tra utenti e ristoranti. Non siamo responsabili per la qualit\xE0 del servizio nei ristoranti.</p>

          <h5>5. Modifiche</h5>
          <p>Ci riserviamo il diritto di modificare questi termini in qualsiasi momento.</p>

          <div style="background: #f8f9fa; padding: 1rem; border-radius: 8px; margin-top: 1rem;">
            <p style="margin: 0;"><strong>\u{1F4E7} Domande:</strong> Per chiarimenti, contatta cinque.sabrina@gmail.com</p>
          </div>
        </div>
      `,width:"600px",confirmButtonText:"Accetto",confirmButtonColor:"#28a745"})}refreshStats(){this.loadUserStats()}getField(t){return this.editableFields.find(e=>e.name===t)}getFieldValue(t){let e=this.getField(t);return e?e.value:""}isValidEmail(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}formatJoinDate(){let t=new Date;return new Date(t.getTime()-2*24*60*60*1e3).toLocaleDateString("it-IT",{month:"long",year:"numeric"})}showSuccessMessage(t,e){k.default.fire({title:t,text:e,icon:"success",confirmButtonText:'<i class="fas fa-check"></i> Perfetto!',confirmButtonColor:"#28a745",timer:3e3,timerProgressBar:!0})}showErrorMessage(t,e){k.default.fire({title:t,text:e,icon:"error",confirmButtonText:'<i class="fas fa-times"></i> Ho capito',confirmButtonColor:"#dc3545"})}showInfoMessage(t,e){k.default.fire({title:t,text:e,icon:"info",confirmButtonText:'<i class="fas fa-check"></i> OK',confirmButtonColor:"#17a2b8"})}get fullName(){return this.currentUser?`${this.currentUser.firstName} ${this.currentUser.lastName}`.trim():""}get userInitials(){if(!this.currentUser)return"??";let t=this.currentUser.firstName?.charAt(0)||"",e=this.currentUser.lastName?.charAt(0)||"";return(t+e).toUpperCase()}onKeydown(t,e){t.key==="Enter"?(t.preventDefault(),this.saveField(e)):t.key==="Escape"&&(t.preventDefault(),this.cancelEdit(e))}onBlur(t){t.value!==t.originalValue&&t.value.trim()!==""?this.saveField(t):t.value.trim()===""&&t.required&&this.cancelEdit(t)}static \u0275fac=function(e){return new(e||o)(h(we),h(I),h(J),h(q),h(T))};static \u0275cmp=w({type:o,selectors:[["app-my-profile"]],inputs:{currentUser:"currentUser"},features:[ne],decls:4,vars:3,consts:[[1,"profile-section"],["class","text-center py-5",4,"ngIf"],["class","alert alert-danger","role","alert",4,"ngIf"],["class","profile-content",4,"ngIf"],[1,"text-center","py-5"],["role","status",1,"spinner-border","text-primary","mb-3"],[1,"visually-hidden"],[1,"text-muted"],["role","alert",1,"alert","alert-danger"],[1,"fas","fa-exclamation-triangle","me-2"],[1,"profile-content"],[1,"row","mb-4"],[1,"col-12"],[1,"profile-header","p-4","rounded-4","mb-4"],[1,"d-flex","align-items-center","justify-content-between","flex-wrap"],[1,"d-flex","align-items-center"],[1,"profile-avatar","me-3"],[1,"avatar-initials"],[1,"profile-title","mb-1"],[1,"profile-badges"],[1,"badge","bg-primary","rounded-pill","px-3","py-2"],[1,"fas","fa-user-check","me-1"],[1,"row","g-4"],[1,"col-lg-8"],[1,"section-card","h-100"],[1,"section-header"],[1,"section-title"],[1,"fas","fa-user","me-2"],[1,"profile-fields"],[1,"profile-field"],[1,"field-label"],["class","field-container",4,"ngIf"],[1,"fas","fa-envelope","me-2"],[1,"fas","fa-info-circle","me-1"],[1,"account-actions","mt-4","pt-4","border-top"],[1,"mb-3"],[1,"fas","fa-cog","me-2"],[1,"d-flex","flex-wrap","gap-3"],[1,"btn","btn-outline-primary",3,"click"],[1,"fas","fa-key","me-2"],[1,"btn","btn-outline-danger",3,"click"],[1,"fas","fa-trash","me-2"],[1,"col-lg-4"],[1,"fas","fa-chart-bar","me-2"],[1,"stats-grid"],["class","stat-item",4,"ngIf"],[1,"account-info","mt-4","pt-4","border-top"],[1,"fas","fa-info-circle","me-2"],[1,"info-grid"],[1,"info-item"],[1,"info-label"],[1,"info-value"],[1,"role-badge","customer"],[1,"useful-links","mt-4","pt-4","border-top"],[1,"fas","fa-external-link-alt","me-2"],[1,"d-flex","flex-column","gap-2"],[1,"btn","btn-outline-info","btn-sm",3,"click"],[1,"fas","fa-question-circle","me-2"],[1,"btn","btn-outline-secondary","btn-sm",3,"click"],[1,"fas","fa-shield-alt","me-2"],[1,"fas","fa-file-contract","me-2"],[1,"field-container"],["class","field-view",4,"ngIf"],["class","field-edit",4,"ngIf"],[1,"field-view"],[1,"field-value"],[1,"btn-edit",3,"click","disabled"],[1,"fas","fa-edit"],[1,"field-edit"],["type","text",1,"form-control",3,"ngModelChange","keydown","blur","ngModel","disabled","placeholder"],[1,"field-actions"],[1,"btn","btn-sm","btn-success",3,"click","disabled"],["class","fas fa-check",4,"ngIf"],["class","fas fa-spinner fa-spin",4,"ngIf"],[1,"btn","btn-sm","btn-outline-secondary",3,"click","disabled"],[1,"fas","fa-times"],[1,"fas","fa-check"],[1,"fas","fa-spinner","fa-spin"],[1,"btn-edit","btn-disabled",3,"click","title"],[1,"fas","fa-lock","text-warning"],[1,"stat-item"],[1,"stat-icon"],[1,"stat-content"],[1,"stat-value"],[1,"stat-label"],[1,"fas","fa-calendar-check"],[1,"fas","fa-check-circle"],[1,"fas","fa-clock"]],template:function(e,r){e&1&&(n(0,"div",0),v(1,Qt,6,0,"div",1)(2,Kt,3,1,"div",2)(3,pn,99,12,"div",3),i()),e&2&&(a(),c("ngIf",r.loading),a(),c("ngIf",r.error&&!r.loading),a(),c("ngIf",!r.loading&&!r.error&&r.currentUser))},dependencies:[O,S,U,F,N,A,ue],styles:[".profile-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color),var(--primary-hover));color:var(--text-color);border:none;box-shadow:0 8px 32px #00cdb54d}.profile-avatar[_ngcontent-%COMP%]{color:var(--text-color);width:70px;height:70px;background:var(--bg-color);border-radius:50%;display:flex;align-items:center;justify-content:center;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:3px solid rgba(255,255,255,.3)}.avatar-initials[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:var(--text-color)}.profile-title[_ngcontent-%COMP%]{color:var(--text-color);font-size:1.8rem;font-weight:700;margin:0}.profile-subtitle[_ngcontent-%COMP%]{color:var(--text-color);opacity:.9;font-size:1rem;margin:0}.profile-member-since[_ngcontent-%COMP%]{color:var(--text-color);font-size:.85rem;margin-top:.25rem;display:block}.profile-badges[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{font-size:.9rem;font-weight:500;box-shadow:0 4px 12px #0003}.profile-fields[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.profile-field[_ngcontent-%COMP%]{border-bottom:1px solid var(--border-light);padding-bottom:1rem}.profile-field[_ngcontent-%COMP%]:last-child{border-bottom:none;padding-bottom:0}.field-label[_ngcontent-%COMP%]{display:block;font-weight:600;color:var(--text-color);margin-bottom:.75rem;font-size:.95rem}.field-container[_ngcontent-%COMP%]{position:relative}.field-view[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:1rem}.field-value[_ngcontent-%COMP%]{flex:1;font-size:1rem;color:var(--text-color);line-height:1.4;min-height:24px;display:flex;align-items:center}.btn-edit[_ngcontent-%COMP%]{background:none;border:none;color:var(--primary-color);font-size:.9rem;padding:.5rem;border-radius:6px;cursor:pointer;transition:all .3s ease;opacity:.7}.btn-edit[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--primary-color);color:var(--text-color);opacity:1;transform:scale(1.1)}.btn-edit.btn-disabled[_ngcontent-%COMP%]{color:var(--text-muted);cursor:not-allowed}.btn-edit.btn-disabled[_ngcontent-%COMP%]:hover{background:none;transform:none}.field-edit[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.field-edit[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border:2px solid var(--primary-color);border-radius:8px;font-size:1rem;transition:all .3s ease;background:var(--bg-color);color:var(--text-color)}.field-edit[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .25rem rgba(var(--primary-rgb, 0, 205, 181),.25);border-color:var(--primary-hover);background:var(--bg-color)}.field-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-self:flex-end}.field-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-radius:6px;font-size:.85rem;padding:.4rem .8rem;display:flex;align-items:center;gap:.25rem}.account-actions[_ngcontent-%COMP%]{background:var(--bg-secondary);border-radius:12px;padding:1.5rem}.account-actions[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:var(--text-color);font-weight:600;margin-bottom:1rem}.account-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-radius:8px;font-weight:500;padding:.6rem 1.2rem;transition:all .3s ease}.account-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #00000026}.stats-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.stat-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1rem;background:var(--bg-secondary);border-radius:12px;border:1px solid var(--border-light);transition:all .3s ease}.stat-item[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a}.stat-icon[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:12px;background:linear-gradient(135deg,var(--primary-color),var(--primary-hover));display:flex;align-items:center;justify-content:center;color:#fff;font-size:1.25rem}.stat-content[_ngcontent-%COMP%]{flex:1}.stat-value[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:var(--text-color);line-height:1}.stat-label[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-muted);margin-top:.25rem}.info-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.info-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.75rem;background:var(--bg-secondary);border-radius:8px;border:1px solid var(--border-light)}.info-label[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-muted);font-weight:500}.info-value[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-color);font-weight:600;display:flex;align-items:center;gap:.5rem}.role-badge[_ngcontent-%COMP%]{padding:.25rem .5rem;border-radius:4px;font-size:.75rem;font-weight:600;text-transform:uppercase}.role-badge.customer[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff}.useful-links[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{justify-content:flex-start;border-radius:8px;transition:all .3s ease}.useful-links[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{transform:translate(5px)}.section-card[_ngcontent-%COMP%]{background:var(--card-bg);border:1px solid var(--border-color);border-radius:16px;padding:1.5rem;box-shadow:0 2px 8px #0000001a;transition:all .3s ease}.section-header[_ngcontent-%COMP%]{margin-bottom:1.5rem;padding-bottom:1rem;border-bottom:2px solid var(--border-light)}.section-title[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:700;color:var(--text-color);margin:0;display:flex;align-items:center}.fa-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.profile-header[_ngcontent-%COMP%]{text-align:center}.profile-header[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.profile-avatar[_ngcontent-%COMP%]{width:60px;height:60px}.avatar-initials[_ngcontent-%COMP%]{font-size:1.25rem}.profile-title[_ngcontent-%COMP%]{font-size:1.5rem}.field-view[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:.5rem}.btn-edit[_ngcontent-%COMP%]{align-self:flex-end}.field-actions[_ngcontent-%COMP%]{align-self:stretch;justify-content:flex-end}.account-actions[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]{flex-direction:column}.account-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .useful-links[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%}.stats-grid[_ngcontent-%COMP%]{gap:.75rem}.stat-item[_ngcontent-%COMP%]{padding:.75rem}.stat-icon[_ngcontent-%COMP%]{width:40px;height:40px;font-size:1rem}.stat-value[_ngcontent-%COMP%]{font-size:1.25rem}}@media (max-width: 576px){.section-card[_ngcontent-%COMP%]{padding:1rem}.profile-header[_ngcontent-%COMP%]{padding:1.5rem!important}.account-actions[_ngcontent-%COMP%]{padding:1rem}}[data-theme=dark][_ngcontent-%COMP%]   .profile-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color),#1a4b5c)}[data-theme=dark][_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%], [data-theme=dark][_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{background:var(--card-bg);border-color:var(--border-color)}[data-theme=dark][_ngcontent-%COMP%]   .account-actions[_ngcontent-%COMP%]{background:var(--card-bg)}[data-theme=dark][_ngcontent-%COMP%]   .btn-edit.btn-disabled[_ngcontent-%COMP%]{color:var(--text-muted)}.profile-content[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .5s ease-out}.stat-item[_ngcontent-%COMP%], .info-item[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInScale .3s ease-out}.stat-item[_ngcontent-%COMP%]:nth-child(1){animation-delay:.1s}.stat-item[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.stat-item[_ngcontent-%COMP%]:nth-child(3){animation-delay:.3s}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeInScale{0%{opacity:0;transform:scale(.9)}to{opacity:1;transform:scale(1)}}.btn-edit[title][_ngcontent-%COMP%]{position:relative}.btn-edit[title][_ngcontent-%COMP%]:hover:after{content:attr(title);position:absolute;bottom:100%;left:50%;transform:translate(-50%);background:var(--text-color);color:var(--card-bg);padding:.5rem;border-radius:4px;font-size:.75rem;white-space:nowrap;z-index:1000;margin-bottom:.5rem;max-width:200px;white-space:normal;word-wrap:break-word}.btn[_ngcontent-%COMP%]:focus, .form-control[_ngcontent-%COMP%]:focus{outline:2px solid var(--primary-color);outline-offset:2px}.swal2-popup[_ngcontent-%COMP%]{border-radius:1rem!important;box-shadow:0 20px 60px #0000004d!important}.swal2-title[_ngcontent-%COMP%]{font-size:1.5rem!important;font-weight:700!important}.swal2-input[_ngcontent-%COMP%]{border:2px solid var(--border-color)!important;border-radius:.5rem!important;font-size:1rem!important;background:var(--bg-color)!important;color:var(--text-color)!important}.swal2-input[_ngcontent-%COMP%]:focus{border-color:var(--primary-color)!important;box-shadow:0 0 0 .25rem #00cdb540!important}@media (prefers-reduced-motion: reduce){.stat-item[_ngcontent-%COMP%], .info-item[_ngcontent-%COMP%], .profile-content[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%], .account-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .useful-links[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{animation:none;transition:none}.stat-item[_ngcontent-%COMP%]:hover, .account-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover, .useful-links[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{transform:none}}"]})};var le=ce(Ce());function fn(o,t){o&1&&(n(0,"div",5)(1,"div",6)(2,"span",7),s(3,"Caricamento..."),i()(),n(4,"p",8),s(5,"\u2B50 Caricamento delle tue recensioni..."),i()())}function vn(o,t){if(o&1){let e=b();n(0,"div",9)(1,"div",10),g(2,"i",11),s(3),n(4,"button",12),f("click",function(){p(e);let l=d();return u(l.refreshReviews())}),g(5,"i",13),s(6," Riprova "),i()()()}if(o&2){let e=d();a(3),x(" ",e.error," ")}}function _n(o,t){if(o&1&&(n(0,"div",30),s(1),i()),o&2){let e=d(2);a(),_(e.formatReviewDate(e.mostRecentReview.createdAt))}}function bn(o,t){o&1&&(n(0,"div",30),s(1,"-"),i())}function hn(o,t){if(o&1&&(n(0,"div",60)(1,"small",8),g(2,"i",61),s(3),i()()),o&2){let e=d(3);a(3),j(" Mostrate ",e.filteredReviews.length," di ",e.userReviews.length," recensioni ")}}function xn(o,t){if(o&1){let e=b();n(0,"div",41)(1,"div",42)(2,"div",43)(3,"div",44)(4,"label",45),s(5,"\u{1F50D} Cerca"),i(),n(6,"input",46),P("ngModelChange",function(l){p(e);let m=d(2);return M(m.searchTerm,l)||(m.searchTerm=l),u(l)}),f("input",function(){p(e);let l=d(2);return u(l.onSearchChange())}),i()(),n(7,"div",47)(8,"label",45),s(9,"\u{1F4CA} Ordina per"),i(),n(10,"select",48),P("ngModelChange",function(l){p(e);let m=d(2);return M(m.sortBy,l)||(m.sortBy=l),u(l)}),f("change",function(){p(e);let l=d(2);return u(l.onSortChange())}),n(11,"option",49),s(12,"Data"),i(),n(13,"option",50),s(14,"Rating"),i(),n(15,"option",51),s(16,"Ristorante"),i()()(),n(17,"div",52)(18,"label",45),s(19,"\u{1F4C8} Direzione"),i(),n(20,"select",48),P("ngModelChange",function(l){p(e);let m=d(2);return M(m.sortOrder,l)||(m.sortOrder=l),u(l)}),f("change",function(){p(e);let l=d(2);return u(l.onSortChange())}),n(21,"option",53),s(22,"Decrescente"),i(),n(23,"option",54),s(24,"Crescente"),i()()(),n(25,"div",52)(26,"label",45),s(27,"\u2B50 Min Rating"),i(),n(28,"select",48),P("ngModelChange",function(l){p(e);let m=d(2);return M(m.filterRating,l)||(m.filterRating=l),u(l)}),f("change",function(){p(e);let l=d(2);return u(l.onRatingFilterChange())}),n(29,"option",55),s(30,"Tutti"),i(),n(31,"option",55),s(32,"8+ Eccellente"),i(),n(33,"option",55),s(34,"6+ Buono"),i(),n(35,"option",55),s(36,"4+ Sufficiente"),i()()(),n(37,"div",56)(38,"button",57),f("click",function(){p(e);let l=d(2);return u(l.resetFilters())}),g(39,"i",58),i()()(),v(40,hn,4,2,"div",59),i()()}if(o&2){let e=d(2);a(6),y("ngModel",e.searchTerm),a(4),y("ngModel",e.sortBy),a(10),y("ngModel",e.sortOrder),a(8),y("ngModel",e.filterRating),a(),c("ngValue",null),a(2),c("ngValue",8),a(2),c("ngValue",6),a(2),c("ngValue",4),a(5),c("ngIf",e.filteredReviews.length!==e.userReviews.length)}}function Cn(o,t){if(o&1&&(n(0,"div",68)(1,"div",69),s(2),i(),n(3,"div",70),g(4,"div",71),i(),n(5,"div",72),s(6),i()()),o&2){let e=t.$implicit,r=d(3);a(2),x("",e.rating,"/10"),a(2),X("width",e.percentage,"%")("background-color",r.getRatingColor(e.rating)),a(2),_(e.count)}}function yn(o,t){if(o&1&&(n(0,"div",62)(1,"div",63)(2,"h5",64),g(3,"i",65),s(4," Distribuzione Rating "),i(),n(5,"div",66),v(6,Cn,7,6,"div",67),i()()()),o&2){let e=d(2);a(6),c("ngForOf",e.getRatingDistribution())}}function Mn(o,t){o&1&&(n(0,"div",73)(1,"div",74)(2,"div",75),s(3,"\u2B50"),i(),n(4,"h3",76),s(5,"Nessuna recensione ancora"),i(),n(6,"p",77),s(7," Non hai ancora scritto nessuna recensione."),g(8,"br"),s(9," Prenota un ristorante e condividi la tua esperienza! "),i(),n(10,"a",78),g(11,"i",79),s(12," Trova Ristoranti "),i()()())}function Pn(o,t){if(o&1){let e=b();n(0,"div",80)(1,"div",81)(2,"div",82),s(3,"\u{1F50D}"),i(),n(4,"h4",83),s(5,"Nessun risultato"),i(),n(6,"p",84),s(7," Nessuna recensione corrisponde ai filtri selezionati. "),i(),n(8,"button",22),f("click",function(){p(e);let l=d(2);return u(l.resetFilters())}),g(9,"i",85),s(10," Reset Filtri "),i()()()}}function wn(o,t){if(o&1&&(n(0,"div",125)(1,"div",126),g(2,"i",127),n(3,"p",128),s(4),i()()()),o&2){let e=d().$implicit;a(4),_(e.comment)}}function On(o,t){o&1&&(n(0,"div",125)(1,"p",129),g(2,"i",130),n(3,"em"),s(4,"Nessun commento aggiunto"),i()()())}function Sn(o,t){if(o&1){let e=b();n(0,"div",89)(1,"div",90)(2,"div",91)(3,"div",92),f("click",function(){let l=p(e).$implicit,m=d(3);return u(m.goToRestaurant(l.restaurant.id))}),n(4,"h5",93),s(5),i(),n(6,"p",94),g(7,"i",95),s(8),i()(),n(9,"div",96)(10,"div",97)(11,"button",98),g(12,"i",99),i(),n(13,"ul",100)(14,"li")(15,"a",101),f("click",function(l){let m=p(e).$implicit;return d(3).openEditReviewModal(m),u(l.preventDefault())}),g(16,"i",102),s(17," Modifica "),i()(),n(18,"li"),g(19,"hr",103),i(),n(20,"li")(21,"a",104),f("click",function(l){let m=p(e).$implicit;return d(3).deleteReview(m),u(l.preventDefault())}),g(22,"i",105),s(23," Elimina "),i()()()()()(),n(24,"div",106)(25,"span",107),s(26),i(),n(27,"span",108),s(28),i(),n(29,"span",109),s(30),i()(),n(31,"div",110)(32,"div",111)(33,"span",112),s(34,"\u{1F31F} Generale:"),i(),n(35,"span",113),s(36),i()(),n(37,"div",111)(38,"span",112),s(39,"\u{1F3DB}\uFE0F Atmosfera:"),i(),n(40,"span",113),s(41),i()(),n(42,"div",111)(43,"span",112),s(44,"\u{1F37D}\uFE0F Cibo:"),i(),n(45,"span",113),s(46),i()(),n(47,"div",111)(48,"span",112),s(49,"\u{1F91D} Servizio:"),i(),n(50,"span",113),s(51),i()()(),v(52,wn,5,1,"div",114)(53,On,5,0,"div",114),n(54,"div",115)(55,"div",116),g(56,"i",117),s(57),i(),n(58,"div",118)(59,"button",119),f("click",function(){let l=p(e).$implicit,m=d(3);return u(m.openEditReviewModal(l))}),g(60,"i",120),i(),n(61,"button",121),f("click",function(){let l=p(e).$implicit,m=d(3);return u(m.goToRestaurant(l.restaurant.id))}),g(62,"i",122),i(),n(63,"button",123),f("click",function(){let l=p(e).$implicit,m=d(3);return u(m.deleteReview(l))}),g(64,"i",124),i()()()()()}if(o&2){let e=t.$implicit,r=d(3);a(5),_(e.restaurant.name),a(3),x(" ",e.restaurant.city," "),a(3),c("id","reviewDropdown"+e.id),a(14),X("background-color",r.getRatingColor(e.ratingGeneral)),a(),x(" ",e.ratingGeneral,"/10 "),a(2),_(r.getRatingEmoji(e.ratingGeneral)),a(2),_(r.getStars(e.ratingGeneral)),a(5),X("color",r.getRatingColor(e.ratingGeneral)),a(),x(" ",e.ratingGeneral,"/10 "),a(4),X("color",r.getRatingColor(e.ratingAtmosfera)),a(),x(" ",e.ratingAtmosfera,"/10 "),a(4),X("color",r.getRatingColor(e.ratingCibo)),a(),x(" ",e.ratingCibo,"/10 "),a(4),X("color",r.getRatingColor(e.ratingServizio)),a(),x(" ",e.ratingServizio,"/10 "),a(),c("ngIf",e.comment),a(),c("ngIf",!e.comment),a(4),x(" ",r.formatReviewDate(e.createdAt)," ")}}function In(o,t){if(o&1&&(n(0,"div",86)(1,"div",87),v(2,Sn,65,23,"div",88),i()()),o&2){let e=d(2);a(2),c("ngForOf",e.filteredReviews)("ngForTrackBy",e.trackByFn)}}function kn(o,t){if(o&1){let e=b();n(0,"div",14)(1,"div",15)(2,"div",16)(3,"div",17)(4,"h2",18),g(5,"i",19),s(6," Le Mie Recensioni "),i(),n(7,"p",20),s(8,"Gestisci e visualizza tutte le tue recensioni"),i()(),n(9,"div",21)(10,"button",22),f("click",function(){p(e);let l=d();return u(l.refreshReviews())}),g(11,"i",23),s(12," Aggiorna "),i()()(),n(13,"div",24)(14,"div",25)(15,"div",26)(16,"div",27),g(17,"i",28),i(),n(18,"div",29)(19,"div",30),s(20),i(),n(21,"div",31),s(22,"Recensioni Totali"),i()()()(),n(23,"div",25)(24,"div",26)(25,"div",27),g(26,"i",32),i(),n(27,"div",29)(28,"div",30),s(29),i(),n(30,"div",31),s(31,"Rating Medio"),i()()()(),n(32,"div",25)(33,"div",26)(34,"div",27),g(35,"i",33),i(),n(36,"div",29)(37,"div",30),s(38),i(),n(39,"div",31),s(40,"Questo Mese"),i()()()(),n(41,"div",25)(42,"div",26)(43,"div",27),g(44,"i",34),i(),n(45,"div",29),v(46,_n,2,1,"div",35)(47,bn,2,0,"div",35),n(48,"div",31),s(49,"Ultima Recensione"),i()()()()()(),v(50,xn,41,9,"div",36)(51,yn,7,1,"div",37)(52,Mn,13,0,"div",38)(53,Pn,11,0,"div",39)(54,In,3,2,"div",40),i()}if(o&2){let e=d();a(20),_(e.totalReviews),a(9),x("",e.averageRating,"/10"),a(9),_(e.reviewsThisMonth),a(8),c("ngIf",e.mostRecentReview),a(),c("ngIf",!e.mostRecentReview),a(3),c("ngIf",e.totalReviews>0),a(),c("ngIf",e.totalReviews>3),a(),c("ngIf",e.totalReviews===0),a(),c("ngIf",e.totalReviews>0&&e.filteredReviews.length===0),a(),c("ngIf",e.filteredReviews.length>0)}}var Se=class o{constructor(t,e,r){this.reviewService=t;this.router=e;this.cdr=r}currentUser=null;loading=!1;error=null;userReviews=[];filteredReviews=[];isReviewModalOpen=!1;editingReview=null;selectedRestaurant=null;searchTerm="";sortBy="date";sortOrder="desc";filterRating=null;trackByFn=(t,e)=>e.id||t;ngOnInit(){this.currentUser&&this.loadUserReviews()}ngOnChanges(){this.currentUser&&this.loadUserReviews()}loadUserReviews(){this.currentUser&&(this.loading=!0,this.error=null,this.reviewService.getReviewsByCustomer(this.currentUser.userId).subscribe({next:t=>{this.userReviews=t,this.applyFiltersAndSort(),this.loading=!1,this.cdr.detectChanges(),console.log("\u2B50 Review utente caricate:",t.length)},error:t=>{console.error("\u274C Errore caricamento review:",t),this.error="Errore nel caricamento delle recensioni",this.loading=!1,this.cdr.detectChanges()}}))}applyFiltersAndSort(){let t=[...this.userReviews];this.searchTerm.trim()&&(t=t.filter(e=>e.restaurant.name.toLowerCase().includes(this.searchTerm.toLowerCase())||e.comment&&e.comment.toLowerCase().includes(this.searchTerm.toLowerCase()))),this.filterRating!==null&&(t=t.filter(e=>e.ratingGeneral>=this.filterRating)),t.sort((e,r)=>{let l=0;switch(this.sortBy){case"date":l=new Date(e.createdAt).getTime()-new Date(r.createdAt).getTime();break;case"rating":l=e.ratingGeneral-r.ratingGeneral;break;case"restaurant":l=e.restaurant.name.localeCompare(r.restaurant.name);break}return this.sortOrder==="desc"?-l:l}),this.filteredReviews=t}onSearchChange(){this.applyFiltersAndSort()}onSortChange(){this.applyFiltersAndSort()}onRatingFilterChange(){this.applyFiltersAndSort()}refreshReviews(){this.loadUserReviews()}openEditReviewModal(t){this.editingReview=t,this.selectedRestaurant={id:t.restaurant.id,name:t.restaurant.name,city:t.restaurant.city,description:"",address:"",phoneNumber:"",partitaIva:"",rating:0,imageUrl:"",cuisine:"",priceRange:""},this.isReviewModalOpen=!0,console.log("\u270F\uFE0F Apertura modal modifica review:",t.id)}closeReviewModal(){this.isReviewModalOpen=!1,this.editingReview=null,this.selectedRestaurant=null,console.log("\u274C Chiusura modal review")}onReviewSubmitted(t){console.log("\u2705 Review aggiornata:",t),this.loadUserReviews(),this.closeReviewModal()}async deleteReview(t){(await le.default.fire({title:"Elimina Recensione",html:`
        <div style="text-align: left; margin: 1rem 0;">
          <p style="margin-bottom: 1rem;"><strong>Stai per eliminare la tua recensione per:</strong></p>
          <div style="background: #f8f9fa; padding: 1rem; border-radius: 8px; margin: 1rem 0;">
            <h5 style="margin: 0 0 0.5rem 0; color: #333;">${t.restaurant.name}</h5>
            <p style="margin: 0; color: #666;">Rating: ${t.ratingGeneral}/10 \u2022 ${this.formatReviewDate(t.createdAt)}</p>
          </div>
          <p style="margin-top: 1rem;"><strong>\u26A0\uFE0F Questa azione non pu\xF2 essere annullata!</strong></p>
        </div>
      `,icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d",confirmButtonText:'<i class="fas fa-trash"></i> S\xEC, elimina',cancelButtonText:'<i class="fas fa-times"></i> Annulla',reverseButtons:!0})).isConfirmed&&this.reviewService.deleteReview(t.id,this.currentUser.userId).subscribe({next:r=>{console.log("\u2705 Review eliminata:",t.id,r),this.loadUserReviews(),le.default.fire({title:"Recensione eliminata!",text:"La tua recensione \xE8 stata eliminata con successo.",icon:"success",confirmButtonText:"Perfetto!",confirmButtonColor:"#22c55e",timer:3e3,timerProgressBar:!0})},error:r=>{console.error("\u274C Errore eliminazione review:",r),r.status===200&&r.error?.text?(console.log("\u2705 Eliminazione riuscita (risposta come testo):",r.error.text),this.loadUserReviews(),le.default.fire({title:"Recensione eliminata!",text:"La tua recensione \xE8 stata eliminata con successo.",icon:"success",confirmButtonText:"Perfetto!",confirmButtonColor:"#22c55e",timer:3e3,timerProgressBar:!0})):le.default.fire({title:"Errore",text:"Si \xE8 verificato un errore durante l'eliminazione della recensione.",icon:"error",confirmButtonText:"Ho capito",confirmButtonColor:"#dc3545"})}})}goToRestaurant(t){console.log("\u{1F3EA} Naviga al ristorante:",t),window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone||document.referrer.includes("android-app://")?this.router.navigate(["/restaurant",t]):window.open(`/restaurant/${t}`,"_blank")}get totalReviews(){return this.userReviews.length}get averageRating(){if(this.userReviews.length===0)return 0;let e=this.userReviews.reduce((r,l)=>r+l.ratingGeneral,0)/this.userReviews.length;return Math.round(e*10)/10}get reviewsByRating(){let t={};for(let e=1;e<=10;e++)t[e]=0;return this.userReviews.forEach(e=>{t[e.ratingGeneral]++}),t}get mostRecentReview(){return this.userReviews.length===0?null:this.userReviews.reduce((t,e)=>new Date(e.createdAt)>new Date(t.createdAt)?e:t)}get reviewsThisMonth(){let t=new Date,e=t.getMonth(),r=t.getFullYear();return this.userReviews.filter(l=>{let m=new Date(l.createdAt);return m.getMonth()===e&&m.getFullYear()===r}).length}formatReviewDate(t){return this.reviewService.formatReviewDate(t)}getStars(t){if(!t||t===0)return"\u2606\u2606\u2606\u2606\u2606";let e=Math.floor(t/2),r=5-e;return"\u2B50".repeat(e)+"\u2606".repeat(r)}getRatingColor(t){return this.reviewService.getRatingColor(t)}getRatingEmoji(t){return this.reviewService.getRatingEmoji(t)}resetFilters(){this.searchTerm="",this.sortBy="date",this.sortOrder="desc",this.filterRating=null,this.applyFiltersAndSort()}getRatingDistribution(){let t=[],e=this.userReviews.length;for(let r=10;r>=1;r--){let l=this.userReviews.filter(V=>V.ratingGeneral===r).length,m=e>0?Math.round(l/e*100):0;l>0&&t.push({rating:r,count:l,percentage:m})}return t}static \u0275fac=function(e){return new(e||o)(h(ye),h(R),h(T))};static \u0275cmp=w({type:o,selectors:[["app-my-reviews"]],inputs:{currentUser:"currentUser"},features:[ne],decls:5,vars:6,consts:[[1,"my-reviews-container"],["class","loading-state text-center py-5",4,"ngIf"],["class","error-state",4,"ngIf"],["class","reviews-content",4,"ngIf"],[3,"closeModal","reviewSubmitted","restaurant","editingReview","isOpen"],[1,"loading-state","text-center","py-5"],["role","status",1,"spinner-border","text-primary","mb-3"],[1,"visually-hidden"],[1,"text-muted"],[1,"error-state"],["role","alert",1,"alert","alert-danger"],[1,"fas","fa-exclamation-triangle","me-2"],[1,"btn","btn-outline-danger","btn-sm","ms-3",3,"click"],[1,"fas","fa-sync-alt","me-1"],[1,"reviews-content"],[1,"reviews-header"],[1,"row","align-items-center","mb-4"],[1,"col-md-6"],[1,"page-title"],[1,"fas","fa-star","me-2"],[1,"page-subtitle"],[1,"col-md-6","text-md-end"],[1,"btn","btn-outline-primary",3,"click"],[1,"fas","fa-sync-alt","me-2"],[1,"stats-cards","row","g-3","mb-4"],[1,"col-md-3","col-6"],[1,"stat-card"],[1,"stat-icon"],[1,"fas","fa-star"],[1,"stat-content"],[1,"stat-value"],[1,"stat-label"],[1,"fas","fa-medal"],[1,"fas","fa-calendar-check"],[1,"fas","fa-clock"],["class","stat-value",4,"ngIf"],["class","filters-section",4,"ngIf"],["class","rating-distribution",4,"ngIf"],["class","no-reviews-state",4,"ngIf"],["class","no-results-state",4,"ngIf"],["class","reviews-list",4,"ngIf"],[1,"filters-section"],[1,"filters-card"],[1,"row","g-3","align-items-end"],[1,"col-md-4"],[1,"form-label","fw-semibold"],["type","text","placeholder","Nome ristorante o commento...",1,"form-control",3,"ngModelChange","input","ngModel"],[1,"col-md-3"],[1,"form-select",3,"ngModelChange","change","ngModel"],["value","date"],["value","rating"],["value","restaurant"],[1,"col-md-2"],["value","desc"],["value","asc"],[3,"ngValue"],[1,"col-md-1"],["title","Reset filtri",1,"btn","btn-outline-secondary","w-100",3,"click"],[1,"fas","fa-undo"],["class","filter-results mt-3",4,"ngIf"],[1,"filter-results","mt-3"],[1,"fas","fa-filter","me-1"],[1,"rating-distribution"],[1,"distribution-card"],[1,"distribution-title"],[1,"fas","fa-chart-bar","me-2"],[1,"distribution-bars"],["class","rating-bar",4,"ngFor","ngForOf"],[1,"rating-bar"],[1,"bar-label"],[1,"bar-container"],[1,"bar-fill"],[1,"bar-value"],[1,"no-reviews-state"],[1,"no-reviews-card","text-center"],[1,"no-reviews-icon"],[1,"no-reviews-title"],[1,"no-reviews-text"],["routerLink","/",1,"btn","btn-primary","btn-lg"],[1,"fas","fa-search","me-2"],[1,"no-results-state"],[1,"no-results-card","text-center"],[1,"no-results-icon"],[1,"no-results-title"],[1,"no-results-text"],[1,"fas","fa-undo","me-2"],[1,"reviews-list"],[1,"row","g-4"],["class","col-lg-6 col-xl-4",4,"ngFor","ngForOf","ngForTrackBy"],[1,"col-lg-6","col-xl-4"],[1,"review-card"],[1,"review-header"],[1,"restaurant-info",3,"click"],[1,"restaurant-name"],[1,"restaurant-location"],[1,"fas","fa-map-marker-alt","me-1"],[1,"review-actions"],[1,"dropdown"],["type","button","data-bs-toggle","dropdown",1,"btn","btn-outline-secondary","btn-sm","dropdown-toggle",3,"id"],[1,"fas","fa-ellipsis-h"],[1,"dropdown-menu"],["href","#",1,"dropdown-item",3,"click"],[1,"fas","fa-edit","me-2"],[1,"dropdown-divider"],["href","#",1,"dropdown-item","text-danger",3,"click"],[1,"fas","fa-trash","me-2"],[1,"overall-rating"],[1,"rating-badge"],[1,"rating-emoji"],[1,"rating-stars"],[1,"detailed-ratings"],[1,"rating-row"],[1,"rating-label"],[1,"rating-value"],["class","review-comment",4,"ngIf"],[1,"review-footer"],[1,"review-date"],[1,"fas","fa-calendar","me-1"],[1,"review-actions-quick"],["title","Modifica recensione",1,"btn","btn-sm","btn-outline-primary",3,"click"],[1,"fas","fa-edit"],["title","Vai al ristorante",1,"btn","btn-sm","btn-outline-secondary",3,"click"],[1,"fas","fa-external-link-alt"],["title","Elimina recensione",1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"fas","fa-trash"],[1,"review-comment"],[1,"comment-content"],[1,"fas","fa-quote-left","quote-icon"],[1,"comment-text"],[1,"no-comment-text"],[1,"fas","fa-comment-slash","me-2","text-muted"]],template:function(e,r){e&1&&(n(0,"div",0),v(1,fn,6,0,"div",1)(2,vn,7,1,"div",2)(3,kn,55,10,"div",3),n(4,"app-review-modal",4),f("closeModal",function(){return r.closeReviewModal()})("reviewSubmitted",function(m){return r.onReviewSubmitted(m)}),i()()),e&2&&(a(),c("ngIf",r.loading),a(),c("ngIf",r.error&&!r.loading),a(),c("ngIf",!r.loading&&!r.error),a(),c("restaurant",r.selectedRestaurant)("editingReview",r.editingReview)("isOpen",r.isReviewModalOpen))},dependencies:[O,D,S,ie,fe,U,Q,K,F,$,N,A,It],styles:['.my-reviews-container[_ngcontent-%COMP%]{padding:1.5rem 0;background:var(--bg-color);color:var(--text-color);min-height:100vh}.reviews-header[_ngcontent-%COMP%]{margin-bottom:2rem}.page-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:var(--text-color);margin:0;display:flex;align-items:center}.page-subtitle[_ngcontent-%COMP%]{color:var(--text-muted);font-size:1.1rem;margin:.5rem 0 0}.stats-cards[_ngcontent-%COMP%]{margin-bottom:2rem}.stat-card[_ngcontent-%COMP%]{background:var(--card-bg);border:1px solid var(--border-color);border-radius:12px;padding:1.5rem;display:flex;align-items:center;gap:1rem;transition:all .3s ease;height:100%}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #0000001a;border-color:var(--primary-color)}.stat-icon[_ngcontent-%COMP%]{width:60px;height:60px;background:linear-gradient(135deg,var(--primary-color),var(--primary-hover));border-radius:12px;display:flex;align-items:center;justify-content:center;color:#fff;font-size:1.5rem;flex-shrink:0}.stat-content[_ngcontent-%COMP%]{flex:1}.stat-value[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;color:var(--text-color);line-height:1}.stat-label[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-muted);margin-top:.25rem}.filters-section[_ngcontent-%COMP%]{margin-bottom:2rem}.filters-card[_ngcontent-%COMP%]{background:var(--card-bg);border:1px solid var(--border-color);border-radius:12px;padding:1.5rem}.filters-card[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{color:var(--text-color);font-weight:600;margin-bottom:.5rem}.filters-card[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%], .filters-card[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]{background:var(--bg-color);border:1px solid var(--border-color);color:var(--text-color);border-radius:8px;transition:all .3s ease}.filters-card[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus, .filters-card[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]:focus{border-color:var(--primary-color);box-shadow:0 0 0 .2rem #00cdb540;background:var(--bg-color)}.filter-results[_ngcontent-%COMP%]{padding-top:1rem;border-top:1px solid var(--border-color)}.rating-distribution[_ngcontent-%COMP%]{margin-bottom:2rem}.distribution-card[_ngcontent-%COMP%]{background:var(--card-bg);border:1px solid var(--border-color);border-radius:12px;padding:1.5rem}.distribution-title[_ngcontent-%COMP%]{color:var(--text-color);font-size:1.2rem;font-weight:600;margin-bottom:1rem}.distribution-bars[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.rating-bar[_ngcontent-%COMP%]{display:grid;grid-template-columns:60px 1fr 40px;align-items:center;gap:1rem}.bar-label[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600;color:var(--text-color);text-align:center}.bar-container[_ngcontent-%COMP%]{background:var(--bg-secondary);border-radius:6px;height:20px;overflow:hidden;position:relative}.bar-fill[_ngcontent-%COMP%]{height:100%;border-radius:6px;transition:width .5s ease;background:var(--primary-color)}.bar-value[_ngcontent-%COMP%]{font-size:.85rem;font-weight:600;color:var(--text-color);text-align:center}.no-reviews-state[_ngcontent-%COMP%], .no-results-state[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]{margin:3rem 0}.no-reviews-card[_ngcontent-%COMP%], .no-results-card[_ngcontent-%COMP%]{background:var(--card-bg);border:2px dashed var(--border-color);border-radius:16px;padding:3rem 2rem;max-width:500px;margin:0 auto}.no-reviews-icon[_ngcontent-%COMP%], .no-results-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:1.5rem;opacity:.6}.no-reviews-title[_ngcontent-%COMP%], .no-results-title[_ngcontent-%COMP%]{color:var(--text-color);font-size:1.5rem;font-weight:600;margin-bottom:1rem}.no-reviews-text[_ngcontent-%COMP%], .no-results-text[_ngcontent-%COMP%]{color:var(--text-muted);font-size:1rem;line-height:1.5;margin-bottom:2rem}.reviews-list[_ngcontent-%COMP%]{margin-top:2rem}.review-card[_ngcontent-%COMP%]{background:var(--card-bg);border:1px solid var(--border-color);border-radius:16px;padding:1.5rem;height:100%;display:flex;flex-direction:column;transition:all .3s ease;position:relative;overflow:hidden}.review-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 12px 30px #00000026;border-color:var(--primary-color)}.review-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,var(--primary-color),var(--primary-hover));opacity:0;transition:opacity .3s ease}.review-card[_ngcontent-%COMP%]:hover:before{opacity:1}.review-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:1rem;gap:1rem}.restaurant-info[_ngcontent-%COMP%]{flex:1;cursor:pointer;transition:all .3s ease}.restaurant-info[_ngcontent-%COMP%]:hover   .restaurant-name[_ngcontent-%COMP%]{color:var(--primary-color)}.restaurant-name[_ngcontent-%COMP%]{color:var(--text-color);font-size:1.2rem;font-weight:700;margin:0 0 .25rem;transition:color .3s ease}.restaurant-location[_ngcontent-%COMP%]{color:var(--text-muted);font-size:.9rem;margin:0}.review-actions[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]{border:1px solid var(--border-color);background:var(--bg-secondary);color:var(--text-color);padding:.375rem .75rem}.review-actions[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]:hover{border-color:var(--primary-color);background:var(--primary-color);color:#fff}.review-actions[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{background:var(--card-bg);border:1px solid var(--border-color);box-shadow:0 8px 25px #00000026;border-radius:8px}.review-actions[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{color:var(--text-color);transition:all .3s ease;padding:.5rem 1rem}.review-actions[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:hover{background:var(--bg-secondary);color:var(--primary-color)}.review-actions[_ngcontent-%COMP%]   .dropdown-item.text-danger[_ngcontent-%COMP%]{color:#ef4444!important}.review-actions[_ngcontent-%COMP%]   .dropdown-item.text-danger[_ngcontent-%COMP%]:hover{background:#ef44441a!important;color:#dc2626!important}.overall-rating[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;margin-bottom:1rem;padding:.75rem;background:var(--bg-secondary);border-radius:8px}.rating-badge[_ngcontent-%COMP%]{color:#fff;padding:.5rem 1rem;border-radius:8px;font-weight:700;font-size:1rem}.rating-emoji[_ngcontent-%COMP%]{font-size:1.5rem}.rating-stars[_ngcontent-%COMP%]{font-size:1.1rem;letter-spacing:2px}.detailed-ratings[_ngcontent-%COMP%]{background:var(--bg-secondary);border-radius:8px;padding:1rem;margin-bottom:1rem}.rating-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.25rem 0}.rating-row[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid var(--border-color);padding-bottom:.5rem;margin-bottom:.5rem}.rating-label[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-color);font-weight:500}.rating-value[_ngcontent-%COMP%]{font-size:.95rem;font-weight:700}.review-comment[_ngcontent-%COMP%]{flex:1;margin-bottom:1rem}.comment-content[_ngcontent-%COMP%]{position:relative;padding:1rem;background:var(--bg-secondary);border-radius:8px;border-left:4px solid var(--primary-color)}.quote-icon[_ngcontent-%COMP%]{color:var(--primary-color);opacity:.6;margin-right:.5rem}.comment-text[_ngcontent-%COMP%]{color:var(--text-color);font-size:.95rem;line-height:1.5;margin:0;font-style:italic}.no-comment-text[_ngcontent-%COMP%]{color:var(--text-muted);font-size:.9rem;margin:0;padding:.75rem;text-align:center;background:var(--bg-secondary);border-radius:8px;border:1px dashed var(--border-color)}.review-footer[_ngcontent-%COMP%]{margin-top:auto;display:flex;justify-content:space-between;align-items:center;padding-top:1rem;border-top:1px solid var(--border-color)}.review-date[_ngcontent-%COMP%]{color:var(--text-muted);font-size:.85rem;font-weight:500}.review-actions-quick[_ngcontent-%COMP%]{display:flex;gap:.5rem}.review-actions-quick[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:36px;height:36px;display:flex;align-items:center;justify-content:center;border-radius:8px}@media (max-width: 768px){.my-reviews-container[_ngcontent-%COMP%]{padding:1rem 0}.page-title[_ngcontent-%COMP%]{font-size:1.5rem}.page-subtitle[_ngcontent-%COMP%]{font-size:1rem}.stats-cards[_ngcontent-%COMP%]   .col-6[_ngcontent-%COMP%]{margin-bottom:1rem}.stat-card[_ngcontent-%COMP%]{padding:1rem;flex-direction:column;text-align:center}.stat-icon[_ngcontent-%COMP%]{width:50px;height:50px;font-size:1.25rem;margin-bottom:.5rem}.stat-value[_ngcontent-%COMP%]{font-size:1.5rem}.filters-card[_ngcontent-%COMP%]{padding:1rem}.filters-card[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{gap:1rem}.distribution-card[_ngcontent-%COMP%]{padding:1rem}.rating-bar[_ngcontent-%COMP%]{grid-template-columns:50px 1fr 30px;gap:.5rem}.bar-label[_ngcontent-%COMP%], .bar-value[_ngcontent-%COMP%]{font-size:.8rem}.review-card[_ngcontent-%COMP%]{padding:1rem}.review-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:.5rem}.review-actions[_ngcontent-%COMP%]{align-self:flex-end}.overall-rating[_ngcontent-%COMP%]{flex-wrap:wrap;gap:.5rem}.rating-badge[_ngcontent-%COMP%]{font-size:.9rem;padding:.4rem .8rem}.rating-emoji[_ngcontent-%COMP%]{font-size:1.25rem}.rating-stars[_ngcontent-%COMP%]{font-size:1rem}.detailed-ratings[_ngcontent-%COMP%], .comment-content[_ngcontent-%COMP%]{padding:.75rem}.comment-text[_ngcontent-%COMP%]{font-size:.9rem}}@media (max-width: 576px){.reviews-header[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{text-align:center}.reviews-header[_ngcontent-%COMP%]   .col-md-6[_ngcontent-%COMP%]:last-child{margin-top:1rem}.filters-card[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-bottom:1rem}.filters-card[_ngcontent-%COMP%]   .col-md-1[_ngcontent-%COMP%]{display:none}.overall-rating[_ngcontent-%COMP%]{justify-content:center}.review-footer[_ngcontent-%COMP%]{flex-direction:column;gap:.75rem;text-align:center}.no-reviews-card[_ngcontent-%COMP%], .no-results-card[_ngcontent-%COMP%]{padding:2rem 1rem}.no-reviews-icon[_ngcontent-%COMP%], .no-results-icon[_ngcontent-%COMP%]{font-size:3rem}.no-reviews-title[_ngcontent-%COMP%], .no-results-title[_ngcontent-%COMP%]{font-size:1.25rem}}[data-theme=dark][_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%], [data-theme=dark][_ngcontent-%COMP%]   .filters-card[_ngcontent-%COMP%], [data-theme=dark][_ngcontent-%COMP%]   .distribution-card[_ngcontent-%COMP%], [data-theme=dark][_ngcontent-%COMP%]   .review-card[_ngcontent-%COMP%], [data-theme=dark][_ngcontent-%COMP%]   .no-reviews-card[_ngcontent-%COMP%], [data-theme=dark][_ngcontent-%COMP%]   .no-results-card[_ngcontent-%COMP%]{background:var(--card-bg)!important;border-color:var(--border-color)!important}[data-theme=dark][_ngcontent-%COMP%]   .overall-rating[_ngcontent-%COMP%], [data-theme=dark][_ngcontent-%COMP%]   .detailed-ratings[_ngcontent-%COMP%], [data-theme=dark][_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%], [data-theme=dark][_ngcontent-%COMP%]   .no-comment-text[_ngcontent-%COMP%]{background:var(--bg-secondary)!important}[data-theme=dark][_ngcontent-%COMP%]   .review-actions[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{background:var(--card-bg)!important;border-color:var(--border-color)!important}.review-card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .3s ease-out}.stat-card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInScale .3s ease-out}.review-card[_ngcontent-%COMP%]:nth-child(1){animation-delay:.1s}.review-card[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.review-card[_ngcontent-%COMP%]:nth-child(3){animation-delay:.3s}.review-card[_ngcontent-%COMP%]:nth-child(4){animation-delay:.4s}.review-card[_ngcontent-%COMP%]:nth-child(5){animation-delay:.5s}.review-card[_ngcontent-%COMP%]:nth-child(6){animation-delay:.6s}.stat-card[_ngcontent-%COMP%]:nth-child(1){animation-delay:.1s}.stat-card[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.stat-card[_ngcontent-%COMP%]:nth-child(3){animation-delay:.3s}.stat-card[_ngcontent-%COMP%]:nth-child(4){animation-delay:.4s}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeInScale{0%{opacity:0;transform:scale(.9)}to{opacity:1;transform:scale(1)}}@media (prefers-reduced-motion: reduce){.review-card[_ngcontent-%COMP%], .stat-card[_ngcontent-%COMP%], .bar-fill[_ngcontent-%COMP%]{animation:none;transition:none}.review-card[_ngcontent-%COMP%]:hover, .stat-card[_ngcontent-%COMP%]:hover{transform:none}}.skeleton[_ngcontent-%COMP%]{background:linear-gradient(90deg,var(--bg-secondary) 25%,var(--border-color) 50%,var(--bg-secondary) 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_skeleton-loading 1.5s infinite;border-radius:8px}@keyframes _ngcontent-%COMP%_skeleton-loading{0%{background-position:200% 0}to{background-position:-200% 0}}']})};var Z=class o{constructor(t,e){this.document=e;this.renderer=t.createRenderer(null,null);let r=localStorage.getItem("theme");r&&this.isDarkTheme.set(r==="dark"),gt(()=>{let m=this.isDarkTheme()?"dark":"light";console.log("\u{1F3A8} Tema applicato:",m),this.renderer.setAttribute(this.document.documentElement,"data-bs-theme",m),this.renderer.setAttribute(this.document.body,"data-theme",m),localStorage.setItem("theme",m)})}renderer;isDarkTheme=st(!0);toggleTheme(){this.isDarkTheme.update(t=>!t)}static \u0275fac=function(e){return new(e||o)(Y(lt),Y(ot))};static \u0275prov=G({token:o,factory:o.\u0275fac,providedIn:"root"})};function En(o,t){if(o&1&&(n(0,"p",21),s(1),i()),o&2){let e=d();a(),j(" Benvenuto, ",e.currentUser.firstName," ",e.currentUser.lastName," ")}}function Tn(o,t){o&1&&(n(0,"div",22)(1,"div",23)(2,"div",24)(3,"span",25),s(4,"Caricamento..."),i()(),n(5,"p",26),s(6,"Caricamento dei tuoi dati..."),i()()())}function Rn(o,t){if(o&1&&(n(0,"div",22)(1,"div",27),g(2,"i",28),s(3),i()()),o&2){let e=d();a(3),x(" ",e.error," ")}}function Dn(o,t){if(o&1){let e=b();n(0,"div",29)(1,"div",2)(2,"div",30)(3,"div",31)(4,"app-my-reservations",32),f("reservationUpdated",function(){p(e);let l=d();return u(l.refreshReservations())}),i()(),n(5,"div",31),g(6,"app-my-profile",33),i(),n(7,"div",31),g(8,"app-my-reviews",33),i()()()()}if(o&2){let e=d();a(3),C("show",e.activeTab==="reservations")("active",e.activeTab==="reservations"),a(),c("reservations",e.reservations)("currentUser",e.currentUser),a(),C("show",e.activeTab==="profile")("active",e.activeTab==="profile"),a(),c("currentUser",e.currentUser),a(),C("show",e.activeTab==="reviews")("active",e.activeTab==="reviews"),a(),c("currentUser",e.currentUser)}}var Ie=class o{constructor(t,e,r,l){this.authService=t;this.reservationService=e;this.themeService=r;this.cdr=l;let m=localStorage.getItem("customer_dashboard_tab");m&&(this.activeTab=m)}activeTab="reservations";currentUser=null;reservations=[];loading=!0;error=null;ngOnInit(){console.log("\u{1F3E0} Dashboard Customer inizializzata"),this.loadUserData(),this.loadReservations()}loadUserData(){this.currentUser=this.authService.getCurrentUser(),this.currentUser?console.log("\u2705 Utente caricato:",this.currentUser.firstName,this.currentUser.lastName):(this.error="Errore nel caricamento dei dati utente",this.loading=!1,console.error("\u274C Utente non trovato")),this.cdr.detectChanges()}loadReservations(){if(!this.currentUser){console.error("\u274C Impossibile caricare prenotazioni: utente non disponibile");return}console.log("\u{1F4C5} Caricamento prenotazioni per utente ID:",this.currentUser.userId),this.reservationService.getReservationsByCustomer(this.currentUser.userId).subscribe({next:t=>{console.log("\u2705 Prenotazioni caricate:",t),console.log("\u{1F4CA} Numero prenotazioni:",t.length),this.reservations=t,this.loading=!1,this.error=null,this.cdr.detectChanges(),console.log("\u{1F504} Change detection forzato - loading:",this.loading)},error:t=>{console.error("\u274C Errore nel caricamento delle prenotazioni:",t),this.error="Errore nel caricamento delle prenotazioni",this.loading=!1,this.reservations=[],this.cdr.detectChanges()}})}setActiveTab(t){console.log("\u{1F4CB} Cambio tab a:",t),this.activeTab=t,localStorage.setItem("customer_dashboard_tab",t),this.cdr.detectChanges()}refreshReservations(){console.log("\u{1F504} Refresh prenotazioni..."),this.loading=!0,this.error=null,this.cdr.detectChanges(),this.loadReservations()}get isDarkTheme(){return this.themeService.isDarkTheme()}onTabClick(t){console.log("\u{1F5B1}\uFE0F Click su tab:",t),this.setActiveTab(t)}get hasReservations(){return this.reservations.length>0}get reservationCount(){return this.reservations.length}getTabClass(t){return this.activeTab===t?"nav-link active":"nav-link"}getContainerClass(){return`dashboard-customer-container ${this.isDarkTheme?"dark-theme":"light-theme"}`}static \u0275fac=function(e){return new(e||o)(h(I),h(J),h(Z),h(T))};static \u0275cmp=w({type:o,selectors:[["app-dashboard-customer"]],decls:33,vars:13,consts:[[1,"dashboard-customer-container"],[1,"dashboard-header"],[1,"container"],[1,"row","align-items-center"],[1,"col-12","col-md-6"],[1,"dashboard-title"],[1,"fas","fa-user-circle","me-2"],["class","dashboard-subtitle",4,"ngIf"],[1,"col-12","col-md-6","text-end"],[1,"dashboard-stats"],[1,"stat-item"],[1,"fas","fa-calendar-check"],[1,"dashboard-nav"],[1,"nav","nav-tabs","dashboard-tabs"],[1,"nav-item"],[1,"nav-link",3,"click"],[1,"fas","fa-calendar-alt","me-2"],[1,"fas","fa-user-edit","me-2"],[1,"fas","fa-star","me-2"],["class","container mt-4",4,"ngIf"],["class","dashboard-content",4,"ngIf"],[1,"dashboard-subtitle"],[1,"container","mt-4"],[1,"text-center"],["role","status",1,"spinner-border"],[1,"visually-hidden"],[1,"mt-3"],["role","alert",1,"alert","alert-danger"],[1,"fas","fa-exclamation-triangle","me-2"],[1,"dashboard-content"],[1,"tab-content"],[1,"tab-pane","fade"],[3,"reservationUpdated","reservations","currentUser"],[3,"currentUser"]],template:function(e,r){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h1",5),g(6,"i",6),s(7," La Mia Area "),i(),v(8,En,2,2,"p",7),i(),n(9,"div",8)(10,"div",9)(11,"div",10),g(12,"i",11),n(13,"span"),s(14),i()()()()()()(),n(15,"div",12)(16,"div",2)(17,"ul",13)(18,"li",14)(19,"a",15),f("click",function(){return r.setActiveTab("reservations")}),g(20,"i",16),s(21," Le Mie Prenotazioni "),i()(),n(22,"li",14)(23,"a",15),f("click",function(){return r.setActiveTab("profile")}),g(24,"i",17),s(25," Il Mio Profilo "),i()(),n(26,"li",14)(27,"a",15),f("click",function(){return r.setActiveTab("reviews")}),g(28,"i",18),s(29," Le Mie Recensioni "),i()()()()(),v(30,Tn,7,0,"div",19)(31,Rn,4,1,"div",19)(32,Dn,9,16,"div",20),i()),e&2&&(C("dark-theme",r.isDarkTheme),a(8),c("ngIf",r.currentUser),a(6),x("",r.reservations.length," Prenotazioni"),a(5),C("active",r.activeTab==="reservations"),a(4),C("active",r.activeTab==="profile"),a(4),C("active",r.activeTab==="reviews"),a(3),c("ngIf",r.loading),a(),c("ngIf",r.error&&!r.loading),a(),c("ngIf",!r.loading&&!r.error))},dependencies:[O,S,ie,Pe,Oe,Se],styles:[".dashboard-customer-container[_ngcontent-%COMP%]{min-height:100vh;background:var(--bg-color);color:var(--text-color)}.dashboard-header[_ngcontent-%COMP%]{background:var(--bg-color);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-bottom:1px solid rgba(255,255,255,.1);padding:2rem 0;color:var(--text-color)}.dashboard-title[_ngcontent-%COMP%]{color:var(--text-color);font-size:2.5rem;font-weight:700;margin-bottom:.5rem;text-shadow:0 2px 4px rgba(0,0,0,.3)}.dashboard-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:gold}.dashboard-subtitle[_ngcontent-%COMP%]{color:var(--text-color);font-size:1.1rem;margin-bottom:0}.dashboard-stats[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem}@media (max-width: 768px){.dashboard-stats[_ngcontent-%COMP%]{justify-content:flex-start;margin-top:1rem}}.stat-item[_ngcontent-%COMP%]{background:var(--bg-color);padding:.75rem 1.5rem;border-radius:50px;color:var(--text-color);font-weight:600;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px)}.stat-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem;color:gold}.dashboard-nav[_ngcontent-%COMP%]{background:var(--bg-color);border-bottom:1px solid rgba(255,255,255,.1)}.dashboard-tabs[_ngcontent-%COMP%]{border-bottom:none}.dashboard-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{margin-bottom:0}.dashboard-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:var(--text-color);background:transparent;border:none;padding:1rem 1.5rem;font-weight:500;transition:all .3s ease}.dashboard-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{color:#fff;background:#ffffff1a}.dashboard-tabs[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{border-bottom:3px solid #ffd700}.dashboard-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{opacity:.8}.dashboard-content[_ngcontent-%COMP%]{padding:2rem 0}.dashboard-content[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]{background:var(--bg-color);border-radius:15px;box-shadow:0 10px 30px #0000001a;overflow:hidden}.dashboard-content[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .tab-pane[_ngcontent-%COMP%]{padding:2rem;min-height:400px}.spinner-border[_ngcontent-%COMP%]{color:var(--text-color);width:3rem;height:3rem}.alert[_ngcontent-%COMP%]{border-radius:10px;border:none;font-weight:500}@media (max-width: 768px){.dashboard-title[_ngcontent-%COMP%]{font-size:2rem}.dashboard-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{padding:.75rem 1rem;font-size:.9rem}.dashboard-content[_ngcontent-%COMP%]   .tab-pane[_ngcontent-%COMP%]{padding:1.5rem}}@media (max-width: 576px){.dashboard-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{padding:.5rem .75rem}.dashboard-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}}"],changeDetection:0})};function Vn(o,t){if(o&1){let e=b();n(0,"div",51),f("click",function(){let l=p(e).$implicit,m=d(2);return u(m.selectCity(l))}),n(1,"span",52),s(2,"\u{1F4CD}"),i(),s(3),i()}if(o&2){let e=t.$implicit,r=t.index,l=d(2);C("active",l.selectedCityIndex===r),a(3),x(" ",e," ")}}function Fn(o,t){if(o&1&&(n(0,"div",49),v(1,Vn,4,3,"div",50),i()),o&2){let e=d();a(),c("ngForOf",e.filteredCities)}}function Nn(o,t){if(o&1){let e=b();n(0,"div",53)(1,"div",54),f("click",function(){let l=p(e).$implicit,m=d();return u(m.filterByCuisine(l.name))}),n(2,"div",55),s(3),i(),n(4,"div",56),s(5),i()()()}if(o&2){let e=t.$implicit;a(3),x(" ",e.icon," "),a(2),_(e.name)}}function An(o,t){o&1&&(n(0,"div",40)(1,"div",37)(2,"div",57)(3,"div",58)(4,"span",59),s(5,"Loading..."),i()(),n(6,"p",60),s(7,"\u{1F37D}\uFE0F Caricamento ristoranti..."),i()()()())}function Un(o,t){if(o&1){let e=b();n(0,"div",40)(1,"div",37)(2,"div",61)(3,"h4",62),s(4,"Ops! Qualcosa \xE8 andato storto"),i(),n(5,"p",63),s(6),i(),n(7,"button",64),f("click",function(){p(e);let l=d();return u(l.loadRestaurants())}),s(8," \u{1F504} Riprova "),i()()()()}if(o&2){let e=d();a(6),_(e.error)}}function Bn(o,t){if(o&1){let e=b();n(0,"div",40)(1,"div",37)(2,"div",65)(3,"div",66),s(4,"\u{1F50D}"),i(),n(5,"h3",63),s(6,"Nessun ristorante trovato"),i(),n(7,"p",67),s(8,"Prova a modificare i filtri di ricerca"),i(),n(9,"button",68),f("click",function(){p(e);let l=d();return u(l.loadRestaurants())}),s(10," Mostra tutti i ristoranti "),i()()()()}}function Ln(o,t){if(o&1){let e=b();n(0,"img",92),f("error",function(l){p(e);let m=d().$implicit,V=d(2);return u(V.onImageError(l,m.id))}),i()}if(o&2){let e=d().$implicit,r=d(2);c("src",r.getRestaurantMainPhoto(e.id),B)("alt",e.name)}}function jn(o,t){if(o&1&&(n(0,"div",93)(1,"div",94)(2,"div",95),s(3,"\u{1F4F8}"),i(),n(4,"div",96),s(5),i()()()),o&2){let e=d().$implicit;a(5),_(e.name)}}function Hn(o,t){if(o&1){let e=b();n(0,"div",71)(1,"div",72),f("click",function(){let l=p(e).$implicit,m=d(2);return u(m.viewRestaurant(l.id))}),n(2,"div",73),v(3,Ln,1,2,"img",74)(4,jn,6,1,"div",75),n(5,"div",76)(6,"div",77)(7,"span",78),s(8,"\u2B50"),i(),s(9),i()(),n(10,"div",79)(11,"div",80),s(12," \u{1F441}\uFE0F Visualizza Dettagli "),i()()(),n(13,"div",21)(14,"div",81)(15,"div",82)(16,"h5",83),s(17),i(),n(18,"p",84)(19,"span",85),s(20,"\u{1F37D}\uFE0F"),i(),s(21),i()()(),n(22,"div",86)(23,"span",52),s(24,"\u{1F4CD}"),i(),n(25,"small",87),s(26),i()(),n(27,"p",88),s(28),i(),n(29,"div",89)(30,"div",90)(31,"div",91),s(32),i(),n(33,"small",87),s(34),i()()()()()()}if(o&2){let e=t.$implicit,r=d(2);a(3),c("ngIf",r.getRestaurantMainPhoto(e.id)),a(),c("ngIf",!r.getRestaurantMainPhoto(e.id)),a(5),x(" ",e.rating||0," "),a(8),_(e.name),a(4),x("",e.cuisineType," "),a(5),j("",e.address,", ",e.city),a(2),x(" ",e.description," "),a(4),_(r.getStars(e.rating||0)),a(2),x("",e.reviewCount||0," recensioni")}}function Yn(o,t){if(o&1&&(n(0,"div",69),v(1,Hn,35,10,"div",70),i()),o&2){let e=d();a(),c("ngForOf",e.filteredRestaurants)}}var ke=class o{constructor(t,e,r,l,m,V){this.restaurantService=t;this.photoService=e;this.uploadService=r;this.router=l;this.cdr=m;this.http=V}restaurants=[];filteredRestaurants=[];restaurantPhotos={};photoLoadingStates={};loading=!1;error=null;searchFilters={city:"",cuisine:""};availableCities=[];filteredCities=[];showCityDropdown=!1;selectedCityIndex=-1;categories=[{name:"Pizza",icon:"\u{1F355}"},{name:"Cinese",icon:"\u{1F962}"},{name:"Italiana",icon:"\u{1F35D}"},{name:"Pub&Steakhouse",icon:"\u{1F969}"},{name:"Vegetariana",icon:"\u{1F957}"}];quickFilters=[{name:"Tutti",active:!0},{name:"Aperti",active:!1},{name:"Migliori Recensioni",active:!1},{name:"Nuovi",active:!1},{name:"Premium",active:!1}];ngOnInit(){console.log("\u{1F3E0} Homepage inizializzata"),this.loadItalianCities(),this.loadRestaurants(),this.initAnimations()}loadItalianCities(){console.log("\u{1F4CD} Caricamento citt\xE0 italiane..."),this.http.get("assets/data/italian-cities.json").subscribe({next:t=>{console.log("\u2705 Citt\xE0 caricate:",t.length),this.availableCities=t.sort(),this.filteredCities=[]},error:t=>{console.error("\u274C Errore caricamento citt\xE0:",t),this.availableCities=["Milano","Roma","Napoli","Torino","Palermo","Genova","Bologna","Firenze","Bari","Catania","Venezia","Verona","Messina","Padova","Trieste","Taranto","Brescia","Parma","Reggio Emilia","Modena","Prato","Cagliari","Livorno","Perugia","Ravenna","Rimini","Salerno","Ferrara","Sassari","Monza","Bergamo","Trento","Forl\xEC","Vicenza","Terni","Bolzano","Novara","Piacenza","Ancona","Andria","Arezzo","Udine","Cesena","Lecce","Pesaro","Barletta","Alessandria","La Spezia","Pistoia","Caserta"].sort(),this.filteredCities=[]}})}onCityInput(t){let r=t.target.value.toLowerCase().trim();if(console.log("\u{1F50D} Ricerca citt\xE0:",r),r.length===0){this.filteredCities=[],this.showCityDropdown=!1,this.selectedCityIndex=-1;return}this.filteredCities=this.availableCities.filter(l=>l.toLowerCase().includes(r)).slice(0,10),this.showCityDropdown=this.filteredCities.length>0,this.selectedCityIndex=-1,console.log("\u{1F4CB} Citt\xE0 filtrate:",this.filteredCities.length)}onCityFocus(){console.log("\u{1F441}\uFE0F Focus su input citt\xE0"),this.searchFilters.city.length>0&&this.onCityInput({target:{value:this.searchFilters.city}})}onCityBlur(){setTimeout(()=>{console.log("\u{1F634} Blur input citt\xE0"),this.showCityDropdown=!1,this.selectedCityIndex=-1},200)}selectCity(t){console.log("\u{1F3AF} Citt\xE0 selezionata:",t),this.searchFilters.city=t,this.showCityDropdown=!1,this.selectedCityIndex=-1,this.filteredCities=[]}handleKeyboardNavigation(t){if(!(!this.showCityDropdown||this.filteredCities.length===0))switch(t.key){case"ArrowDown":t.preventDefault(),this.selectedCityIndex=Math.min(this.selectedCityIndex+1,this.filteredCities.length-1);break;case"ArrowUp":t.preventDefault(),this.selectedCityIndex=Math.max(this.selectedCityIndex-1,-1);break;case"Enter":t.preventDefault(),this.selectedCityIndex>=0&&this.selectCity(this.filteredCities[this.selectedCityIndex]);break;case"Escape":this.showCityDropdown=!1,this.selectedCityIndex=-1;break}}initAnimations(){setTimeout(()=>{document.querySelectorAll(".animate-on-load").forEach((e,r)=>{setTimeout(()=>{e.classList.add("animate__animated","animate__fadeInUp")},r*200)})},100)}loadRestaurants(){console.log("\u{1F4CA} Caricamento ristoranti..."),this.loading=!0,this.error=null,this.restaurantService.getAllRestaurants().subscribe({next:t=>{console.log("\u2705 Ristoranti caricati:",t),this.restaurants=t,this.filteredRestaurants=[...t],this.loading=!1,this.loadRestaurantPhotos(),this.cdr.detectChanges(),console.log("\u{1F504} Loading terminato + Change Detection forzato")},error:t=>{console.error("\u274C Errore caricamento ristoranti:",t),this.error="Errore nel caricamento dei ristoranti. Riprova pi\xF9 tardi.",this.loading=!1,this.cdr.detectChanges()}})}loadRestaurantPhotos(){console.log("\u{1F4F8} Caricamento foto ristoranti...");let t=this.restaurants.map(e=>this.photoService.getPhotosByRestaurant(e.id).pipe(nt(r=>({restaurantId:e.id,photos:r})),rt(r=>(console.warn(`\u26A0\uFE0F Errore caricamento foto per ristorante ${e.id}:`,r),tt({restaurantId:e.id,photos:[]})))));it(t).subscribe({next:e=>{console.log("\u2705 Foto caricate:",e),e.forEach(r=>{if(r.photos&&r.photos.length>0){let l=r.photos[0];this.restaurantPhotos[r.restaurantId]=this.uploadService.getImageUrl(l.fileName)}}),this.cdr.detectChanges(),console.log("\u{1F4F8} Foto integrate nelle card")},error:e=>{console.error("\u274C Errore caricamento foto:",e)}})}getRestaurantMainPhoto(t){return this.restaurantPhotos[t]||null}isPhotoLoading(t){return this.photoLoadingStates[t]||!1}searchRestaurants(){console.log("\u{1F50D} Ricerca con filtri:",this.searchFilters),this.filteredRestaurants=this.restaurants.filter(t=>{let e=!this.searchFilters.city||t.city?.toLowerCase().includes(this.searchFilters.city.toLowerCase()),r=!this.searchFilters.cuisine||t.cuisineType?.toLowerCase().includes(this.searchFilters.cuisine.toLowerCase());return e&&r}),setTimeout(()=>{let t=document.getElementById("restaurantsGrid");t&&t.scrollIntoView({behavior:"smooth",block:"start"})},100)}filterByCuisine(t){console.log("\u{1F37D}\uFE0F Filtro per cucina:",t),this.searchFilters.cuisine=t,this.searchRestaurants()}toggleFilter(t){switch(console.log("\u{1F527} Toggle filtro:",t.name),this.quickFilters.forEach(e=>e.active=!1),t.active=!0,t.name){case"Tutti":this.filteredRestaurants=[...this.restaurants],this.resetSearchFilters();break;case"Aperti":this.filteredRestaurants=this.restaurants.filter(e=>e.available===!0);break;case"Migliori Recensioni":this.filteredRestaurants=this.restaurants.filter(e=>(e.rating||0)>=4).sort((e,r)=>(r.rating||0)-(e.rating||0));break;case"Nuovi":this.filteredRestaurants=[...this.restaurants].sort(()=>Math.random()-.5).slice(0,Math.min(6,this.restaurants.length));break;case"Premium":this.filteredRestaurants=this.restaurants.filter(e=>(e.rating||0)>=4.2).sort((e,r)=>(r.rating||0)-(e.rating||0));break}setTimeout(()=>{let e=document.getElementById("restaurantsGrid");e&&e.scrollIntoView({behavior:"smooth",block:"start"})},100)}resetSearchFilters(){this.searchFilters={city:"",cuisine:""}}getStars(t){if(!t||t===0)return"\u2B50";let e=Math.floor(t),r=t%1>=.5,l="\u2B50".repeat(e);return r&&e<5&&(l+="\u2B50"),l||"\u2B50"}viewRestaurant(t){console.log("\u{1F441}\uFE0F Visualizza ristorante:",t),this.router.navigate(["/restaurant",t])}onRestaurantCardClick(t,e){t.preventDefault(),console.log("\u{1F3AF} Card cliccata:",e),this.viewRestaurant(e.id)}onImageError(t,e){console.log("\u274C Errore caricamento immagine per ristorante:",e),delete this.restaurantPhotos[e],this.cdr.detectChanges()}refreshRestaurants(){console.log("\u{1F504} Refresh ristoranti..."),this.resetSearchFilters(),this.resetFilters(),this.loadRestaurants()}resetFilters(){this.quickFilters.forEach(t=>t.active=!1),this.quickFilters[0].active=!0}onSearchFocus(){console.log("\u{1F50D} Focus su ricerca")}onCategoryHover(t){console.log("\u{1F446} Hover su categoria:",t.name)}onScroll(t){}static \u0275fac=function(e){return new(e||o)(h(H),h(Me),h(Et),h(R),h(T),h(q))};static \u0275cmp=w({type:o,selectors:[["app-homepage"]],hostBindings:function(e,r){e&1&&f("keydown",function(m){return r.handleKeyboardNavigation(m)})},decls:83,vars:18,consts:[[1,"hero-section","text-white","text-center","py-5"],[1,"bubble","bubble-1"],[1,"bubble","bubble-2"],[1,"bubble","bubble-3"],[1,"bubble","bubble-4"],[1,"bubble","bubble-5"],[1,"bubble","bubble-6"],[1,"bubble","bubble-7"],[1,"bubble","bubble-8"],[1,"bubble","bubble-9"],[1,"bubble","bubble-10"],[1,"bubble","bubble-11"],[1,"container-xl","position-relative",2,"z-index","10"],[1,"row","justify-content-center"],[1,"col-lg-8"],[1,"display-3","fw-bold","mb-4","animate-on-load"],[1,"lead","fs-4","mb-5","animate-on-load"],[1,"search-section","py-4"],[1,"container-xl"],[1,"col-lg-10"],[1,"card","shadow-lg","border-0","rounded-4","search-card","animate-on-load",2,"margin-top","-3rem"],[1,"card-body","p-4"],[1,"search-form",3,"ngSubmit"],[1,"row","g-3"],[1,"col-md-6"],["for","city",1,"form-label","fw-semibold","search-label"],[1,"position-relative"],["type","text","id","city","name","city","placeholder","Scrivi la tua citt\xE0...","autocomplete","off",1,"form-control","form-control-lg","search-input",3,"ngModelChange","input","focus","blur","ngModel"],["class","search-dropdown position-absolute w-100 mt-1",4,"ngIf"],["for","cuisine",1,"form-label","fw-semibold","search-label"],["id","cuisine","name","cuisine",1,"form-select","form-select-lg","search-select",3,"ngModelChange","ngModel"],["value",""],["value","Italiana"],["value","Cinese"],["value","Pizza"],["value","Pesce"],["value","Pub&Steakhouse"],[1,"col-12"],["type","submit",1,"btn","btn-lg","w-100","fw-semibold","rounded-3","py-3","search-button"],[1,"categories-section","py-5"],[1,"row"],[1,"display-5","fw-bold","text-center","mb-5","section-title"],[1,"row","g-4","mb-5","justify-content-center"],["class","col-6 col-md-4 col-lg-2",4,"ngFor","ngForOf"],[1,"d-flex","flex-wrap","justify-content-center","gap-3"],[1,"filter-chip","badge","rounded-pill","px-4","py-2","fs-6","fw-medium",3,"click"],[1,"restaurants-section","py-5"],["class","row",4,"ngIf"],["class","row g-4","id","restaurantsGrid",4,"ngIf"],[1,"search-dropdown","position-absolute","w-100","mt-1"],["class","search-dropdown-item",3,"active","click",4,"ngFor","ngForOf"],[1,"search-dropdown-item",3,"click"],[1,"me-2"],[1,"col-6","col-md-4","col-lg-2"],[1,"category-item","text-center","p-3","rounded-4","h-100",3,"click"],[1,"category-icon","mx-auto","mb-3","rounded-circle","d-flex","align-items-center","justify-content-center","text-white"],[1,"category-name","fw-semibold"],[1,"text-center","py-5"],["role","status",1,"spinner-border","loading-spinner","mb-3"],[1,"visually-hidden"],[1,"fs-5","loading-text"],["role","alert",1,"alert","alert-danger","text-center","py-4","error-alert"],[1,"alert-heading"],[1,"mb-3"],[1,"btn","btn-outline-danger",3,"click"],[1,"text-center","py-5","no-results"],[1,"mb-4","fs-1"],[1,"text-muted","mb-4"],[1,"btn","btn-outline-primary","clear-filters-btn",3,"click"],["id","restaurantsGrid",1,"row","g-4"],["class","col-lg-4 col-md-6",4,"ngFor","ngForOf"],[1,"col-lg-4","col-md-6"],[1,"card","h-100","border-0","rounded-4","shadow-lg","restaurant-card",3,"click"],[1,"card-img-top","position-relative","restaurant-image-container"],["class","restaurant-image w-100 h-100 object-fit-cover rounded-top-4","loading","lazy",3,"src","alt","error",4,"ngIf"],["class","restaurant-image-placeholder d-flex align-items-center justify-content-center text-white fw-semibold fs-5 rounded-top-4",4,"ngIf"],[1,"position-absolute","top-0","end-0","m-3"],[1,"badge","rounded-pill","px-3","py-2","fw-semibold","rating-badge-overlay"],[1,"text-warning","me-1"],[1,"card-hover-overlay","position-absolute","top-0","start-0","w-100","h-100","d-flex","align-items-center","justify-content-center","rounded-4"],[1,"btn","btn-primary","btn-lg"],[1,"d-flex","justify-content-between","align-items-start","mb-3"],[1,"flex-grow-1"],[1,"card-title","fw-bold","restaurant-title","mb-1"],[1,"card-text","small","fw-semibold","mb-0","restaurant-cuisine"],[1,"me-1"],[1,"d-flex","align-items-center","mb-3","restaurant-location"],[1,"text-muted"],[1,"card-text","restaurant-description","small","mb-3","text-muted"],[1,"d-flex","justify-content-between","align-items-center","pt-3","border-top","restaurant-footer"],[1,"d-flex","flex-column"],[1,"text-warning","mb-1"],["loading","lazy",1,"restaurant-image","w-100","h-100","object-fit-cover","rounded-top-4",3,"error","src","alt"],[1,"restaurant-image-placeholder","d-flex","align-items-center","justify-content-center","text-white","fw-semibold","fs-5","rounded-top-4"],[1,"text-center"],[1,"fs-1","mb-2"],[1,"small"]],template:function(e,r){e&1&&(n(0,"section",0),g(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9)(10,"div",10)(11,"div",11),n(12,"div",12)(13,"div",13)(14,"div",14)(15,"h1",15),s(16," Prenota i migliori ristoranti d'Italia "),i(),n(17,"p",16),s(18," Scopri l'autentica cucina italiana, dalla pizza napoletana alla bistecca fiorentina. Prenota il tuo tavolo in pochi click. "),i()()()()(),n(19,"section",17)(20,"div",18)(21,"div",13)(22,"div",19)(23,"div",20)(24,"div",21)(25,"form",22),f("ngSubmit",function(){return r.searchRestaurants()}),n(26,"div",23)(27,"div",24)(28,"label",25),s(29,"\u{1F4CD} Dove?"),i(),n(30,"div",26)(31,"input",27),P("ngModelChange",function(m){return M(r.searchFilters.city,m)||(r.searchFilters.city=m),m}),f("input",function(m){return r.onCityInput(m)})("focus",function(){return r.onCityFocus()})("blur",function(){return r.onCityBlur()}),i(),v(32,Fn,2,1,"div",28),i()(),n(33,"div",24)(34,"label",29),s(35,"\u{1F35D} Che cucina?"),i(),n(36,"select",30),P("ngModelChange",function(m){return M(r.searchFilters.cuisine,m)||(r.searchFilters.cuisine=m),m}),n(37,"option",31),s(38,"Tutti i tipi"),i(),n(39,"option",32),s(40,"Italiana"),i(),n(41,"option",33),s(42,"Cinese"),i(),n(43,"option",34),s(44,"Pizza"),i(),n(45,"option",35),s(46,"Pesce"),i(),n(47,"option",36),s(48,"Pub&Steakhouse"),i()()(),n(49,"div",37)(50,"button",38),s(51," \u{1F50D} Trova Ristoranti "),i()()()()()()()()()(),n(52,"section",39)(53,"div",18)(54,"div",40)(55,"div",37)(56,"h2",41),s(57,"Esplora la Cucina Italiana"),i()()(),n(58,"div",42),v(59,Nn,6,2,"div",43),i(),n(60,"div",40)(61,"div",37)(62,"div",44)(63,"div",45),f("click",function(){return r.toggleFilter(r.quickFilters[0])}),s(64," Tutti "),i(),n(65,"div",45),f("click",function(){return r.toggleFilter(r.quickFilters[1])}),s(66," Aperti "),i(),n(67,"div",45),f("click",function(){return r.toggleFilter(r.quickFilters[2])}),s(68," Migliori Recensioni "),i(),n(69,"div",45),f("click",function(){return r.toggleFilter(r.quickFilters[3])}),s(70," Nuovi "),i(),n(71,"div",45),f("click",function(){return r.toggleFilter(r.quickFilters[4])}),s(72," Premium "),i()()()()()(),n(73,"section",46)(74,"div",18)(75,"div",40)(76,"div",37)(77,"h2",41),s(78,"Ristoranti Consigliati"),i()()(),v(79,An,8,0,"div",47)(80,Un,9,1,"div",47)(81,Bn,11,0,"div",47)(82,Yn,2,1,"div",48),i()()),e&2&&(a(31),y("ngModel",r.searchFilters.city),a(),c("ngIf",r.showCityDropdown&&r.filteredCities.length>0),a(4),y("ngModel",r.searchFilters.cuisine),a(23),c("ngForOf",r.categories),a(4),C("active",r.quickFilters[0].active),a(2),C("active",r.quickFilters[1].active),a(2),C("active",r.quickFilters[2].active),a(2),C("active",r.quickFilters[3].active),a(2),C("active",r.quickFilters[4].active),a(8),c("ngIf",r.loading),a(),c("ngIf",r.error&&!r.loading),a(),c("ngIf",!r.loading&&!r.error&&r.filteredRestaurants.length===0),a(),c("ngIf",!r.loading&&!r.error&&r.filteredRestaurants.length>0))},dependencies:[O,D,S,U,be,Q,K,F,$,N,ve,A,_e],styles:['[_nghost-%COMP%]{--primary-color: #00CDB5;--primary-light: #4de0c1;--primary-dark: #00a688;--primary-gradient: linear-gradient(135deg, #00CDB5 0%, #00a688 100%);--bg-color: #0f1419;--bg-secondary: #1a2332;--text-color: #ffffff;--text-light: #b8c5d1;--text-muted: #8a9ba8;--card-bg: #1e2936;--border-color: #2d3748;--shadow: 0 4px 20px rgba(0, 0, 0, .3);--shadow-hover: 0 8px 30px rgba(0, 0, 0, .4)}.light-theme[_nghost-%COMP%]{--bg-color: #ffffff;--bg-secondary: #f8fffe;--text-color: #333333;--text-light: #666666;--text-muted: #999999;--card-bg: #ffffff;--border-color: #e1f5f1;--shadow: 0 4px 20px rgba(0, 205, 181, .1);--shadow-hover: 0 8px 30px rgba(0, 205, 181, .2)}[_nghost-%COMP%], [_nghost-%COMP%]   *[_ngcontent-%COMP%]{font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,sans-serif}.hero-section[_ngcontent-%COMP%]{background:var(--primary-gradient)!important;min-height:70vh;display:flex;align-items:center;position:relative;overflow:hidden}.hero-section[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:#0000000d;z-index:1}.bubble[_ngcontent-%COMP%]{position:absolute;background:#ffffff4d;border-radius:50%;pointer-events:none;z-index:1}.bubble-1[_ngcontent-%COMP%]{width:20px;height:20px;top:20%;left:15%;animation:_ngcontent-%COMP%_float1 8s ease-in-out infinite}.bubble-2[_ngcontent-%COMP%]{width:15px;height:15px;top:60%;left:25%;animation:_ngcontent-%COMP%_float2 12s ease-in-out infinite 2s}.bubble-3[_ngcontent-%COMP%]{width:25px;height:25px;top:30%;right:20%;animation:_ngcontent-%COMP%_float3 10s ease-in-out infinite 1s}.bubble-4[_ngcontent-%COMP%]{width:12px;height:12px;top:70%;right:30%;animation:_ngcontent-%COMP%_float4 9s ease-in-out infinite 3s}.bubble-5[_ngcontent-%COMP%]{width:18px;height:18px;top:45%;left:50%;animation:_ngcontent-%COMP%_float5 11s ease-in-out infinite 1.5s}.bubble-6[_ngcontent-%COMP%]{width:22px;height:22px;top:15%;right:40%;animation:_ngcontent-%COMP%_float6 7s ease-in-out infinite .5s}.bubble-7[_ngcontent-%COMP%]{width:14px;height:14px;top:80%;left:40%;animation:_ngcontent-%COMP%_float7 13s ease-in-out infinite 2.5s}.bubble-8[_ngcontent-%COMP%]{width:16px;height:16px;top:25%;left:70%;animation:_ngcontent-%COMP%_float8 9.5s ease-in-out infinite 1.8s}.search-section[_ngcontent-%COMP%]{background:transparent}.search-card[_ngcontent-%COMP%]{background:var(--card-bg)!important;border:1px solid var(--border-color)!important;box-shadow:var(--shadow-hover)!important}.search-select[_ngcontent-%COMP%]{background-color:var(--bg-color)!important;color:var(--text-color)!important;border-color:var(--border-color)!important;transition:all .3s ease}.search-select[_ngcontent-%COMP%]:focus{border-color:var(--primary-color)!important;box-shadow:0 0 0 .2rem #00cdb540!important;background-color:var(--bg-color)!important;color:var(--text-color)!important}.search-select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{background-color:var(--bg-color)!important;color:var(--text-color)!important}.search-button[_ngcontent-%COMP%]{background:var(--primary-gradient)!important;border:none!important;color:#fff!important;transition:all .3s ease}.search-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--shadow-hover)}.category-item[_ngcontent-%COMP%]{cursor:pointer;transition:all .3s ease;border-radius:1rem!important}.category-item[_ngcontent-%COMP%]:hover{transform:translateY(-8px);background-color:var(--bg-secondary)!important}.category-icon[_ngcontent-%COMP%]{width:80px;height:80px;background:var(--primary-gradient)!important;font-size:2rem;box-shadow:var(--shadow);transition:all .3s ease}.filter-chip[_ngcontent-%COMP%]{background:var(--bg-secondary)!important;color:var(--text-color)!important;border:2px solid var(--border-color)!important;cursor:pointer;transition:all .3s ease}.filter-chip[_ngcontent-%COMP%]:hover, .filter-chip.active[_ngcontent-%COMP%]{background:var(--primary-color)!important;color:#fff!important;border-color:var(--primary-color)!important;transform:translateY(-2px)}.restaurant-card[_ngcontent-%COMP%]{background:var(--card-bg)!important;border:1px solid var(--border-color)!important;cursor:pointer;transition:all .3s ease}.restaurant-image[_ngcontent-%COMP%]{height:200px;background:var(--primary-gradient)!important}.restaurant-title[_ngcontent-%COMP%]{color:var(--text-color)!important}.restaurant-cuisine[_ngcontent-%COMP%]{color:var(--primary-color)!important}.restaurant-location[_ngcontent-%COMP%]{color:var(--text-light)!important}.restaurant-description[_ngcontent-%COMP%]{color:var(--text-light)!important;line-height:1.5}.restaurant-footer[_ngcontent-%COMP%]{border-color:var(--border-color)!important}.rating-badge[_ngcontent-%COMP%]{background:var(--primary-color)!important;color:#fff!important}.availability-badge.bg-success[_ngcontent-%COMP%]{background-color:#28a745cc!important}.availability-badge.bg-danger[_ngcontent-%COMP%]{background-color:#dc3545cc!important}.loading-spinner[_ngcontent-%COMP%]{color:var(--primary-color)!important;width:3rem;height:3rem}.loading-text[_ngcontent-%COMP%]{color:var(--text-light)!important}.error-alert[_ngcontent-%COMP%]{background-color:#dc35451a!important;border-color:#dc354533!important;color:#dc3545!important}.no-results[_ngcontent-%COMP%]{color:var(--text-light)!important}.no-results[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--text-color)!important}.clear-filters-btn[_ngcontent-%COMP%]{border-color:var(--primary-color)!important;color:var(--primary-color)!important}.clear-filters-btn[_ngcontent-%COMP%]:hover{background-color:var(--primary-color)!important;color:#fff!important}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.animate-on-load[_ngcontent-%COMP%]{opacity:0;transform:translateY(30px)}.animate__animated[_ngcontent-%COMP%]{animation-duration:.8s;animation-fill-mode:both}.animate__fadeInUp[_ngcontent-%COMP%]{animation-name:_ngcontent-%COMP%_fadeInUp;opacity:1;transform:translateY(0)}.animate__delay-1s[_ngcontent-%COMP%]{animation-delay:.2s}.animate__delay-2s[_ngcontent-%COMP%]{animation-delay:.4s}@keyframes _ngcontent-%COMP%_float1{0%,to{transform:translateY(0) scale(1);opacity:.3}50%{transform:translateY(-20px) scale(1.1);opacity:.6}}@keyframes _ngcontent-%COMP%_float2{0%,to{transform:translateY(0) translate(0);opacity:.25}25%{transform:translateY(-25px) translate(5px);opacity:.5}75%{transform:translateY(-35px) translate(-8px);opacity:.4}}@keyframes _ngcontent-%COMP%_float3{0%,to{transform:translateY(0) rotate(0);opacity:.35}33%{transform:translateY(-40px) rotate(120deg);opacity:.9}66%{transform:translateY(-10px) rotate(240deg);opacity:.5}}@keyframes _ngcontent-%COMP%_float4{0%,to{transform:translateY(0) scale(1);opacity:.2}40%{transform:translateY(-18px) scale(1.3);opacity:.6}80%{transform:translateY(-8px) scale(.9);opacity:.4}}@keyframes _ngcontent-%COMP%_float5{0%,to{transform:translateY(0) translate(10px);opacity:.3}50%{transform:translateY(-22px) translate(20px);opacity:.65}}@keyframes _ngcontent-%COMP%_float6{0%,to{transform:translateY(0) rotate(0) scale(1);opacity:.4}25%{transform:translateY(-12px) rotate(90deg) scale(1.2);opacity:.7}75%{transform:translateY(-18px) rotate(270deg) scale(.8);opacity:.5}}@keyframes _ngcontent-%COMP%_float7{0%,to{transform:translateY(0);opacity:.25}60%{transform:translateY(-16px);opacity:.55}}@keyframes _ngcontent-%COMP%_float8{0%,to{transform:translateY(0) translate(0) scale(1);opacity:.3}30%{transform:translateY(-14px) translate(-6px) scale(1.1);opacity:.6}70%{transform:translateY(-20px) translate(4px) scale(.9);opacity:.45}}@keyframes _ngcontent-%COMP%_float9{0%,to{transform:translateY(10px) rotate(0);opacity:.55}33%{transform:translateY(-30px) rotate(120deg);opacity:.9}66%{transform:translateY(0) rotate(240deg);opacity:.8}}@keyframes _ngcontent-%COMP%_float10{0%,to{transform:translateY(0) scale(1);opacity:.4}40%{transform:translateY(-28px) scale(1.3);opacity:.9}80%{transform:translateY(-8px) scale(.9);opacity:.4}}@keyframes _ngcontent-%COMP%_float11{0%,to{transform:translateY(0) rotate(0) scale(1);opacity:.4}25%{transform:translateY(12px) rotate(90deg) scale(1.2);opacity:1}75%{transform:translateY(-18px) rotate(270deg) scale(.8);opacity:1}}@media (max-width: 768px){.hero-section[_ngcontent-%COMP%]{min-height:60vh;padding:3rem 1rem!important}.display-3[_ngcontent-%COMP%]{font-size:2.5rem!important}.display-5[_ngcontent-%COMP%]{font-size:2rem!important}.search-card[_ngcontent-%COMP%]{margin-top:-2rem!important}.category-icon[_ngcontent-%COMP%]{width:60px!important;height:60px!important;font-size:1.5rem!important}}@media (max-width: 576px){.filter-chip[_ngcontent-%COMP%]{font-size:.8rem!important;padding:.5rem 1rem!important}.restaurant-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:1rem!important}.hero-section[_ngcontent-%COMP%]{min-height:50vh}}@media (hover: hover){.category-item[_ngcontent-%COMP%]:hover{transform:translateY(-8px);background-color:var(--bg-secondary)}.filter-chip[_ngcontent-%COMP%]:hover{transform:translateY(-2px);background-color:var(--primary-color)!important;border-color:var(--primary-color)!important;color:#fff!important}.restaurant-card[_ngcontent-%COMP%]:hover{transform:translateY(-10px)}}.text-warning[_ngcontent-%COMP%]{color:gold!important}*[_ngcontent-%COMP%]{transition:background-color .3s ease,color .3s ease,border-color .3s ease}.restaurant-image-container[_ngcontent-%COMP%]{height:280px!important;overflow:hidden;position:relative}.restaurant-image[_ngcontent-%COMP%]{transition:transform .3s ease;object-fit:cover;height:100%;width:100%}.restaurant-image-placeholder[_ngcontent-%COMP%]{height:280px!important;background:var(--primary-gradient)!important;color:#fff;display:flex;align-items:center;justify-content:center;text-align:center}.rating-badge-overlay[_ngcontent-%COMP%]{background:#fffffff2!important;color:var(--text-color)!important;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2);box-shadow:var(--shadow)}.card-hover-overlay[_ngcontent-%COMP%]{background:#00cdb5e6;opacity:0;transition:opacity .3s ease;z-index:10}.card-hover-overlay[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{background:#ffffff1a;border:2px solid rgba(255,255,255,.3);color:#fff;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.card-hover-overlay[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{background:#fff3;border-color:#ffffff80}.restaurant-card[_ngcontent-%COMP%]:hover{transform:translateY(-10px);box-shadow:var(--shadow-hover)!important}.restaurant-card[_ngcontent-%COMP%]:hover   .card-hover-overlay[_ngcontent-%COMP%]{opacity:1}.restaurant-card[_ngcontent-%COMP%]:hover   .restaurant-image[_ngcontent-%COMP%]{transform:scale(1.05)}.restaurant-card[_ngcontent-%COMP%]{min-height:500px}@keyframes _ngcontent-%COMP%_fadeInImage{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}.restaurant-image[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInImage .3s ease-out}@media (max-width: 768px){.restaurant-image-container[_ngcontent-%COMP%], .restaurant-image-placeholder[_ngcontent-%COMP%]{height:220px!important}.restaurant-card[_ngcontent-%COMP%]{min-height:420px}.card-hover-overlay[_ngcontent-%COMP%]{display:none}}@media (max-width: 576px){.restaurant-image-container[_ngcontent-%COMP%], .restaurant-image-placeholder[_ngcontent-%COMP%]{height:180px!important}.restaurant-card[_ngcontent-%COMP%]{min-height:380px}}.search-input[_ngcontent-%COMP%]{background-color:var(--bg-color)!important;color:var(--text-color)!important;border-color:var(--border-color)!important;transition:all .3s ease}.search-input[_ngcontent-%COMP%]:focus{border-color:var(--primary-color)!important;box-shadow:0 0 0 .2rem #00cdb540!important;background-color:var(--bg-color)!important;color:var(--text-color)!important}.search-input[_ngcontent-%COMP%]::placeholder{color:var(--text-muted)!important;opacity:.8}.search-dropdown[_ngcontent-%COMP%]{background:var(--card-bg)!important;border:1px solid var(--border-color)!important;border-radius:.5rem!important;box-shadow:var(--shadow-hover)!important;z-index:1000;max-height:300px;overflow-y:auto;animation:_ngcontent-%COMP%_fadeInDown .2s ease-out}.search-dropdown[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.search-dropdown[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--bg-secondary);border-radius:3px}.search-dropdown[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--primary-color);border-radius:3px}.search-dropdown[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--primary-dark)}.search-dropdown-item[_ngcontent-%COMP%]{padding:12px 16px;color:var(--text-color)!important;cursor:pointer;transition:all .2s ease;border-bottom:1px solid var(--border-color);display:flex;align-items:center}.search-dropdown-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.search-dropdown-item[_ngcontent-%COMP%]:hover, .search-dropdown-item.active[_ngcontent-%COMP%]{background-color:var(--primary-color)!important;color:#fff!important}.search-dropdown-item[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%], .search-dropdown-item.active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff!important}@keyframes _ngcontent-%COMP%_fadeInDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 768px){.search-dropdown[_ngcontent-%COMP%]{max-height:200px;font-size:.9rem}.search-dropdown-item[_ngcontent-%COMP%]{padding:10px 12px}}.search-dropdown-loading[_ngcontent-%COMP%]{padding:12px 16px;text-align:center;color:var(--text-muted)!important;font-style:italic}.search-highlight[_ngcontent-%COMP%]{background-color:var(--primary-color)!important;color:#fff!important;padding:0 2px;border-radius:2px}.search-dropdown-item[_ngcontent-%COMP%]:focus{outline:2px solid var(--primary-color);outline-offset:-2px}.light-theme[_nghost-%COMP%]   .search-dropdown-item[_ngcontent-%COMP%]{color:#333!important}.light-theme[_nghost-%COMP%]   .search-dropdown-item[_ngcontent-%COMP%]:hover, .light-theme[_nghost-%COMP%]   .search-dropdown-item.active[_ngcontent-%COMP%]{background-color:var(--primary-color)!important;color:#fff!important}']})};function Wn(o,t){if(o&1){let e=b();n(0,"div",36),f("click",function(){let l=p(e).$implicit,m=d();return u(m.selectDay(l))}),n(1,"div",37)(2,"div",38),s(3),i(),n(4,"div",39),s(5),i()()()}if(o&2){let e=t.$implicit,r=d();C("today",e.isToday)("tomorrow",e.isTomorrow)("past",r.isPastDay(e.date))("selected",(r.selectedDay==null||r.selectedDay.date==null?null:r.selectedDay.date.toDateString())===e.date.toDateString()),a(3),_(e.dayName),a(2),j("",e.date.getDate(),"/",e.date.getMonth()+1)}}function Gn(o,t){o&1&&(n(0,"div",40)(1,"div",41)(2,"span",42),s(3,"Caricamento..."),i()()())}function qn(o,t){if(o&1&&(n(0,"div",57)(1,"a",58),g(2,"i",59),s(3),i()()),o&2){let e=d(2).$implicit;a(),c("href",dt("tel:",e.customerPhone),B),a(2),x(" ",e.customerPhone," ")}}function $n(o,t){if(o&1&&(n(0,"div",60),g(1,"i",61),n(2,"span"),s(3),i()()),o&2){let e=d(2).$implicit;a(3),_(e.notes)}}function Qn(o,t){if(o&1&&(n(0,"div",54),v(1,qn,4,3,"div",55)(2,$n,4,1,"div",56),i()),o&2){let e=d().$implicit;a(),c("ngIf",e.customerPhone),a(),c("ngIf",e.notes)}}function Kn(o,t){if(o&1&&(n(0,"div",45)(1,"div",46)(2,"div",47)(3,"h5",48),s(4),i(),n(5,"div",49),g(6,"i",50),s(7),i()(),n(8,"div",51),g(9,"i",52),n(10,"span"),s(11),i()()(),v(12,Qn,3,2,"div",53),i()),o&2){let e=t.$implicit,r=d(2);a(4),_(e.customerName),a(3),x(" ",r.formatTime(e.reservationTime)," "),a(4),_(e.numberOfPeople),a(),c("ngIf",e.notes||e.customerPhone)}}function Jn(o,t){if(o&1&&(n(0,"div",43),v(1,Kn,13,4,"div",44),i()),o&2){let e=d();a(),c("ngForOf",e.selectedDayReservations)}}function Zn(o,t){o&1&&(n(0,"div",62)(1,"div",40),g(2,"i",63),n(3,"h5",64),s(4,"Nessuna prenotazione"),i(),n(5,"p",65),s(6,"Non ci sono prenotazioni per questo giorno"),i()()())}function Xn(o,t){if(o&1&&(n(0,"div",66),g(1,"i",67),s(2),i()),o&2){let e=d();a(2),x(" ",e.error," ")}}var Te=class o{constructor(t,e,r,l,m){this.reservationService=t;this.restaurantService=e;this.reviewService=r;this.authService=l;this.cdr=m}todayReservations=0;averageRating=0;totalReviews=0;monthReservations=0;monthTrend=0;todayReservationsList=[];selectedDayReservations=[];selectedDay=null;next7Days=[];currentWeekStart=new Date;weekOffset=0;currentRestaurantId=0;loading=!0;error=null;ngOnInit(){this.loadUserRestaurant()}loadUserRestaurant(){let t=this.authService.currentUser();if(!t||!this.authService.isBusiness()){this.error="Errore: utente non autorizzato",this.loading=!1;return}let e=t.userId;console.log("\u{1F464} Business ID dell'utente loggato:",e),this.restaurantService.getRestaurantByBusinessId(e).subscribe({next:r=>{this.currentRestaurantId=r.id,console.log("\u{1F3EA} Restaurant ID ottenuto dinamicamente:",this.currentRestaurantId),console.log("\u{1F3EA} Ristorante:",r.name),this.loadDashboardData()},error:r=>{this.error="Errore: ristorante non trovato per questo utente business",this.loading=!1,this.cdr.detectChanges(),console.error("\u274C Errore caricamento ristorante per business ID",e,":",r)}})}loadDashboardData(){if(this.currentRestaurantId===0){this.error="Errore: ristorante non trovato",this.loading=!1;return}this.loading=!0,this.error=null,this.loadTodayReservations(),this.loadReservationStats(),this.loadReviewStats()}loadTodayReservations(){this.reservationService.getTodayReservations(this.currentRestaurantId).subscribe({next:t=>{this.todayReservationsList=t,this.todayReservations=t.length,this.selectedDayReservations=t,this.generateNext7Days(),this.loading=!1,this.cdr.detectChanges(),console.log("\u2705 Prenotazioni di oggi caricate:",t.length)},error:t=>{this.error="Errore nel caricamento delle prenotazioni di oggi",this.loading=!1,this.cdr.detectChanges(),console.error("\u274C Errore prenotazioni oggi:",t)}})}loadReservationStats(){this.reservationService.getReservationStats(this.currentRestaurantId).subscribe({next:t=>{this.monthReservations=t.totalReservations,this.cdr.detectChanges(),console.log("\u{1F4CA} Statistiche prenotazioni caricate:",t)},error:t=>{console.error("\u274C Errore statistiche prenotazioni:",t)}})}loadReviewStats(){console.log("\u2B50 Caricamento statistiche review per ristorante:",this.currentRestaurantId),this.reviewService.getRestaurantReviewStats(this.currentRestaurantId).subscribe({next:t=>{this.averageRating=t.averageGeneral||0,this.totalReviews=t.totalReviews||0,this.cdr.detectChanges(),console.log("\u2705 Statistiche review caricate:",{averageRating:this.averageRating,totalReviews:this.totalReviews,stats:t})},error:t=>{console.error("\u274C Errore statistiche reviews:",t),this.averageRating=0,this.totalReviews=0,this.cdr.detectChanges()}}),this.reviewService.getReviewCountByRestaurant(this.currentRestaurantId).subscribe({next:t=>{this.totalReviews===0&&(this.totalReviews=t,this.cdr.detectChanges()),console.log("\u{1F4CA} Conteggio review backup:",t)},error:t=>{console.error("\u274C Errore conteggio reviews:",t)}})}generateNext7Days(){this.next7Days=[];let t=new Date,e=new Date(t);e.setDate(t.getDate()+this.weekOffset*7),this.currentWeekStart=e;for(let r=0;r<7;r++){let l=new Date(e);l.setDate(e.getDate()+r);let m={date:l,dayName:this.getDayName(l,t),isToday:this.isSameDay(l,t),isTomorrow:this.isSameDay(l,new Date(t.getTime()+24*60*60*1e3))};this.next7Days.push(m)}(!this.selectedDay||!this.isDateInCurrentWeek(this.selectedDay.date))&&(this.selectedDay=this.next7Days[0],this.loadReservationsForDay(this.selectedDay))}previousWeek(){this.weekOffset--,this.generateNext7Days(),this.cdr.detectChanges(),console.log("\u{1F4C5} Settimana precedente:",this.getCurrentPeriodText())}nextWeek(){this.weekOffset++,this.generateNext7Days(),this.cdr.detectChanges(),console.log("\u{1F4C5} Settimana successiva:",this.getCurrentPeriodText())}goToCurrentWeek(){this.weekOffset=0,this.generateNext7Days()}getCurrentPeriodText(){return this.weekOffset===0?"Questa Settimana":this.weekOffset===-1?"Settimana Scorsa":this.weekOffset===1?"Prossima Settimana":this.weekOffset<0?`${Math.abs(this.weekOffset)} settimane fa`:`Tra ${this.weekOffset} settimane`}getDayName(t,e){if(this.isSameDay(t,e))return"Oggi";let r=new Date(e.getTime()+24*60*60*1e3);if(this.isSameDay(t,r))return"Domani";let l=new Date(e.getTime()-24*60*60*1e3);return this.isSameDay(t,l)?"Ieri":["Dom","Lun","Mar","Mer","Gio","Ven","Sab"][t.getDay()]}isSameDay(t,e){return t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()}isPastDay(t){let e=new Date;e.setHours(0,0,0,0);let r=new Date(t);return r.setHours(0,0,0,0),r<e}isDateInCurrentWeek(t){return this.next7Days.some(e=>this.isSameDay(e.date,t))}getStars(t){if(t===0)return"\u2606\u2606\u2606\u2606\u2606";let e=t/2,r=Math.floor(e),l=e%1>=.5,m="\u2B50".repeat(r);l&&r<5&&(m+="\u2728");let V=5-Math.ceil(e);return m+="\u2606".repeat(Math.max(0,V)),m}getOccupancyClass(t){return t>=20?"occupancy-high":t>=10?"occupancy-medium":t>=5?"occupancy-low":"occupancy-none"}callCustomer(t){t&&window.open(`tel:${t}`,"_self")}refreshData(){this.loadDashboardData()}formatTime(t){return this.reservationService.formatTime(t)}selectDay(t){this.selectedDay=t,this.loadReservationsForDay(t),console.log("\u{1F4C5} Giorno selezionato:",t.dayName,t.date.toDateString())}loadReservationsForDay(t){let e=new Date;if(this.isSameDay(t.date,e))this.selectedDayReservations=this.todayReservationsList,this.cdr.detectChanges(),console.log(`\u{1F4C5} Prenotazioni per ${t.dayName}: ${this.selectedDayReservations.length} (cache)`);else{let r=t.date.toISOString().split("T")[0];this.reservationService.getReservationsByDate(this.currentRestaurantId,r).subscribe({next:l=>{this.selectedDayReservations=l,this.cdr.detectChanges(),console.log(`\u{1F4C5} Prenotazioni per ${t.dayName}: ${l.length}`)},error:l=>{console.error(`\u274C Errore prenotazioni per ${t.dayName}:`,l),this.selectedDayReservations=[],this.cdr.detectChanges()}})}}getSelectedDayTitle(){if(!this.selectedDay)return"Oggi";let t=new Date;if(this.isSameDay(this.selectedDay.date,t))return"Oggi";let e=new Date(t.getTime()+24*60*60*1e3);if(this.isSameDay(this.selectedDay.date,e))return"Domani";let r=new Date(t.getTime()-24*60*60*1e3);return this.isSameDay(this.selectedDay.date,r)?"Ieri":this.selectedDay.dayName+" "+this.selectedDay.date.getDate()+"/"+(this.selectedDay.date.getMonth()+1)}getSelectedDaySubtitle(){if(!this.selectedDay)return"";let t=this.selectedDay.date,e={weekday:"long",year:"numeric",month:"long",day:"numeric"};return t.toLocaleDateString("it-IT",e)}static \u0275fac=function(e){return new(e||o)(h(J),h(H),h(ye),h(I),h(T))};static \u0275cmp=w({type:o,selectors:[["app-dashboard-overview"]],decls:66,vars:18,consts:[[1,"dashboard-overview"],[1,"metrics-section","mb-5"],[1,"row","g-4"],[1,"col-lg-4","col-md-6"],[1,"metric-card","today-card"],[1,"metric-icon"],[1,"fas","fa-calendar-day"],[1,"metric-content"],[1,"metric-value"],[1,"metric-label"],[1,"metric-card","rating-card"],[1,"fas","fa-star"],[1,"metric-card","month-card"],[1,"fas","fa-chart-line"],[1,"calendar-section","mb-5"],[1,"col-lg-8"],[1,"section-card"],[1,"section-header"],[1,"section-title"],[1,"calendar-navigation"],[1,"nav-btn","prev-btn",3,"click","disabled"],[1,"fas","fa-chevron-left"],[1,"current-period"],[1,"nav-btn","next-btn",3,"click","disabled"],[1,"fas","fa-chevron-right"],[1,"calendar-grid"],["class","calendar-day",3,"today","tomorrow","past","selected","click",4,"ngFor","ngForOf"],[1,"col-lg-4"],[1,"d-flex","justify-content-between","align-items-center"],[1,"section-title","mb-0"],[1,"badge","bg-primary","rounded-pill","px-3","py-2","fs-6"],[1,"section-subtitle","mb-0","mt-2"],["class","text-center py-4",4,"ngIf"],["class","reservations-list",4,"ngIf"],["class","no-reservations",4,"ngIf"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"calendar-day",3,"click"],[1,"day-header"],[1,"day-name"],[1,"day-date"],[1,"text-center","py-4"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"reservations-list"],["class","reservation-item",4,"ngFor","ngForOf"],[1,"reservation-item"],[1,"reservation-header"],[1,"customer-info"],[1,"customer-name"],[1,"reservation-time"],[1,"far","fa-clock"],[1,"people-count"],[1,"fas","fa-users"],["class","reservation-details",4,"ngIf"],[1,"reservation-details"],["class","phone-contact",4,"ngIf"],["class","notes",4,"ngIf"],[1,"phone-contact"],[1,"phone-link",3,"href"],[1,"fas","fa-phone"],[1,"notes"],[1,"fas","fa-sticky-note"],[1,"no-reservations"],[1,"fas","fa-calendar-times","fa-3x","text-muted","mb-3"],[1,"text-muted"],[1,"text-muted","mb-0"],["role","alert",1,"alert","alert-danger"],[1,"fas","fa-exclamation-triangle"]],template:function(e,r){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),g(6,"i",6),i(),n(7,"div",7)(8,"h3",8),s(9),i(),n(10,"p",9),s(11,"Prenotazioni Oggi"),i()()()(),n(12,"div",3)(13,"div",10)(14,"div",5),g(15,"i",11),i(),n(16,"div",7)(17,"h3",8),s(18),oe(19,"number"),i(),n(20,"p",9),s(21,"Rating Medio"),i()()()(),n(22,"div",3)(23,"div",12)(24,"div",5),g(25,"i",13),i(),n(26,"div",7)(27,"h3",8),s(28),i(),n(29,"p",9),s(30,"Totale Questo Mese"),i()()()()()(),n(31,"div",14)(32,"div",2)(33,"div",15)(34,"div",16)(35,"div",17)(36,"h3",18),s(37,"\u{1F4C5} Calendario Prenotazioni"),i(),n(38,"div",19)(39,"button",20),f("click",function(){return r.previousWeek()}),g(40,"i",21),n(41,"span"),s(42,"Settimana Prec."),i()(),n(43,"div",22)(44,"span"),s(45),i()(),n(46,"button",23),f("click",function(){return r.nextWeek()}),n(47,"span"),s(48,"Settimana Succ."),i(),g(49,"i",24),i()()(),n(50,"div",25),v(51,Wn,6,11,"div",26),i()()(),n(52,"div",27)(53,"div",16)(54,"div",17)(55,"div",28)(56,"h3",29),s(57),i(),n(58,"div",30),s(59),i()(),n(60,"p",31),s(61),i()(),v(62,Gn,4,0,"div",32)(63,Jn,2,1,"div",33)(64,Zn,7,0,"div",34),i()()()(),v(65,Xn,3,1,"div",35),i()),e&2&&(a(9),_(r.todayReservations),a(9),_(ae(19,15,r.averageRating,"1.1-1")),a(10),_(r.monthReservations),a(11),c("disabled",r.loading),a(6),_(r.getCurrentPeriodText()),a(),c("disabled",r.loading),a(5),c("ngForOf",r.next7Days),a(6),x("\u{1F37D}\uFE0F Prenotazioni ",r.getSelectedDayTitle()),a(2),j(" ",r.selectedDayReservations.length," ",r.selectedDayReservations.length===1?"prenotazione":"prenotazioni"," "),a(2),_(r.getSelectedDaySubtitle()),a(),c("ngIf",r.loading),a(),c("ngIf",!r.loading&&r.selectedDayReservations.length>0),a(),c("ngIf",!r.loading&&r.selectedDayReservations.length===0),a(),c("ngIf",r.error))},dependencies:[O,D,S,ft],styles:[".dashboard-overview[_ngcontent-%COMP%]{padding:1rem;color:var(--text-color)}.metrics-section[_ngcontent-%COMP%]{margin-bottom:2rem}.metric-card[_ngcontent-%COMP%]{background:var(--card-bg);border:1px solid var(--border-color);border-radius:1rem;padding:1.5rem;display:flex;align-items:center;gap:1rem;box-shadow:var(--shadow);transition:all .3s ease;height:100%}.metric-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:var(--shadow-hover)}.card-icon[_ngcontent-%COMP%]{font-size:2.5rem;flex-shrink:0}.card-content[_ngcontent-%COMP%]{flex:1}.metric-value[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;color:var(--primary-color);line-height:1;margin-bottom:.25rem}.metric-label[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:var(--text-color);margin-bottom:.5rem}.metric-detail[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem;font-size:.85rem}.metric-detail[_ngcontent-%COMP%]   .confirmed[_ngcontent-%COMP%]{color:#28a745}.metric-detail[_ngcontent-%COMP%]   .pending[_ngcontent-%COMP%]{color:#ffc107}.metric-detail[_ngcontent-%COMP%]   .stars[_ngcontent-%COMP%]{color:gold;font-size:1rem}.metric-detail[_ngcontent-%COMP%]   .reviews[_ngcontent-%COMP%]{color:var(--text-light)}.metric-detail[_ngcontent-%COMP%]   .trend.positive[_ngcontent-%COMP%]{color:#28a745;font-weight:600}.today-card[_ngcontent-%COMP%]{border-left:4px solid var(--primary-color)}.rating-card[_ngcontent-%COMP%]{border-left:4px solid #ffd700}.month-card[_ngcontent-%COMP%]{border-left:4px solid #28a745}.section-card[_ngcontent-%COMP%]{background:var(--card-bg);border:1px solid var(--border-color);border-radius:1rem;padding:1.5rem;box-shadow:var(--shadow);height:100%}.section-header[_ngcontent-%COMP%]{margin-bottom:1.5rem;text-align:center}.section-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:var(--text-color);margin-bottom:.25rem}.section-subtitle[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-light);margin:0}.calendar-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);gap:.75rem;overflow-x:scroll}.calendar-day[_ngcontent-%COMP%]{background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:.75rem;padding:2rem;margin-top:1rem;margin-bottom:1rem;min-width:5rem;text-align:center;position:relative;transition:all .3s ease;cursor:pointer}.calendar-day[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--shadow)}.calendar-day.today[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff;border-color:var(--primary-color)}.day-header[_ngcontent-%COMP%]{margin-bottom:.75rem}.day-name[_ngcontent-%COMP%]{font-size:.8rem;font-weight:600;margin-bottom:.25rem}.day-date[_ngcontent-%COMP%]{font-size:.75rem;opacity:.8}.day-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.reservations-count[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;margin-bottom:.25rem}.reservations-label[_ngcontent-%COMP%]{font-size:.7rem;opacity:.8}.day-indicator[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;font-size:1rem}.occupancy-high[_ngcontent-%COMP%]{color:#dc3545}.occupancy-medium[_ngcontent-%COMP%]{color:#ffc107}.occupancy-low[_ngcontent-%COMP%]{color:#28a745}.occupancy-none[_ngcontent-%COMP%]{color:var(--text-muted)}.reservations-list[_ngcontent-%COMP%]{max-height:400px;overflow-y:auto}.reservation-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1rem;margin-bottom:.75rem;background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:.75rem;transition:all .3s ease}.reservation-item[_ngcontent-%COMP%]:hover{transform:translate(4px);box-shadow:var(--shadow)}.reservation-time[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;color:var(--primary-color);min-width:50px}.reservation-details[_ngcontent-%COMP%]{flex:1}.customer-name[_ngcontent-%COMP%]{font-weight:600;color:var(--text-color);margin-bottom:.25rem}.reservation-info[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-light)}.reservation-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;gap:.5rem}.status-badge[_ngcontent-%COMP%]{padding:.25rem .75rem;border-radius:1rem;font-size:.75rem;font-weight:600;text-transform:uppercase}.status-confirmed[_ngcontent-%COMP%]{background:#28a74533;color:#28a745}.status-pending[_ngcontent-%COMP%]{background:#ffc10733;color:#ffc107}.status-completed[_ngcontent-%COMP%]{background:#6c757d33;color:#6c757d}.status-cancelled[_ngcontent-%COMP%]{background:#dc354533;color:#dc3545}.btn-call[_ngcontent-%COMP%]{background:var(--primary-color);border:none;border-radius:50%;width:35px;height:35px;display:flex;align-items:center;justify-content:center;color:#fff;cursor:pointer;transition:all .3s ease}.btn-call[_ngcontent-%COMP%]:hover{background:var(--primary-dark);transform:scale(1.1)}.quick-actions-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem}.quick-action-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:1rem 1.5rem;border:none;border-radius:.75rem;background:var(--bg-secondary);border:1px solid var(--border-color);color:var(--text-color);cursor:pointer;transition:all .3s ease;text-align:left}.quick-action-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--shadow)}.quick-action-btn.primary[_ngcontent-%COMP%]:hover{background:var(--primary-color);color:#fff}.quick-action-btn.secondary[_ngcontent-%COMP%]:hover{background:#6f42c1;color:#fff}.quick-action-btn.tertiary[_ngcontent-%COMP%]:hover{background:#fd7e14;color:#fff}.quick-action-btn.quaternary[_ngcontent-%COMP%]:hover{background:#6c757d;color:#fff}.action-icon[_ngcontent-%COMP%]{font-size:1.5rem}.action-text[_ngcontent-%COMP%]{font-weight:600;font-size:.95rem}@media (max-width: 768px){.dashboard-overview[_ngcontent-%COMP%]{padding:.5rem}.metric-card[_ngcontent-%COMP%]{padding:1rem}.metric-value[_ngcontent-%COMP%]{font-size:2rem}.calendar-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(7,1fr);gap:.5rem}.calendar-day[_ngcontent-%COMP%]{padding:.75rem .25rem}.reservations-count[_ngcontent-%COMP%]{font-size:1.2rem}.reservation-item[_ngcontent-%COMP%]{padding:.75rem;gap:.75rem}.quick-actions-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:.75rem}.quick-action-btn[_ngcontent-%COMP%]{padding:.75rem;flex-direction:column;text-align:center;gap:.5rem}}@media (max-width: 576px){.calendar-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(7,1fr);gap:.25rem}.calendar-day[_ngcontent-%COMP%]{padding:.5rem .1rem}.day-name[_ngcontent-%COMP%]{font-size:.7rem}.day-date[_ngcontent-%COMP%]{font-size:.65rem}.reservations-count[_ngcontent-%COMP%]{font-size:1rem}.reservations-label[_ngcontent-%COMP%]{font-size:.6rem}.quick-actions-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.calendar-navigation[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-top:.5rem;gap:1rem}.nav-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.5rem 1rem;background:var(--primary-color);color:#fff;border:none;border-radius:8px;font-size:.9rem;font-weight:500;cursor:pointer;transition:all .3s ease;min-width:120px}.nav-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--primary-hover);transform:translateY(-1px)}.nav-btn[_ngcontent-%COMP%]:disabled{background:var(--border-color);color:var(--text-muted);cursor:not-allowed;transform:none}.nav-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.8rem}.current-period[_ngcontent-%COMP%]{flex:1;text-align:center;font-weight:600;color:var(--text-color);background:var(--card-bg);padding:.5rem 1rem;border-radius:8px;border:1px solid var(--border-color)}.calendar-day[_ngcontent-%COMP%]{background:var(--card-bg);border:1px solid var(--border-color);border-radius:12px;padding:1rem;text-align:center;cursor:pointer;transition:all .3s ease;position:relative;min-height:70px;display:flex;flex-direction:column;justify-content:center;align-items:center}.calendar-day[_ngcontent-%COMP%]:hover{border-color:var(--primary-color);transform:translateY(-2px);box-shadow:0 4px 12px #0000001a}.calendar-day.today[_ngcontent-%COMP%]{background:#0d6efd1a;border-color:#0d6efd;font-weight:600}.calendar-day.tomorrow[_ngcontent-%COMP%]{background:#00cdb51a;border-color:var(--primary-color)}.calendar-day.selected[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff;border-color:var(--primary-color);transform:translateY(-2px)}.calendar-day.past[_ngcontent-%COMP%]{background:var(--bg-secondary);color:var(--text-muted);border-color:var(--border-light)}.calendar-day.past[_ngcontent-%COMP%]:hover{border-color:var(--border-color)}.day-header[_ngcontent-%COMP%]{text-align:center}.day-name[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600;margin-bottom:.25rem}.day-date[_ngcontent-%COMP%]{font-size:.8rem;opacity:.8}@media (max-width: 768px){.calendar-navigation[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem}.nav-btn[_ngcontent-%COMP%]{min-width:100px;font-size:.8rem}.current-period[_ngcontent-%COMP%]{order:-1;width:100%}}"]})};function ei(o,t){o&1&&(n(0,"div",4)(1,"div",5)(2,"span",6),s(3,"Caricamento..."),i()(),n(4,"p",7),s(5,"Caricamento profilo..."),i()())}function ti(o,t){if(o&1){let e=b();n(0,"div",8),g(1,"i",9),s(2),n(3,"button",10),f("click",function(){p(e);let l=d();return u(l.refreshProfile())}),g(4,"i",11),s(5," Riprova "),i()()}if(o&2){let e=d();a(2),x(" ",e.error," ")}}function ni(o,t){if(o&1){let e=b();n(0,"div",44)(1,"span",45),s(2),i(),n(3,"button",61),f("click",function(){p(e);let l=d().ngIf,m=d(2);return u(m.startEdit(l))}),g(4,"i",62),i()()}if(o&2){let e=d().ngIf;a(2),_(e.value),a(),c("disabled",e.loading)}}function ii(o,t){o&1&&g(0,"i",71)}function ri(o,t){o&1&&g(0,"i",72)}function oi(o,t){if(o&1){let e=b();n(0,"div",63)(1,"input",64),P("ngModelChange",function(l){p(e);let m=d().ngIf;return M(m.value,l)||(m.value=l),u(l)}),i(),n(2,"div",65)(3,"button",66),f("click",function(){p(e);let l=d().ngIf,m=d(2);return u(m.saveField(l))}),v(4,ii,1,0,"i",67)(5,ri,1,0,"i",68),i(),n(6,"button",69),f("click",function(){p(e);let l=d().ngIf,m=d(2);return u(m.cancelEdit(l))}),g(7,"i",70),i()()()}if(o&2){let e=d().ngIf;a(),y("ngModel",e.value),c("disabled",e.loading),a(2),c("disabled",e.loading),a(),c("ngIf",!e.loading),a(),c("ngIf",e.loading),a(),c("disabled",e.loading)}}function ai(o,t){if(o&1&&(n(0,"div",43),v(1,ni,5,2,"div",59)(2,oi,8,6,"div",60),i()),o&2){let e=t.ngIf;a(),c("ngIf",!e.editing),a(),c("ngIf",e.editing)}}function si(o,t){if(o&1){let e=b();n(0,"div",44)(1,"span",45),s(2),i(),n(3,"button",61),f("click",function(){p(e);let l=d().ngIf,m=d(2);return u(m.startEdit(l))}),g(4,"i",62),i()()}if(o&2){let e=d().ngIf;a(2),_(e.value),a(),c("disabled",e.loading)}}function li(o,t){if(o&1&&(n(0,"option",75),s(1),i()),o&2){let e=t.$implicit;c("value",e),a(),x(" ",e," ")}}function ci(o,t){o&1&&g(0,"i",71)}function di(o,t){o&1&&g(0,"i",72)}function mi(o,t){if(o&1){let e=b();n(0,"div",63)(1,"select",73),P("ngModelChange",function(l){p(e);let m=d().ngIf;return M(m.value,l)||(m.value=l),u(l)}),v(2,li,2,2,"option",74),i(),n(3,"div",65)(4,"button",66),f("click",function(){p(e);let l=d().ngIf,m=d(2);return u(m.saveField(l))}),v(5,ci,1,0,"i",67)(6,di,1,0,"i",68),i(),n(7,"button",69),f("click",function(){p(e);let l=d().ngIf,m=d(2);return u(m.cancelEdit(l))}),g(8,"i",70),i()()()}if(o&2){let e=d().ngIf;a(),y("ngModel",e.value),c("disabled",e.loading),a(),c("ngForOf",e.options),a(2),c("disabled",e.loading),a(),c("ngIf",!e.loading),a(),c("ngIf",e.loading),a(),c("disabled",e.loading)}}function gi(o,t){if(o&1&&(n(0,"div",43),v(1,si,5,2,"div",59)(2,mi,9,7,"div",60),i()),o&2){let e=t.ngIf;a(),c("ngIf",!e.editing),a(),c("ngIf",e.editing)}}function pi(o,t){if(o&1){let e=b();n(0,"div",44)(1,"span",45),s(2),i(),n(3,"button",61),f("click",function(){p(e);let l=d().ngIf,m=d(2);return u(m.startEdit(l))}),g(4,"i",62),i()()}if(o&2){let e=d().ngIf,r=d(2);a(2),_(r.formatGiornoChiusura(e.value)),a(),c("disabled",e.loading)}}function ui(o,t){if(o&1&&(n(0,"option",75),s(1),i()),o&2){let e=t.$implicit,r=d(4);c("value",e),a(),x(" ",r.formatGiornoChiusura(e)," ")}}function fi(o,t){o&1&&g(0,"i",71)}function vi(o,t){o&1&&g(0,"i",72)}function _i(o,t){if(o&1){let e=b();n(0,"div",63)(1,"select",73),P("ngModelChange",function(l){p(e);let m=d().ngIf;return M(m.value,l)||(m.value=l),u(l)}),v(2,ui,2,2,"option",74),i(),n(3,"div",65)(4,"button",66),f("click",function(){p(e);let l=d().ngIf,m=d(2);return u(m.saveField(l))}),v(5,fi,1,0,"i",67)(6,vi,1,0,"i",68),i(),n(7,"button",69),f("click",function(){p(e);let l=d().ngIf,m=d(2);return u(m.cancelEdit(l))}),g(8,"i",70),i()()()}if(o&2){let e=d().ngIf;a(),y("ngModel",e.value),c("disabled",e.loading),a(),c("ngForOf",e.options),a(2),c("disabled",e.loading),a(),c("ngIf",!e.loading),a(),c("ngIf",e.loading),a(),c("disabled",e.loading)}}function bi(o,t){if(o&1&&(n(0,"div",43),v(1,pi,5,2,"div",59)(2,_i,9,7,"div",60),i()),o&2){let e=t.ngIf;a(),c("ngIf",!e.editing),a(),c("ngIf",e.editing)}}function hi(o,t){if(o&1){let e=b();n(0,"div",44)(1,"span",45),s(2),i(),n(3,"button",61),f("click",function(){p(e);let l=d().ngIf,m=d(2);return u(m.startEdit(l))}),g(4,"i",62),i()()}if(o&2){let e=d().ngIf;a(2),_(e.value||"Nessuna descrizione"),a(),c("disabled",e.loading)}}function xi(o,t){o&1&&g(0,"i",71)}function Ci(o,t){o&1&&g(0,"i",72)}function yi(o,t){if(o&1){let e=b();n(0,"div",63)(1,"textarea",76),P("ngModelChange",function(l){p(e);let m=d().ngIf;return M(m.value,l)||(m.value=l),u(l)}),i(),n(2,"div",65)(3,"button",66),f("click",function(){p(e);let l=d().ngIf,m=d(2);return u(m.saveField(l))}),v(4,xi,1,0,"i",67)(5,Ci,1,0,"i",68),i(),n(6,"button",69),f("click",function(){p(e);let l=d().ngIf,m=d(2);return u(m.cancelEdit(l))}),g(7,"i",70),i()()()}if(o&2){let e=d().ngIf;a(),y("ngModel",e.value),c("disabled",e.loading),a(2),c("disabled",e.loading),a(),c("ngIf",!e.loading),a(),c("ngIf",e.loading),a(),c("disabled",e.loading)}}function Mi(o,t){if(o&1&&(n(0,"div",43),v(1,hi,5,2,"div",59)(2,yi,8,6,"div",60),i()),o&2){let e=t.ngIf;a(),c("ngIf",!e.editing),a(),c("ngIf",e.editing)}}function Pi(o,t){if(o&1){let e=b();n(0,"div",44)(1,"span",45),s(2),i(),n(3,"button",61),f("click",function(){p(e);let l=d().ngIf,m=d(2);return u(m.startEdit(l))}),g(4,"i",62),i()()}if(o&2){let e=d().ngIf;a(2),_(e.value),a(),c("disabled",e.loading)}}function wi(o,t){o&1&&g(0,"i",71)}function Oi(o,t){o&1&&g(0,"i",72)}function Si(o,t){if(o&1){let e=b();n(0,"div",63)(1,"input",77),P("ngModelChange",function(l){p(e);let m=d().ngIf;return M(m.value,l)||(m.value=l),u(l)}),i(),n(2,"div",65)(3,"button",66),f("click",function(){p(e);let l=d().ngIf,m=d(2);return u(m.saveField(l))}),v(4,wi,1,0,"i",67)(5,Oi,1,0,"i",68),i(),n(6,"button",69),f("click",function(){p(e);let l=d().ngIf,m=d(2);return u(m.cancelEdit(l))}),g(7,"i",70),i()()()}if(o&2){let e=d().ngIf;a(),y("ngModel",e.value),c("disabled",e.loading),a(2),c("disabled",e.loading),a(),c("ngIf",!e.loading),a(),c("ngIf",e.loading),a(),c("disabled",e.loading)}}function Ii(o,t){if(o&1&&(n(0,"div",43),v(1,Pi,5,2,"div",59)(2,Si,8,6,"div",60),i()),o&2){let e=t.ngIf;a(),c("ngIf",!e.editing),a(),c("ngIf",e.editing)}}function ki(o,t){if(o&1){let e=b();n(0,"div",44)(1,"span",45),s(2),i(),n(3,"button",61),f("click",function(){p(e);let l=d().ngIf,m=d(2);return u(m.startEdit(l))}),g(4,"i",62),i()()}if(o&2){let e=d().ngIf;a(2),_(e.value),a(),c("disabled",e.loading)}}function Ei(o,t){o&1&&g(0,"i",71)}function Ti(o,t){o&1&&g(0,"i",72)}function Ri(o,t){if(o&1){let e=b();n(0,"div",63)(1,"input",78),P("ngModelChange",function(l){p(e);let m=d().ngIf;return M(m.value,l)||(m.value=l),u(l)}),i(),n(2,"div",65)(3,"button",66),f("click",function(){p(e);let l=d().ngIf,m=d(2);return u(m.saveField(l))}),v(4,Ei,1,0,"i",67)(5,Ti,1,0,"i",68),i(),n(6,"button",69),f("click",function(){p(e);let l=d().ngIf,m=d(2);return u(m.cancelEdit(l))}),g(7,"i",70),i()()()}if(o&2){let e=d().ngIf;a(),y("ngModel",e.value),c("disabled",e.loading),a(2),c("disabled",e.loading),a(),c("ngIf",!e.loading),a(),c("ngIf",e.loading),a(),c("disabled",e.loading)}}function Di(o,t){if(o&1&&(n(0,"div",43),v(1,ki,5,2,"div",59)(2,Ri,8,6,"div",60),i()),o&2){let e=t.ngIf;a(),c("ngIf",!e.editing),a(),c("ngIf",e.editing)}}function zi(o,t){if(o&1){let e=b();n(0,"div",44)(1,"span",45),s(2),i(),n(3,"button",61),f("click",function(){p(e);let l=d().ngIf,m=d(2);return u(m.startEdit(l))}),g(4,"i",62),i()()}if(o&2){let e=d().ngIf;a(2),_(e.value),a(),c("disabled",e.loading)}}function Vi(o,t){o&1&&g(0,"i",71)}function Fi(o,t){o&1&&g(0,"i",72)}function Ni(o,t){if(o&1){let e=b();n(0,"div",63)(1,"input",79),P("ngModelChange",function(l){p(e);let m=d().ngIf;return M(m.value,l)||(m.value=l),u(l)}),i(),n(2,"div",65)(3,"button",66),f("click",function(){p(e);let l=d().ngIf,m=d(2);return u(m.saveField(l))}),v(4,Vi,1,0,"i",67)(5,Fi,1,0,"i",68),i(),n(6,"button",69),f("click",function(){p(e);let l=d().ngIf,m=d(2);return u(m.cancelEdit(l))}),g(7,"i",70),i()()()}if(o&2){let e=d().ngIf;a(),y("ngModel",e.value),c("disabled",e.loading),a(2),c("disabled",e.loading),a(),c("ngIf",!e.loading),a(),c("ngIf",e.loading),a(),c("disabled",e.loading)}}function Ai(o,t){if(o&1&&(n(0,"div",43),v(1,zi,5,2,"div",59)(2,Ni,8,6,"div",60),i()),o&2){let e=t.ngIf;a(),c("ngIf",!e.editing),a(),c("ngIf",e.editing)}}function Ui(o,t){if(o&1&&(n(0,"div",12)(1,"div",13)(2,"div",14)(3,"div",15)(4,"div",16)(5,"div",17)(6,"div",18),g(7,"i",19),i(),n(8,"div")(9,"h2",20),s(10),i(),n(11,"p",21),g(12,"i",22),s(13),i()()(),n(14,"div",23)(15,"div",24),g(16,"i",25),s(17," Verificato "),i()()()()()(),n(18,"div",26)(19,"div",27)(20,"div",28)(21,"div",29)(22,"h3",30),g(23,"i",31),s(24," Informazioni Generali "),i()(),n(25,"div",32)(26,"div",33)(27,"label",34),g(28,"i",35),s(29," Nome Ristorante * "),i(),v(30,ai,3,2,"div",36),i(),n(31,"div",33)(32,"label",34),g(33,"i",22),s(34," Tipo Cucina * "),i(),v(35,gi,3,2,"div",36),i(),n(36,"div",33)(37,"label",34),g(38,"i",37),s(39," Giorno Chiusura "),i(),v(40,bi,3,2,"div",36),i(),n(41,"div",33)(42,"label",34),g(43,"i",38),s(44," Descrizione "),i(),v(45,Mi,3,2,"div",36),i()()()(),n(46,"div",27)(47,"div",28)(48,"div",29)(49,"h3",30),g(50,"i",39),s(51," Contatti e Ubicazione "),i()(),n(52,"div",32)(53,"div",33)(54,"label",34),g(55,"i",39),s(56," Indirizzo * "),i(),v(57,Ii,3,2,"div",36),i(),n(58,"div",33)(59,"label",34),g(60,"i",40),s(61," Citt\xE0 * "),i(),v(62,Di,3,2,"div",36),i(),n(63,"div",33)(64,"label",34),g(65,"i",41),s(66," Telefono * "),i(),v(67,Ai,3,2,"div",36),i(),n(68,"div",33)(69,"label",34),g(70,"i",42),s(71," Partita IVA "),i(),n(72,"div",43)(73,"div",44)(74,"span",45),s(75),i(),n(76,"button",46),g(77,"i",47),i()()(),n(78,"small",7),g(79,"i",48),s(80," Per modifiche contattare: "),n(81,"a",49),s(82," servizioclienti@thespoon.it "),i()()()()()()(),n(83,"div",50)(84,"div",14)(85,"div",51)(86,"div",29)(87,"h3",30),g(88,"i",52),s(89," Informazioni Account "),i()(),n(90,"div",53)(91,"div",54)(92,"div",55),s(93,"ID Ristorante"),i(),n(94,"div",56),s(95),i()(),n(96,"div",54)(97,"div",55),s(98,"Data Registrazione"),i(),n(99,"div",56),s(100),oe(101,"date"),i()(),n(102,"div",54)(103,"div",55),s(104,"Ultimo Aggiornamento"),i(),n(105,"div",56),s(106),oe(107,"date"),i()(),n(108,"div",54)(109,"div",55),s(110,"Rating Medio"),i(),n(111,"div",56)(112,"span",57),s(113),i(),n(114,"small",58),s(115),i()()()()()()()()),o&2){let e=d();a(10),_(e.restaurant.name),a(3),x(" ",e.restaurant.cuisineType," "),a(17),c("ngIf",e.getField("name")),a(5),c("ngIf",e.getField("cuisineType")),a(5),c("ngIf",e.getField("giornoChiusura")),a(5),c("ngIf",e.getField("description")),a(12),c("ngIf",e.getField("address")),a(5),c("ngIf",e.getField("city")),a(5),c("ngIf",e.getField("phoneNumber")),a(8),_(e.restaurant.partitaIva),a(),c("title","Per modificare la partita IVA si prega di contattare il servizio clienti: servizioclienti@thespoon.it"),a(19),_(e.restaurant.id),a(5),_(ae(101,16,e.restaurant.createdAt,"dd/MM/yyyy")),a(6),_(ae(107,19,e.restaurant.updatedAt,"dd/MM/yyyy HH:mm")),a(7),x("",e.restaurant.rating||0,"/5"),a(2),x("(",e.restaurant.reviewCount||0," recensioni)")}}var Re=class o{constructor(t,e,r){this.restaurantService=t;this.authService=e;this.cdr=r}restaurant=null;currentRestaurantId=0;loading=!0;error=null;saving=!1;editableFields=[];giornoChiusuraOptions=["NESSUNO","LUN","MAR","MER","GIO","VEN","SAB","DOM"];cuisineTypeOptions=["Italiana","Napoletana","Lombarda","Romana","Toscana","Siciliana","Pizzeria","Trattoria","Osteria","Ristorante","Fusion"];ngOnInit(){this.loadRestaurantProfile()}loadRestaurantProfile(){let t=this.authService.currentUser();if(!t||!this.authService.isBusiness()){this.error="Errore: utente non autorizzato",this.loading=!1;return}let e=t.userId;console.log("\u{1F464} Business ID dell'utente loggato:",e),this.restaurantService.getRestaurantByBusinessId(e).subscribe({next:r=>{this.restaurant=r,this.currentRestaurantId=r.id,this.initializeEditableFields(),this.loading=!1,this.cdr.detectChanges(),console.log("\u2705 Profilo ristorante caricato per business ID",e,":",r)},error:r=>{this.error="Errore nel caricamento del profilo o ristorante non trovato",this.loading=!1,this.cdr.detectChanges(),console.error("\u274C Errore caricamento profilo per business ID",e,":",r)}})}initializeEditableFields(){this.restaurant&&(this.editableFields=[{name:"name",value:this.restaurant.name||"",editing:!1,originalValue:this.restaurant.name||"",loading:!1,required:!0,type:"text"},{name:"address",value:this.restaurant.address||"",editing:!1,originalValue:this.restaurant.address||"",loading:!1,required:!0,type:"text"},{name:"city",value:this.restaurant.city||"",editing:!1,originalValue:this.restaurant.city||"",loading:!1,required:!0,type:"text"},{name:"phoneNumber",value:this.restaurant.phoneNumber||"",editing:!1,originalValue:this.restaurant.phoneNumber||"",loading:!1,required:!0,type:"tel"},{name:"description",value:this.restaurant.description||"",editing:!1,originalValue:this.restaurant.description||"",loading:!1,required:!1,type:"textarea"},{name:"cuisineType",value:this.restaurant.cuisineType||"",editing:!1,originalValue:this.restaurant.cuisineType||"",loading:!1,required:!0,type:"select",options:this.cuisineTypeOptions},{name:"giornoChiusura",value:this.restaurant.giornoChiusura||"NESSUNO",editing:!1,originalValue:this.restaurant.giornoChiusura||"NESSUNO",loading:!1,required:!0,type:"select",options:this.giornoChiusuraOptions}])}startEdit(t){this.editableFields.forEach(e=>{e!==t&&e.editing&&this.cancelEdit(e)}),t.editing=!0,t.originalValue=t.value,this.cdr.detectChanges(),console.log("\u270F\uFE0F Modifica campo:",t.name)}saveField(t){if(t.required&&!t.value.trim()){alert("Questo campo \xE8 obbligatorio");return}t.loading=!0,this.cdr.detectChanges();let r=this.authService.currentUser()?.userId||0;this.restaurantService.updateRestaurantField(this.currentRestaurantId,t.name,t.value,r).subscribe({next:l=>{this.restaurant=l,t.editing=!1,t.loading=!1,t.originalValue=t.value,this.cdr.detectChanges(),console.log("\u{1F4BE} Campo salvato nel database:",t.name,"=",t.value)},error:l=>{console.error("\u274C Errore salvataggio campo:",l),t.value=t.originalValue,t.editing=!1,t.loading=!1,this.cdr.detectChanges(),alert("Errore durante il salvataggio. Riprova.")}})}cancelEdit(t){t.value=t.originalValue,t.editing=!1,t.loading=!1,this.cdr.detectChanges(),console.log("\u274C Modifica annullata:",t.name)}getField(t){return this.editableFields.find(e=>e.name===t)}getFieldLabel(t){return{name:"Nome Ristorante",address:"Indirizzo",city:"Citt\xE0",phoneNumber:"Telefono",description:"Descrizione",cuisineType:"Tipo Cucina",giornoChiusura:"Giorno Chiusura"}[t]||t}formatGiornoChiusura(t){return{NESSUNO:"Sempre aperto",LUN:"Luned\xEC",MAR:"Marted\xEC",MER:"Mercoled\xEC",GIO:"Gioved\xEC",VEN:"Venerd\xEC",SAB:"Sabato",DOM:"Domenica"}[t]||t}refreshProfile(){this.loading=!0,this.error=null,this.loadRestaurantProfile()}getFieldIcon(t){return{name:"fas fa-store",address:"fas fa-map-marker-alt",city:"fas fa-city",phoneNumber:"fas fa-phone",description:"fas fa-align-left",cuisineType:"fas fa-utensils",giornoChiusura:"fas fa-calendar-times"}[t]||"fas fa-edit"}static \u0275fac=function(e){return new(e||o)(h(H),h(I),h(T))};static \u0275cmp=w({type:o,selectors:[["app-profile-section"]],decls:4,vars:3,consts:[[1,"profile-section"],["class","text-center py-5",4,"ngIf"],["class","alert alert-danger","role","alert",4,"ngIf"],["class","profile-content",4,"ngIf"],[1,"text-center","py-5"],["role","status",1,"spinner-border","text-primary","mb-3"],[1,"visually-hidden"],[1,"text-muted"],["role","alert",1,"alert","alert-danger"],[1,"fas","fa-exclamation-triangle","me-2"],[1,"btn","btn-outline-danger","btn-sm","ms-3",3,"click"],[1,"fas","fa-redo","me-1"],[1,"profile-content"],[1,"row","mb-4"],[1,"col-12"],[1,"profile-header","p-4","rounded-4","mb-4"],[1,"d-flex","align-items-center","justify-content-between"],[1,"d-flex","align-items-center"],[1,"profile-avatar","me-3"],[1,"fas","fa-store","fa-2x"],[1,"profile-title","mb-1"],[1,"profile-subtitle","mb-0"],[1,"fas","fa-utensils","me-2"],[1,"profile-badges"],[1,"badge","bg-success","rounded-pill","px-3","py-2"],[1,"fas","fa-check-circle","me-1"],[1,"row","g-4"],[1,"col-lg-6"],[1,"section-card","h-100"],[1,"section-header"],[1,"section-title"],[1,"fas","fa-info-circle","me-2"],[1,"profile-fields"],[1,"profile-field"],[1,"field-label"],[1,"fas","fa-store","me-2"],["class","field-container",4,"ngIf"],[1,"fas","fa-calendar-times","me-2"],[1,"fas","fa-align-left","me-2"],[1,"fas","fa-map-marker-alt","me-2"],[1,"fas","fa-city","me-2"],[1,"fas","fa-phone","me-2"],[1,"fas","fa-file-invoice","me-2"],[1,"field-container"],[1,"field-view"],[1,"field-value"],["disabled","",1,"btn-edit","btn-disabled",3,"title"],[1,"fas","fa-ban","text-danger"],[1,"fas","fa-info-circle","me-1"],["href","mailto:servizioclienti@thespoon.it",1,"text-primary"],[1,"row","mt-4"],[1,"section-card"],[1,"fas","fa-info","me-2"],[1,"info-grid"],[1,"info-item"],[1,"info-label"],[1,"info-value"],[1,"rating-badge"],[1,"text-muted","ms-2"],["class","field-view",4,"ngIf"],["class","field-edit",4,"ngIf"],[1,"btn-edit",3,"click","disabled"],[1,"fas","fa-edit"],[1,"field-edit"],["type","text","placeholder","Nome del ristorante",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"field-actions"],[1,"btn","btn-sm","btn-success",3,"click","disabled"],["class","fas fa-check",4,"ngIf"],["class","fas fa-spinner fa-spin",4,"ngIf"],[1,"btn","btn-sm","btn-outline-secondary",3,"click","disabled"],[1,"fas","fa-times"],[1,"fas","fa-check"],[1,"fas","fa-spinner","fa-spin"],[1,"form-select",3,"ngModelChange","ngModel","disabled"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["rows","3","placeholder","Descrizione del ristorante",1,"form-control",3,"ngModelChange","ngModel","disabled"],["type","text","placeholder","Via, numero civico",1,"form-control",3,"ngModelChange","ngModel","disabled"],["type","text","placeholder","Nome della citt\xE0",1,"form-control",3,"ngModelChange","ngModel","disabled"],["type","tel","placeholder","Numero di telefono",1,"form-control",3,"ngModelChange","ngModel","disabled"]],template:function(e,r){e&1&&(n(0,"div",0),v(1,ei,6,0,"div",1)(2,ti,6,1,"div",2)(3,Ui,116,22,"div",3),i()),e&2&&(a(),c("ngIf",r.loading),a(),c("ngIf",r.error&&!r.loading),a(),c("ngIf",!r.loading&&!r.error&&r.restaurant))},dependencies:[O,D,S,ut,U,Q,K,F,$,N,A,ue],styles:[".profile-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color),var(--primary-hover));color:#fff;border:none}.profile-avatar[_ngcontent-%COMP%]{color:var(--text-color);width:60px;height:60px;background:#fff3;border-radius:12px;display:flex;align-items:center;justify-content:center;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.profile-title[_ngcontent-%COMP%]{color:var(--text-color);font-size:1.8rem;font-weight:700;margin:0}.profile-subtitle[_ngcontent-%COMP%]{color:var(--text-color);opacity:.9;font-size:1rem}.profile-badges[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{font-size:.9rem;font-weight:500}.profile-fields[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.profile-field[_ngcontent-%COMP%]{border-bottom:1px solid var(--border-light);padding-bottom:1rem}.profile-field[_ngcontent-%COMP%]:last-child{border-bottom:none;padding-bottom:0}.field-label[_ngcontent-%COMP%]{display:block;font-weight:600;color:var(--text-color);margin-bottom:.75rem;font-size:.95rem}.field-container[_ngcontent-%COMP%]{position:relative}.field-view[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:1rem}.field-value[_ngcontent-%COMP%]{flex:1;font-size:1rem;color:var(--text-color);line-height:1.4;min-height:24px;display:flex;align-items:center}.btn-edit[_ngcontent-%COMP%]{background:none;border:none;color:var(--primary-color);font-size:.9rem;padding:.5rem;border-radius:6px;cursor:pointer;transition:all .3s ease;opacity:.7}.btn-edit[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--primary-color);color:#fff;opacity:1;transform:scale(1.1)}.btn-edit.btn-disabled[_ngcontent-%COMP%]{color:var(--text-muted);cursor:not-allowed}.btn-edit.btn-disabled[_ngcontent-%COMP%]:hover{background:none;transform:none}.field-edit[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.field-edit[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%], .field-edit[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]{border:2px solid var(--primary-color);border-radius:8px;font-size:1rem;transition:all .3s ease}.field-edit[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus, .field-edit[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .25rem rgba(var(--primary-rgb),.25);border-color:var(--primary-hover)}.field-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-self:flex-end}.field-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-radius:6px;font-size:.85rem;padding:.4rem .8rem;display:flex;align-items:center;gap:.25rem}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1.5rem;margin-top:1rem}.info-item[_ngcontent-%COMP%]{padding:1rem;background:var(--bg-secondary);border-radius:8px;border:1px solid var(--border-light)}.info-label[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-muted);font-weight:500;margin-bottom:.5rem;text-transform:uppercase;letter-spacing:.5px}.info-value[_ngcontent-%COMP%]{font-size:1rem;color:var(--text-color);font-weight:600;display:flex;align-items:center;gap:.5rem}.rating-badge[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff;padding:.25rem .5rem;border-radius:4px;font-size:.85rem;font-weight:600}.section-card[_ngcontent-%COMP%]{background:var(--card-bg);border:1px solid var(--border-color);border-radius:16px;padding:1.5rem;box-shadow:0 2px 8px #0000001a;transition:all .3s ease}.section-header[_ngcontent-%COMP%]{margin-bottom:1.5rem;padding-bottom:1rem;border-bottom:2px solid var(--border-light)}.section-title[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:700;color:var(--text-color);margin:0;display:flex;align-items:center}.fa-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.profile-header[_ngcontent-%COMP%]{text-align:center}.profile-header[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.field-view[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:.5rem}.btn-edit[_ngcontent-%COMP%]{align-self:flex-end}.field-actions[_ngcontent-%COMP%]{align-self:stretch;justify-content:flex-end}.info-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}[data-theme=dark][_ngcontent-%COMP%]   .profile-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color),#1a4b5c)}[data-theme=dark][_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{background:var(--card-bg);border-color:var(--border-color)}[data-theme=dark][_ngcontent-%COMP%]   .btn-edit.btn-disabled[_ngcontent-%COMP%]{color:var(--text-muted)}.btn-edit[title][_ngcontent-%COMP%]{position:relative}.btn-edit[title][_ngcontent-%COMP%]:hover:after{content:attr(title);position:absolute;bottom:100%;left:50%;transform:translate(-50%);background:var(--text-color);color:var(--card-bg);padding:.5rem;border-radius:4px;font-size:.75rem;white-space:nowrap;z-index:1000;margin-bottom:.5rem;max-width:200px;white-space:normal;word-wrap:break-word}"]})};var De=class o{static \u0275fac=function(e){return new(e||o)};static \u0275cmp=w({type:o,selectors:[["app-restaurant-section"]],decls:0,vars:0,template:function(e,r){},encapsulation:2})};var ze=class o{constructor(t){this.http=t}apiUrl=kt.apiUrl;getSubscriptionInfo(t){return this.http.get(`${this.apiUrl}/subscriptions/restaurant/${t}`)}changeSubscriptionPlan(t,e){return this.http.put(`${this.apiUrl}/subscriptions/restaurant/${t}/change-plan`,{newPlan:e})}createSubscription(t,e){return this.http.post(`${this.apiUrl}/subscriptions/restaurant/${t}/create`,{plan:e})}getStatusColor(t){switch(t){case"ATTIVO":return"success";case"GRATUITO":return"info";case"SCADUTO":return"danger";case"SOSPESO":return"warning";default:return"secondary"}}getStatusIcon(t){switch(t){case"ATTIVO":return"\u2705";case"GRATUITO":return"\u{1F381}";case"SCADUTO":return"\u274C";case"SOSPESO":return"\u23F8\uFE0F";default:return"\u2753"}}getPlanDescription(t){switch(t){case"BASIC":return"Max 50 prenotazioni al mese, \u20AC1 per prenotazione extra";case"GOLD":return"Prenotazioni ILLIMITATE + Visibilit\xE0 Premium";default:return"Piano non definito"}}getPlanColor(t){switch(t){case"BASIC":return"primary";case"GOLD":return"warning";default:return"secondary"}}static \u0275fac=function(e){return new(e||o)(Y(q))};static \u0275prov=G({token:o,factory:o.\u0275fac,providedIn:"root"})};function Li(o,t){o&1&&(n(0,"div",5),g(1,"div",6),n(2,"p"),s(3,"Caricamento abbonamento..."),i()())}function ji(o,t){if(o&1){let e=b();n(0,"div",7)(1,"div",8)(2,"span",9),s(3,"\u26A0\uFE0F"),i(),n(4,"h4"),s(5,"Errore nel caricamento"),i(),n(6,"p"),s(7),i(),n(8,"button",10),f("click",function(){p(e);let l=d();return u(l.loadSubscriptionInfo())}),s(9," \u{1F504} Riprova "),i()()()}if(o&2){let e=d();a(7),_(e.error)}}function Hi(o,t){o&1&&(n(0,"span"),s(1,"Piano Attuale"),i())}function Yi(o,t){if(o&1&&(n(0,"span"),s(1),i()),o&2){let e=d(2);a(),_(e.isChanging?"Cambiando...":"Passa a Basic")}}function Wi(o,t){o&1&&(n(0,"span"),s(1,"Piano Attuale"),i())}function Gi(o,t){if(o&1&&(n(0,"span"),s(1),i()),o&2){let e=d(2);a(),_(e.isChanging?"Cambiando...":"Upgrade a Gold")}}function qi(o,t){if(o&1){let e=b();n(0,"div",11)(1,"div",12)(2,"h4",13),s(3,"\u{1F504} Cambia Piano"),i(),n(4,"div",14)(5,"div",15)(6,"div",16)(7,"h5",17),s(8,"\u{1F4CB} Basic"),i(),n(9,"div",18)(10,"span",19),s(11,"\u20AC30"),i(),n(12,"span",20),s(13,"/mese"),i()()(),n(14,"div",21)(15,"div",22),s(16,"\u2705 Max 50 prenotazioni/mese"),i(),n(17,"div",22),s(18,"\u{1F4B0} \u20AC1 per prenotazione extra"),i(),n(19,"div",22),s(20,"\u{1F4CA} Dashboard base"),i()(),n(21,"button",23),f("click",function(){p(e);let l=d();return u(l.changePlan("BASIC"))}),v(22,Hi,2,0,"span",24)(23,Yi,2,1,"span",24),i()(),n(24,"div",25)(25,"div",16)(26,"h5",17),s(27,"\u{1F3C6} Gold"),i(),n(28,"div",18)(29,"span",19),s(30,"\u20AC50"),i(),n(31,"span",20),s(32,"/mese"),i()()(),n(33,"div",21)(34,"div",22),s(35,"\u{1F680} Prenotazioni ILLIMITATE"),i(),n(36,"div",22),s(37,"\u2B50 Visibilit\xE0 Premium"),i(),n(38,"div",22),s(39,"\u{1F4C8} Analytics avanzate"),i(),n(40,"div",22),s(41,"\u{1F3AF} Supporto prioritario"),i()(),n(42,"button",26),f("click",function(){p(e);let l=d();return u(l.changePlan("GOLD"))}),v(43,Wi,2,0,"span",24)(44,Gi,2,1,"span",24),i()()()()()}if(o&2){let e=d();a(5),C("current",e.subscriptionInfo.planType==="BASIC"),a(16),c("disabled",e.subscriptionInfo.planType==="BASIC"||e.isChanging),a(),c("ngIf",e.subscriptionInfo.planType==="BASIC"),a(),c("ngIf",e.subscriptionInfo.planType!=="BASIC"),a(),C("current",e.subscriptionInfo.planType==="GOLD"),a(18),c("disabled",e.subscriptionInfo.planType==="GOLD"||e.isChanging),a(),c("ngIf",e.subscriptionInfo.planType==="GOLD"),a(),c("ngIf",e.subscriptionInfo.planType!=="GOLD")}}function $i(o,t){if(o&1){let e=b();n(0,"div",27),f("click",function(){p(e);let l=d();return u(l.hideAlert())}),n(1,"div",28),f("click",function(l){return p(e),u(l.stopPropagation())}),n(2,"div",29)(3,"span",30),s(4,"\u{1F389}"),i(),n(5,"h4"),s(6,"Piano Cambiato!"),i()(),n(7,"div",31)(8,"p"),s(9),i(),n(10,"p",32),s(11,"Il nuovo piano \xE8 gi\xE0 attivo con 1 mese di prova!"),i()(),n(12,"div",33)(13,"button",10),f("click",function(){p(e);let l=d();return u(l.hideAlert())}),s(14," Perfetto! \u{1F680} "),i()()()()}if(o&2){let e=d();a(9),_(e.alertMessage)}}var Ve=class o{constructor(t,e,r,l){this.subscriptionService=t;this.restaurantService=e;this.authService=r;this.cdr=l}subscriptionInfo=null;loading=!1;error=null;isChanging=!1;showAlert=!1;alertMessage="";restaurantId=null;ngOnInit(){this.loadRestaurantId()}loadRestaurantId(){let t=this.authService.currentUser();if(!t||!this.authService.isBusiness()){this.error="Errore: utente non autorizzato";return}let e=t.userId;console.log("\u{1F464} Business ID dell'utente loggato:",e),e?this.restaurantService.getRestaurantByBusinessId(e).subscribe({next:r=>{this.restaurantId=r.id,console.log("\u{1F3EA} Restaurant ID ottenuto dinamicamente:",this.restaurantId),this.loadSubscriptionInfo()},error:r=>{console.error("\u274C Errore nel caricamento ristorante:",r),this.error="Impossibile caricare i dati del ristorante"}}):this.error="Business ID non trovato"}loadSubscriptionInfo(){this.restaurantId&&(console.log("\u{1F50D} Caricando abbonamento per restaurant ID:",this.restaurantId),this.loading=!0,this.error=null,this.subscriptionService.getSubscriptionInfo(this.restaurantId).subscribe({next:t=>{console.log("\u2705 Abbonamento ricevuto:",t),this.subscriptionInfo=t,this.loading=!1,this.cdr.detectChanges()},error:t=>{console.error("\u274C Errore caricamento abbonamento:",t),this.error="Impossibile caricare i dati dell'abbonamento",this.loading=!1,this.cdr.detectChanges()}}))}changePlan(t){!this.restaurantId||this.isChanging||(this.isChanging=!0,this.subscriptionService.changeSubscriptionPlan(this.restaurantId,t).subscribe({next:e=>{e.success?(this.alertMessage=e.message,this.showAlert=!0,setTimeout(()=>{this.loadSubscriptionInfo(),this.isChanging=!1},1e3)):(this.error=e.message,this.isChanging=!1),this.cdr.detectChanges()},error:e=>{console.error("\u274C Errore nel cambio piano:",e),this.error="Errore nel cambio del piano abbonamento",this.isChanging=!1,this.cdr.detectChanges()}}))}getStatusColor(t){return this.subscriptionService.getStatusColor(t)}getStatusIcon(t){return this.subscriptionService.getStatusIcon(t)}getPlanDescription(t){return this.subscriptionService.getPlanDescription(t)}formatDate(t){return t?new Date(t).toLocaleDateString("it-IT",{day:"2-digit",month:"2-digit",year:"numeric"}):"Non disponibile"}hideAlert(){this.showAlert=!1,this.cdr.detectChanges()}static \u0275fac=function(e){return new(e||o)(h(ze),h(H),h(I),h(T))};static \u0275cmp=w({type:o,selectors:[["app-subscription-section"]],decls:5,vars:4,consts:[[1,"subscription-container"],["class","loading-container",4,"ngIf"],["class","error-container",4,"ngIf"],["class","subscription-content",4,"ngIf"],["class","custom-alert-overlay",3,"click",4,"ngIf"],[1,"loading-container"],[1,"loading-spinner"],[1,"error-container"],[1,"error-card"],[1,"error-icon"],[1,"btn","btn-primary",3,"click"],[1,"subscription-content"],[1,"plan-options"],[1,"options-title"],[1,"plans-grid"],[1,"plan-option"],[1,"option-header"],[1,"option-title"],[1,"option-price"],[1,"price"],[1,"period"],[1,"option-features"],[1,"feature"],[1,"btn","btn-outline-primary","option-btn",3,"click","disabled"],[4,"ngIf"],[1,"plan-option","gold-plan"],[1,"btn","btn-warning","option-btn",3,"click","disabled"],[1,"custom-alert-overlay",3,"click"],[1,"custom-alert",3,"click"],[1,"alert-header"],[1,"alert-icon"],[1,"alert-body"],[1,"alert-subtitle"],[1,"alert-footer"]],template:function(e,r){e&1&&(n(0,"div",0),v(1,Li,4,0,"div",1)(2,ji,10,1,"div",2)(3,qi,45,10,"div",3),i(),v(4,$i,15,1,"div",4)),e&2&&(a(),c("ngIf",r.loading),a(),c("ngIf",r.error&&!r.loading),a(),c("ngIf",!r.loading&&!r.error&&r.subscriptionInfo),a(),c("ngIf",r.showAlert))},dependencies:[O,S],styles:['.subscription-container[_ngcontent-%COMP%]{padding:0}.loading-container[_ngcontent-%COMP%]{text-align:center;padding:3rem;color:var(--text-light)}.loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid var(--border-color);border-top:3px solid var(--primary-color);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 1rem}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.error-container[_ngcontent-%COMP%]{padding:2rem}.error-card[_ngcontent-%COMP%]{background:var(--card-bg);border:2px solid #dc3545;border-radius:1rem;padding:2rem;text-align:center}.error-icon[_ngcontent-%COMP%]{font-size:3rem;display:block;margin-bottom:1rem}.plan-card[_ngcontent-%COMP%]{background:var(--card-bg);border:2px solid var(--border-color);border-radius:1rem;padding:2rem;margin-bottom:2rem;box-shadow:var(--shadow);transition:all .3s ease}.plan-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--shadow-hover)}.current-plan[_ngcontent-%COMP%]{border-color:var(--primary-color);background:linear-gradient(135deg,var(--card-bg) 0%,rgba(0,205,181,.05) 100%)}.plan-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:1.5rem}.plan-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:var(--text-color);margin:0;display:flex;align-items:center;gap:.5rem}.plan-icon[_ngcontent-%COMP%]{font-size:1.8rem}.status-badge[_ngcontent-%COMP%]{padding:.5rem 1rem;border-radius:2rem;font-size:.9rem;font-weight:600;display:inline-flex;align-items:center;gap:.25rem}.badge-success[_ngcontent-%COMP%]{background:#28a74533;color:#28a745}.badge-info[_ngcontent-%COMP%]{background:#17a2b833;color:#17a2b8}.badge-danger[_ngcontent-%COMP%]{background:#dc354533;color:#dc3545}.badge-warning[_ngcontent-%COMP%]{background:#ffc10733;color:#ffc107}.plan-price[_ngcontent-%COMP%]{text-align:right}.price-amount[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:var(--primary-color)}.price-period[_ngcontent-%COMP%]{font-size:1rem;color:var(--text-light);margin-left:.25rem}.plan-details[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1rem;margin-bottom:1.5rem}.detail-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.75rem;background:#00cdb50d;border-radius:.5rem}.detail-label[_ngcontent-%COMP%]{font-weight:500;color:var(--text-light)}.detail-value[_ngcontent-%COMP%]{font-weight:600;color:var(--text-color)}.detail-value.highlight[_ngcontent-%COMP%]{color:var(--primary-color);font-weight:700}.plan-description[_ngcontent-%COMP%]{padding:1rem;background:#00cdb514;border-radius:.5rem;border-left:4px solid var(--primary-color)}.plan-description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--text-light);font-style:italic}.plan-options[_ngcontent-%COMP%]{margin-top:2rem}.options-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:var(--text-color);margin-bottom:1.5rem;text-align:center}.plans-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:1.5rem}.plan-option[_ngcontent-%COMP%]{background:var(--card-bg);border:2px solid var(--border-color);border-radius:1rem;padding:1.5rem;transition:all .3s ease;position:relative}.plan-option[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:var(--shadow-hover);border-color:var(--primary-color)}.plan-option.current[_ngcontent-%COMP%]{border-color:var(--primary-color);background:linear-gradient(135deg,var(--card-bg) 0%,rgba(0,205,181,.05) 100%)}.plan-option.current[_ngcontent-%COMP%]:before{content:"\\2705  Piano Attuale";position:absolute;top:-10px;right:1rem;background:var(--primary-color);color:#fff;padding:.25rem .75rem;border-radius:1rem;font-size:.8rem;font-weight:600}.gold-plan[_ngcontent-%COMP%]{border-color:#ffc107}.gold-plan[_ngcontent-%COMP%]:hover{border-color:#ffc107;box-shadow:0 8px 25px #ffc10733}.option-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.option-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:var(--text-color);margin:0}.option-price[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:var(--text-color)}.option-price[_ngcontent-%COMP%]   .period[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-light)}.option-features[_ngcontent-%COMP%]{margin-bottom:1.5rem}.feature[_ngcontent-%COMP%]{padding:.5rem 0;color:var(--text-light);border-bottom:1px solid var(--border-color)}.feature[_ngcontent-%COMP%]:last-child{border-bottom:none}.option-btn[_ngcontent-%COMP%]{width:100%;padding:.75rem;font-weight:600;border-radius:.5rem;transition:all .3s ease}.option-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.custom-alert-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:9999;animation:_ngcontent-%COMP%_fadeIn .3s ease}.custom-alert[_ngcontent-%COMP%]{background:var(--card-bg);border-radius:1rem;box-shadow:0 20px 40px #0000004d;max-width:500px;width:90%;animation:_ngcontent-%COMP%_slideUp .3s ease}.alert-header[_ngcontent-%COMP%]{padding:2rem 2rem 1rem;text-align:center;border-bottom:1px solid var(--border-color)}.alert-icon[_ngcontent-%COMP%]{font-size:3rem;display:block;margin-bottom:1rem}.alert-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;color:var(--text-color);font-weight:700}.alert-body[_ngcontent-%COMP%]{padding:1.5rem 2rem;text-align:center}.alert-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 .5rem;color:var(--text-color)}.alert-subtitle[_ngcontent-%COMP%]{color:var(--text-light);font-size:.9rem}.alert-footer[_ngcontent-%COMP%]{padding:1rem 2rem 2rem;text-align:center}.alert-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.75rem 2rem;font-weight:600;border-radius:.5rem}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 768px){.plan-header[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;text-align:center}.plan-details[_ngcontent-%COMP%], .plans-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.option-header[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem;text-align:center}}']})};function Qi(o,t){o&1&&g(0,"i",24)}function Ki(o,t){o&1&&g(0,"i",25)}function Ji(o,t){o&1&&(n(0,"div",26),g(1,"div",27),n(2,"p"),s(3,"Caricamento foto..."),i()())}function Zi(o,t){if(o&1){let e=b();n(0,"div",28)(1,"div",29),g(2,"i",30),n(3,"h4"),s(4,"Errore nel caricamento"),i(),n(5,"p"),s(6),i(),n(7,"button",31),f("click",function(){p(e);let l=d(2);return u(l.loadPhotos())}),g(8,"i",32),s(9," Riprova "),i()()()}if(o&2){let e=d(2);a(6),_(e.photosError)}}function Xi(o,t){o&1&&(n(0,"div",36),g(1,"i",37),n(2,"h4"),s(3,"Nessuna foto caricata"),i(),n(4,"p"),s(5,"Carica la prima foto del tuo ristorante per iniziare"),i()())}function er(o,t){o&1&&(n(0,"span",51),s(1,"Principale"),i())}function tr(o,t){if(o&1){let e=b();n(0,"div",38)(1,"div",39),g(2,"img",40),n(3,"div",41)(4,"button",42),f("click",function(){let l=p(e).$implicit,m=d(3);return u(m.setMainPhoto(l))}),g(5,"i",43),i(),n(6,"button",44),f("click",function(){let l=p(e).$implicit,m=d(3);return u(m.deletePhoto(l))}),g(7,"i",45),i()()(),n(8,"div",46)(9,"h5",47),s(10),i(),n(11,"div",48)(12,"span",49),s(13),i(),v(14,er,2,0,"span",50),i()()()}if(o&2){let e=t.$implicit,r=d(3);a(2),c("src",r.getPhotoUrl(e),B)("alt",e.fileName),a(2),C("is-main",e.isMain),c("disabled",e.isMain)("title",e.isMain?"Foto principale":"Imposta come principale"),a(6),_(e.fileName),a(3),x("",(e.fileSize/1024).toFixed(1)," KB"),a(),c("ngIf",e.isMain)}}function nr(o,t){if(o&1&&(n(0,"div",33),v(1,Xi,6,0,"div",34)(2,tr,15,9,"div",35),i()),o&2){let e=d(2);a(),c("ngIf",e.photos.length===0),a(),c("ngForOf",e.photos)}}function ir(o,t){if(o&1){let e=b();n(0,"div",6)(1,"div",7)(2,"h3",8),g(3,"i",9),s(4," Gestione Foto "),i(),n(5,"p",10),s(6," Carica e gestisci le foto del tuo ristorante. La prima foto sar\xE0 automaticamente impostata come principale. "),i()(),n(7,"div",11)(8,"div",12)(9,"input",13),f("change",function(l){p(e);let m=d();return u(m.onFileSelected(l))}),i(),n(10,"label",14)(11,"div",15),v(12,Qi,1,0,"i",16)(13,Ki,1,0,"i",17),n(14,"h4",18),s(15),i(),n(16,"p",19),s(17," Clicca per selezionare un'immagine o trascinala qui "),i(),n(18,"small",20),s(19," Formati supportati: JPG, PNG, GIF (max 5MB) "),i()()()()(),v(20,Ji,4,0,"div",21)(21,Zi,10,1,"div",22)(22,nr,3,2,"div",23),i()}if(o&2){let e=d();a(9),c("disabled",e.uploadingPhoto),a(),C("uploading",e.uploadingPhoto),a(2),c("ngIf",!e.uploadingPhoto),a(),c("ngIf",e.uploadingPhoto),a(2),x(" ",e.uploadingPhoto?"Caricamento...":"Carica Nuova Foto"," "),a(5),c("ngIf",e.photosLoading),a(),c("ngIf",e.photosError&&!e.photosLoading),a(),c("ngIf",!e.photosLoading&&!e.photosError)}}function rr(o,t){if(o&1&&(n(0,"option",82),s(1),i()),o&2){let e=t.$implicit;c("value",e),a(),x(" ",e," ")}}function or(o,t){o&1&&g(0,"i",83)}function ar(o,t){o&1&&g(0,"i",84)}function sr(o,t){if(o&1){let e=b();n(0,"div",59)(1,"div",60)(2,"div",61)(3,"h4",62),g(4,"i",63),s(5," Nuovo Piatto "),i(),n(6,"button",64),f("click",function(){p(e);let l=d(2);return u(l.hideAddItemForm())}),g(7,"i",65),i()(),n(8,"div",66)(9,"div",67)(10,"div",68)(11,"label",69),g(12,"i",4),s(13," Nome Piatto * "),i(),n(14,"input",70),P("ngModelChange",function(l){p(e);let m=d(2);return M(m.newMenuItem.name,l)||(m.newMenuItem.name=l),u(l)}),i()(),n(15,"div",68)(16,"label",69),g(17,"i",71),s(18," Prezzo * "),i(),n(19,"input",72),P("ngModelChange",function(l){p(e);let m=d(2);return M(m.newMenuItem.price,l)||(m.newMenuItem.price=l),u(l)}),i()()(),n(20,"div",68)(21,"label",69),g(22,"i",73),s(23," Categoria * "),i(),n(24,"select",74),P("ngModelChange",function(l){p(e);let m=d(2);return M(m.newMenuItem.category,l)||(m.newMenuItem.category=l),u(l)}),n(25,"option",75),s(26,"Seleziona categoria"),i(),v(27,rr,2,2,"option",76),i()()(),n(28,"div",77)(29,"button",78),f("click",function(){p(e);let l=d(2);return u(l.hideAddItemForm())}),g(30,"i",65),s(31," Annulla "),i(),n(32,"button",79),f("click",function(){p(e);let l=d(2);return u(l.saveNewMenuItem())}),v(33,or,1,0,"i",80)(34,ar,1,0,"i",81),s(35),i()()()()}if(o&2){let e=d(2);a(6),c("disabled",e.newMenuItem.adding),a(8),y("ngModel",e.newMenuItem.name),c("disabled",e.newMenuItem.adding),a(5),y("ngModel",e.newMenuItem.price),c("disabled",e.newMenuItem.adding),a(5),y("ngModel",e.newMenuItem.category),c("disabled",e.newMenuItem.adding),a(3),c("ngForOf",e.availableCategories),a(2),c("disabled",e.newMenuItem.adding),a(3),c("disabled",e.newMenuItem.adding||!e.newMenuItem.name||!e.newMenuItem.category||e.newMenuItem.price<=0),a(),c("ngIf",!e.newMenuItem.adding),a(),c("ngIf",e.newMenuItem.adding),a(),x(" ",e.newMenuItem.adding?"Salvando...":"Salva Piatto"," ")}}function lr(o,t){o&1&&(n(0,"div",26),g(1,"div",27),n(2,"p"),s(3,"Caricamento menu..."),i()())}function cr(o,t){if(o&1){let e=b();n(0,"div",28)(1,"div",29),g(2,"i",30),n(3,"h4"),s(4,"Errore nel caricamento"),i(),n(5,"p"),s(6),i(),n(7,"button",31),f("click",function(){p(e);let l=d(2);return u(l.loadMenuItems())}),g(8,"i",32),s(9," Riprova "),i()()()}if(o&2){let e=d(2);a(6),_(e.menuError)}}function dr(o,t){o&1&&(n(0,"div",88),g(1,"i",89),n(2,"h4"),s(3,"Nessun piatto nel menu"),i(),n(4,"p"),s(5,"Aggiungi il primo piatto del tuo menu per iniziare"),i()())}function mr(o,t){if(o&1){let e=b();n(0,"div",100)(1,"div",101)(2,"h5",102),s(3),i(),n(4,"span",103),s(5),i()(),n(6,"div",104)(7,"span",105),s(8),i()(),n(9,"div",106)(10,"button",107),f("click",function(){p(e);let l=d().$implicit,m=d(4);return u(m.startEditMenuItem(l))}),g(11,"i",108),i(),n(12,"button",109),f("click",function(){p(e);let l=d().$implicit,m=d(4);return u(m.deleteMenuItem(l))}),g(13,"i",45),i()()()}if(o&2){let e=d().$implicit,r=d(4);a(3),_(e.name),a(2),_(r.formatPrice(e.price)),a(3),_(e.category),a(2),c("disabled",e.loading),a(2),c("disabled",e.loading)}}function gr(o,t){if(o&1&&(n(0,"option",82),s(1),i()),o&2){let e=t.$implicit;c("value",e),a(),x(" ",e," ")}}function pr(o,t){o&1&&g(0,"i",83)}function ur(o,t){o&1&&g(0,"i",84)}function fr(o,t){if(o&1){let e=b();n(0,"div",110)(1,"div",111)(2,"div",68)(3,"label",112),s(4,"Nome"),i(),n(5,"input",113),P("ngModelChange",function(l){p(e);let m=d().$implicit;return M(m.name,l)||(m.name=l),u(l)}),i()(),n(6,"div",68)(7,"label",112),s(8,"Prezzo"),i(),n(9,"input",114),P("ngModelChange",function(l){p(e);let m=d().$implicit;return M(m.price,l)||(m.price=l),u(l)}),i()(),n(10,"div",68)(11,"label",112),s(12,"Categoria"),i(),n(13,"select",115),P("ngModelChange",function(l){p(e);let m=d().$implicit;return M(m.category,l)||(m.category=l),u(l)}),v(14,gr,2,2,"option",76),i()()(),n(15,"div",116)(16,"button",117),f("click",function(){p(e);let l=d().$implicit,m=d(4);return u(m.saveEditMenuItem(l))}),v(17,pr,1,0,"i",80)(18,ur,1,0,"i",81),i(),n(19,"button",118),f("click",function(){p(e);let l=d().$implicit,m=d(4);return u(m.cancelEditMenuItem(l))}),g(20,"i",65),i()()()}if(o&2){let e=d().$implicit,r=d(4);a(5),y("ngModel",e.name),c("disabled",e.loading),a(4),y("ngModel",e.price),c("disabled",e.loading),a(4),y("ngModel",e.category),c("disabled",e.loading),a(),c("ngForOf",r.availableCategories),a(2),c("disabled",e.loading||!e.name||!e.category||e.price<=0),a(),c("ngIf",!e.loading),a(),c("ngIf",e.loading),a(),c("disabled",e.loading)}}function vr(o,t){if(o&1&&(n(0,"div",97),v(1,mr,14,5,"div",98)(2,fr,21,11,"div",99),i()),o&2){let e=t.$implicit;a(),c("ngIf",!e.editing),a(),c("ngIf",e.editing)}}function _r(o,t){if(o&1&&(n(0,"div",90)(1,"div",91)(2,"h4",92)(3,"span",93),s(4),i(),s(5),n(6,"span",94),s(7),i()()(),n(8,"div",95),v(9,vr,3,2,"div",96),i()()),o&2){let e=t.$implicit,r=d(3);a(4),_(r.getCategoryIcon(e)),a(),x(" ",e," "),a(2),x("(",r.menuGrouped[e].length,")"),a(2),c("ngForOf",r.menuGrouped[e])}}function br(o,t){if(o&1&&(n(0,"div",85),v(1,dr,6,0,"div",86)(2,_r,10,4,"div",87),i()),o&2){let e=d(2);a(),c("ngIf",e.menuItems.length===0),a(),c("ngForOf",e.getOrderedCategories())}}function hr(o,t){if(o&1){let e=b();n(0,"div",6)(1,"div",7)(2,"div",52)(3,"div",53)(4,"h3",8),g(5,"i",54),s(6," Gestione Menu "),i(),n(7,"p",10),s(8," Aggiungi, modifica e organizza i piatti del tuo menu "),i()(),n(9,"button",55),f("click",function(){p(e);let l=d();return u(l.showAddItemForm())}),g(10,"i",56),n(11,"span"),s(12,"Aggiungi Piatto"),i()()()(),v(13,sr,36,13,"div",57)(14,lr,4,0,"div",21)(15,cr,10,1,"div",22)(16,br,3,2,"div",58),i()}if(o&2){let e=d();a(9),c("disabled",e.showNewItemForm),a(4),c("ngIf",e.showNewItemForm),a(),c("ngIf",e.menuLoading),a(),c("ngIf",e.menuError&&!e.menuLoading),a(),c("ngIf",!e.menuLoading&&!e.menuError)}}var Fe=class o{constructor(t,e,r,l,m){this.photoService=t;this.menuItemService=e;this.restaurantService=r;this.authService=l;this.cdr=m}restaurantId=null;photos=[];photosLoading=!1;photosError=null;uploadingPhoto=!1;menuItems=[];menuLoading=!1;menuError=null;menuGrouped={};newMenuItem={name:"",price:0,category:"",adding:!1};availableCategories=[];showNewItemForm=!1;activeTab="photos";ngOnInit(){this.loadRestaurantId(),this.loadDefaultCategories()}loadRestaurantId(){let t=this.authService.currentUser();if(!t||!this.authService.isBusiness()){console.error("\u274C Utente non autorizzato per settings");return}let e=t.userId;console.log("\u{1F464} Business ID per settings:",e),this.restaurantService.getRestaurantByBusinessId(e).subscribe({next:r=>{this.restaurantId=r.id,console.log("\u{1F3EA} Restaurant ID per settings:",this.restaurantId),this.loadPhotos(),this.loadMenuItems()},error:r=>{console.error("\u274C Errore caricamento ristorante per settings:",r)}})}loadDefaultCategories(){this.availableCategories=this.menuItemService.getDefaultCategories()}setActiveTab(t){this.activeTab=t,this.cdr.detectChanges()}loadPhotos(){this.restaurantId&&(this.photosLoading=!0,this.photosError=null,this.photoService.getPhotosByRestaurant(this.restaurantId).subscribe({next:t=>{this.photos=t,this.photosLoading=!1,this.cdr.detectChanges(),console.log("\u{1F4F8} Foto caricate:",t.length)},error:t=>{console.error("\u274C Errore caricamento foto:",t),this.photosError="Errore nel caricamento delle foto",this.photosLoading=!1,this.cdr.detectChanges()}}))}onFileSelected(t){let e=t.target;if(!e.files||e.files.length===0||!this.restaurantId)return;let r=e.files[0];if(!r.type.startsWith("image/")){alert("Per favore seleziona un'immagine valida");return}if(r.size>5*1024*1024){alert("Il file \xE8 troppo grande (max 5MB)");return}this.uploadingPhoto=!0,this.cdr.detectChanges();let l=this.photos.length===0;this.photoService.uploadPhoto(this.restaurantId,r,l).subscribe({next:m=>{m.success?(console.log("\u2705 Foto caricata:",m.photo),this.loadPhotos()):(console.error("\u274C Errore upload:",m.message),alert("Errore nel caricamento: "+m.message)),this.uploadingPhoto=!1,this.cdr.detectChanges()},error:m=>{console.error("\u274C Errore upload foto:",m),alert("Errore nel caricamento della foto"),this.uploadingPhoto=!1,this.cdr.detectChanges()}}),e.value=""}setMainPhoto(t){!this.restaurantId||t.isMain||this.photoService.setMainPhoto(t.id,this.restaurantId).subscribe({next:e=>{e.success?(console.log("\u2705 Foto principale impostata"),this.loadPhotos()):alert("Errore: "+e.message)},error:e=>{console.error("\u274C Errore impostazione foto principale:",e),alert("Errore nell'impostazione della foto principale")}})}deletePhoto(t){confirm("Sei sicuro di voler cancellare questa foto?")&&this.photoService.deletePhoto(t.id).subscribe({next:e=>{e.success?(console.log("\u2705 Foto cancellata"),this.loadPhotos()):alert("Errore: "+e.message)},error:e=>{console.error("\u274C Errore cancellazione foto:",e),alert("Errore nella cancellazione della foto")}})}loadMenuItems(){this.restaurantId&&(this.menuLoading=!0,this.menuError=null,this.menuItemService.getMenuItemsByRestaurant(this.restaurantId).subscribe({next:t=>{this.menuItems=t.map(e=>Xe(Ze({},e),{editing:!1,originalName:e.name,originalPrice:e.price,originalCategory:e.category,loading:!1})),this.groupMenuItems(),this.menuLoading=!1,this.cdr.detectChanges(),console.log("\u{1F37D}\uFE0F Menu items caricati:",t.length)},error:t=>{console.error("\u274C Errore caricamento menu:",t),this.menuError="Errore nel caricamento del menu",this.menuLoading=!1,this.cdr.detectChanges()}}))}groupMenuItems(){this.menuGrouped={},this.menuItems.forEach(t=>{this.menuGrouped[t.category]||(this.menuGrouped[t.category]=[]),this.menuGrouped[t.category].push(t)})}getOrderedCategories(){return Object.keys(this.menuGrouped).sort()}showAddItemForm(){this.showNewItemForm=!0,this.newMenuItem={name:"",price:0,category:"",adding:!1}}hideAddItemForm(){this.showNewItemForm=!1,this.newMenuItem={name:"",price:0,category:"",adding:!1}}saveNewMenuItem(){if(this.restaurantId){if(!this.newMenuItem.name.trim()||!this.newMenuItem.category.trim()||this.newMenuItem.price<=0){alert("Tutti i campi sono obbligatori e il prezzo deve essere maggiore di 0");return}this.newMenuItem.adding=!0,this.cdr.detectChanges(),this.menuItemService.createMenuItem(this.restaurantId,this.newMenuItem.name,this.newMenuItem.price,this.newMenuItem.category).subscribe({next:t=>{t.success?(console.log("\u2705 Menu item creato:",t.menuItem),this.hideAddItemForm(),this.loadMenuItems()):alert("Errore: "+t.message),this.newMenuItem.adding=!1,this.cdr.detectChanges()},error:t=>{console.error("\u274C Errore creazione menu item:",t),alert("Errore nella creazione del menu item"),this.newMenuItem.adding=!1,this.cdr.detectChanges()}})}}startEditMenuItem(t){this.menuItems.forEach(e=>{e!==t&&e.editing&&this.cancelEditMenuItem(e)}),t.editing=!0,t.originalName=t.name,t.originalPrice=t.price,t.originalCategory=t.category,this.cdr.detectChanges()}saveEditMenuItem(t){if(!t.name.trim()||!t.category.trim()||t.price<=0){alert("Tutti i campi sono obbligatori e il prezzo deve essere maggiore di 0");return}t.loading=!0,this.cdr.detectChanges(),this.menuItemService.updateMenuItem(t.id,t.name,t.price,t.category).subscribe({next:e=>{e.success?(console.log("\u2705 Menu item aggiornato:",e.menuItem),t.editing=!1,t.loading=!1,t.originalName=t.name,t.originalPrice=t.price,t.originalCategory=t.category,this.groupMenuItems(),this.cdr.detectChanges()):(alert("Errore: "+e.message),t.loading=!1,this.cdr.detectChanges())},error:e=>{console.error("\u274C Errore aggiornamento menu item:",e),alert("Errore nell'aggiornamento del menu item"),t.name=t.originalName,t.price=t.originalPrice,t.category=t.originalCategory,t.editing=!1,t.loading=!1,this.cdr.detectChanges()}})}cancelEditMenuItem(t){t.name=t.originalName,t.price=t.originalPrice,t.category=t.originalCategory,t.editing=!1,t.loading=!1,this.cdr.detectChanges()}deleteMenuItem(t){confirm(`Sei sicuro di voler cancellare "${t.name}"?`)&&this.menuItemService.deleteMenuItem(t.id).subscribe({next:e=>{e.success?(console.log("\u2705 Menu item cancellato"),this.loadMenuItems()):alert("Errore: "+e.message)},error:e=>{console.error("\u274C Errore cancellazione menu item:",e),alert("Errore nella cancellazione del menu item")}})}getCategoryIcon(t){return t.includes("\u{1F355}")||t.toLowerCase().includes("pizza")?"\u{1F355}":t.includes("\u{1F35D}")||t.toLowerCase().includes("primi")?"\u{1F35D}":t.includes("\u{1F969}")||t.toLowerCase().includes("secondi")?"\u{1F969}":t.includes("\u{1F957}")||t.toLowerCase().includes("antipasti")?"\u{1F957}":t.includes("\u{1F377}")||t.toLowerCase().includes("vini")?"\u{1F377}":t.includes("\u{1F37A}")||t.toLowerCase().includes("birre")?"\u{1F37A}":t.includes("\u{1F964}")||t.toLowerCase().includes("bevande")?"\u{1F964}":t.includes("\u{1F370}")||t.toLowerCase().includes("dolci")?"\u{1F370}":"\u{1F37D}\uFE0F"}formatPrice(t){return"\u20AC"+t.toFixed(2)}getPhotoUrl(t){return this.photoService.getPhotoUrl(t)}static \u0275fac=function(e){return new(e||o)(h(Me),h(Tt),h(H),h(I),h(T))};static \u0275cmp=w({type:o,selectors:[["app-settings-section"]],decls:12,vars:6,consts:[[1,"settings-section"],[1,"settings-tabs"],[1,"tab-button",3,"click"],[1,"fas","fa-camera"],[1,"fas","fa-utensils"],["class","tab-content",4,"ngIf"],[1,"tab-content"],[1,"section-header"],[1,"section-title"],[1,"fas","fa-camera","me-2"],[1,"section-description"],[1,"upload-section"],[1,"upload-area"],["type","file","id","photoUpload","accept","image/*",2,"display","none",3,"change","disabled"],["for","photoUpload",1,"upload-label"],[1,"upload-content"],["class","fas fa-cloud-upload-alt upload-icon",4,"ngIf"],["class","fas fa-spinner fa-spin upload-icon",4,"ngIf"],[1,"upload-title"],[1,"upload-description"],[1,"upload-hint"],["class","loading-container",4,"ngIf"],["class","error-container",4,"ngIf"],["class","photos-grid",4,"ngIf"],[1,"fas","fa-cloud-upload-alt","upload-icon"],[1,"fas","fa-spinner","fa-spin","upload-icon"],[1,"loading-container"],[1,"loading-spinner"],[1,"error-container"],[1,"error-card"],[1,"fas","fa-exclamation-triangle","error-icon"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-redo"],[1,"photos-grid"],["class","no-photos",4,"ngIf"],["class","photo-card",4,"ngFor","ngForOf"],[1,"no-photos"],[1,"fas","fa-image","no-photos-icon"],[1,"photo-card"],[1,"photo-image"],[3,"src","alt"],[1,"photo-overlay"],[1,"photo-action","main-btn",3,"click","disabled","title"],[1,"fas","fa-star"],["title","Elimina foto",1,"photo-action","delete-btn",3,"click"],[1,"fas","fa-trash"],[1,"photo-info"],[1,"photo-name"],[1,"photo-meta"],[1,"photo-size"],["class","photo-badge",4,"ngIf"],[1,"photo-badge"],[1,"header-content"],[1,"header-text"],[1,"fas","fa-utensils","me-2"],[1,"btn","btn-primary","add-btn",3,"click","disabled"],[1,"fas","fa-plus"],["class","add-item-form",4,"ngIf"],["class","menu-content",4,"ngIf"],[1,"add-item-form"],[1,"form-card"],[1,"form-header"],[1,"form-title"],[1,"fas","fa-plus-circle"],[1,"btn-close",3,"click","disabled"],[1,"fas","fa-times"],[1,"form-body"],[1,"form-row"],[1,"form-group"],[1,"form-label"],["type","text","placeholder","Es. Pizza Margherita",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"fas","fa-euro-sign"],["type","number","placeholder","0.00","step","0.01","min","0",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"fas","fa-tags"],[1,"form-control",3,"ngModelChange","ngModel","disabled"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"form-footer"],[1,"btn","btn-outline-secondary",3,"click","disabled"],[1,"btn","btn-success",3,"click","disabled"],["class","fas fa-check",4,"ngIf"],["class","fas fa-spinner fa-spin",4,"ngIf"],[3,"value"],[1,"fas","fa-check"],[1,"fas","fa-spinner","fa-spin"],[1,"menu-content"],["class","no-menu",4,"ngIf"],["class","menu-category",4,"ngFor","ngForOf"],[1,"no-menu"],[1,"fas","fa-utensils","no-menu-icon"],[1,"menu-category"],[1,"category-header"],[1,"category-title"],[1,"category-icon"],[1,"category-count"],[1,"menu-items-grid"],["class","menu-item-card",4,"ngFor","ngForOf"],[1,"menu-item-card"],["class","item-view",4,"ngIf"],["class","item-edit",4,"ngIf"],[1,"item-view"],[1,"item-header"],[1,"item-name"],[1,"item-price"],[1,"item-category"],[1,"category-badge"],[1,"item-actions"],["title","Modifica",1,"btn-action","edit-btn",3,"click","disabled"],[1,"fas","fa-edit"],["title","Elimina",1,"btn-action","delete-btn",3,"click","disabled"],[1,"item-edit"],[1,"edit-form"],[1,"form-label-small"],["type","text",1,"form-control-small",3,"ngModelChange","ngModel","disabled"],["type","number","step","0.01","min","0",1,"form-control-small",3,"ngModelChange","ngModel","disabled"],[1,"form-control-small",3,"ngModelChange","ngModel","disabled"],[1,"edit-actions"],["title","Salva",1,"btn-action","save-btn",3,"click","disabled"],["title","Annulla",1,"btn-action","cancel-btn",3,"click","disabled"]],template:function(e,r){e&1&&(n(0,"div",0)(1,"div",1)(2,"button",2),f("click",function(){return r.setActiveTab("photos")}),g(3,"i",3),n(4,"span"),s(5,"Foto Ristorante"),i()(),n(6,"button",2),f("click",function(){return r.setActiveTab("menu")}),g(7,"i",4),n(8,"span"),s(9,"Menu"),i()()(),v(10,ir,23,9,"div",5)(11,hr,17,5,"div",5),i()),e&2&&(a(2),C("active",r.activeTab==="photos"),a(4),C("active",r.activeTab==="menu"),a(4),c("ngIf",r.activeTab==="photos"),a(),c("ngIf",r.activeTab==="menu"))},dependencies:[O,D,S,U,Q,K,F,he,$,N,xe,A],styles:['.settings-section[_ngcontent-%COMP%]{padding:0}.settings-tabs[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-bottom:2rem;border-bottom:2px solid var(--border-color)}.tab-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:1rem 1.5rem;background:transparent;border:none;color:var(--text-light);font-weight:500;cursor:pointer;transition:all .3s ease;border-radius:.5rem .5rem 0 0;position:relative}.tab-button[_ngcontent-%COMP%]:hover{color:var(--primary-color);background:#00cdb51a}.tab-button.active[_ngcontent-%COMP%]{color:var(--primary-color);background:#00cdb526;font-weight:600}.tab-button.active[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-2px;left:0;right:0;height:2px;background:var(--primary-color)}.tab-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem}.tab-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.95rem}.tab-content[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.section-header[_ngcontent-%COMP%]{margin-bottom:2rem;text-align:center}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:1rem}.header-text[_ngcontent-%COMP%]{flex:1;text-align:left}.section-title[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;color:var(--text-color);margin-bottom:.5rem}.section-description[_ngcontent-%COMP%]{color:var(--text-light);margin:0;font-size:1rem}.add-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem 1.5rem;border-radius:.5rem;font-weight:600;white-space:nowrap}.loading-container[_ngcontent-%COMP%]{text-align:center;padding:3rem;color:var(--text-light)}.loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid var(--border-color);border-top:3px solid var(--primary-color);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 1rem}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.error-container[_ngcontent-%COMP%]{padding:2rem}.error-card[_ngcontent-%COMP%]{background:var(--card-bg);border:2px solid #dc3545;border-radius:1rem;padding:2rem;text-align:center;max-width:400px;margin:0 auto}.error-icon[_ngcontent-%COMP%]{font-size:3rem;color:#dc3545;margin-bottom:1rem}.error-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:var(--text-color);margin-bottom:1rem}.error-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);margin-bottom:1.5rem}.upload-section[_ngcontent-%COMP%]{margin-bottom:3rem}.upload-area[_ngcontent-%COMP%]{border:2px dashed var(--border-color);border-radius:1rem;padding:2rem;text-align:center;transition:all .3s ease}.upload-area[_ngcontent-%COMP%]:hover{border-color:var(--primary-color);background:#00cdb50d}.upload-label[_ngcontent-%COMP%]{display:block;cursor:pointer;width:100%;height:100%}.upload-label.uploading[_ngcontent-%COMP%]{cursor:not-allowed;opacity:.6}.upload-content[_ngcontent-%COMP%]{pointer-events:none}.upload-icon[_ngcontent-%COMP%]{font-size:3rem;color:var(--primary-color);margin-bottom:1rem}.upload-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:var(--text-color);margin-bottom:.5rem}.upload-description[_ngcontent-%COMP%]{color:var(--text-light);margin-bottom:1rem}.upload-hint[_ngcontent-%COMP%]{color:var(--text-light);font-size:.9rem}.photos-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:1.5rem}.no-photos[_ngcontent-%COMP%]{grid-column:1 / -1;text-align:center;padding:3rem;color:var(--text-light)}.no-photos-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:1rem;opacity:.5}.no-photos[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:var(--text-color);margin-bottom:.5rem}.photo-card[_ngcontent-%COMP%]{background:var(--card-bg);border:2px solid var(--border-color);border-radius:1rem;overflow:hidden;transition:all .3s ease}.photo-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:var(--shadow-hover);border-color:var(--primary-color)}.photo-image[_ngcontent-%COMP%]{position:relative;width:100%;height:200px;overflow:hidden}.photo-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .3s ease}.photo-card[_ngcontent-%COMP%]:hover   .photo-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:scale(1.05)}.photo-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;gap:.5rem;opacity:0;transition:opacity .3s ease}.photo-card[_ngcontent-%COMP%]:hover   .photo-overlay[_ngcontent-%COMP%]{opacity:1}.photo-action[_ngcontent-%COMP%]{padding:.5rem;border:none;border-radius:50%;cursor:pointer;transition:all .3s ease;font-size:1rem}.photo-action.main-btn[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff}.photo-action.main-btn.is-main[_ngcontent-%COMP%]{background:#ffc107;cursor:not-allowed}.photo-action.main-btn[_ngcontent-%COMP%]:hover:not(.is-main){background:#00b5a3;transform:scale(1.1)}.photo-action.delete-btn[_ngcontent-%COMP%]{background:#dc3545;color:#fff}.photo-action.delete-btn[_ngcontent-%COMP%]:hover{background:#c82333;transform:scale(1.1)}.photo-info[_ngcontent-%COMP%]{padding:1rem}.photo-name[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600;color:var(--text-color);margin-bottom:.5rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.photo-meta[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.photo-size[_ngcontent-%COMP%]{color:var(--text-light);font-size:.8rem}.photo-badge[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff;padding:.25rem .5rem;border-radius:1rem;font-size:.75rem;font-weight:600}.add-item-form[_ngcontent-%COMP%]{margin-bottom:2rem}.form-card[_ngcontent-%COMP%]{background:var(--card-bg);border:2px solid var(--primary-color);border-radius:1rem;overflow:hidden}.form-header[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff;padding:1rem 1.5rem;display:flex;justify-content:space-between;align-items:center}.form-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;margin:0;display:flex;align-items:center;gap:.5rem}.btn-close[_ngcontent-%COMP%]{background:none;border:none;color:#fff;cursor:pointer;padding:.5rem;border-radius:.25rem;transition:background .3s ease}.btn-close[_ngcontent-%COMP%]:hover{background:#fff3}.form-body[_ngcontent-%COMP%]{padding:1.5rem}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem}.form-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-weight:600;color:var(--text-color);margin-bottom:.5rem;font-size:.9rem}.form-control[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:2px solid var(--border-color);border-radius:.5rem;background:var(--card-bg);color:var(--text-color);font-size:1rem;transition:all .3s ease}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #00cdb51a}.form-control[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.form-footer[_ngcontent-%COMP%]{padding:1rem 1.5rem;background:#00cdb50d;border-top:1px solid var(--border-color);display:flex;justify-content:flex-end;gap:1rem}.form-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem 1.5rem;border-radius:.5rem;font-weight:600;border:none;cursor:pointer;transition:all .3s ease}.form-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.form-footer[_ngcontent-%COMP%]   .btn-outline-secondary[_ngcontent-%COMP%]{background:transparent;color:var(--text-light);border:2px solid var(--border-color)}.form-footer[_ngcontent-%COMP%]   .btn-outline-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--border-color);color:var(--text-color)}.form-footer[_ngcontent-%COMP%]   .btn-success[_ngcontent-%COMP%]{background:#28a745;color:#fff}.form-footer[_ngcontent-%COMP%]   .btn-success[_ngcontent-%COMP%]:hover:not(:disabled){background:#218838}.no-menu[_ngcontent-%COMP%]{text-align:center;padding:3rem;color:var(--text-light)}.no-menu-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:1rem;opacity:.5}.no-menu[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:var(--text-color);margin-bottom:.5rem}.menu-category[_ngcontent-%COMP%]{margin-bottom:2rem}.category-header[_ngcontent-%COMP%]{margin-bottom:1rem;padding-bottom:.5rem;border-bottom:2px solid var(--border-color)}.category-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:var(--text-color);margin:0;display:flex;align-items:center;gap:.5rem}.category-icon[_ngcontent-%COMP%]{font-size:1.5rem}.category-count[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff;padding:.25rem .5rem;border-radius:1rem;font-size:.8rem;font-weight:600}.menu-items-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:1rem}.menu-item-card[_ngcontent-%COMP%]{background:var(--card-bg);border:2px solid var(--border-color);border-radius:1rem;padding:1.5rem;transition:all .3s ease}.menu-item-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--shadow-hover);border-color:var(--primary-color)}.item-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:1rem;gap:1rem}.item-name[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:var(--text-color);margin:0;flex:1}.item-price[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;color:var(--primary-color);white-space:nowrap}.item-category[_ngcontent-%COMP%]{margin-bottom:1rem}.category-badge[_ngcontent-%COMP%]{background:#00cdb51a;color:var(--primary-color);padding:.25rem .75rem;border-radius:1rem;font-size:.8rem;font-weight:600}.item-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.5rem}.btn-action[_ngcontent-%COMP%]{padding:.5rem;border:none;border-radius:.5rem;cursor:pointer;transition:all .3s ease;font-size:.9rem}.btn-action.edit-btn[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff}.btn-action.edit-btn[_ngcontent-%COMP%]:hover{background:#00b5a3}.btn-action.delete-btn[_ngcontent-%COMP%]{background:#dc3545;color:#fff}.btn-action.delete-btn[_ngcontent-%COMP%]:hover{background:#c82333}.btn-action.save-btn[_ngcontent-%COMP%]{background:#28a745;color:#fff}.btn-action.save-btn[_ngcontent-%COMP%]:hover{background:#218838}.btn-action.cancel-btn[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn-action.cancel-btn[_ngcontent-%COMP%]:hover{background:#5a6268}.btn-action[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.edit-form[_ngcontent-%COMP%]{margin-bottom:1rem}.form-label-small[_ngcontent-%COMP%]{display:block;font-weight:600;color:var(--text-color);margin-bottom:.25rem;font-size:.85rem}.form-control-small[_ngcontent-%COMP%]{width:100%;padding:.5rem;border:1px solid var(--border-color);border-radius:.375rem;background:var(--card-bg);color:var(--text-color);font-size:.9rem;transition:all .3s ease}.form-control-small[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 2px #00cdb51a}.form-control-small[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.edit-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.5rem}@media (max-width: 768px){.settings-tabs[_ngcontent-%COMP%]{flex-direction:column;gap:0}.tab-button[_ngcontent-%COMP%]{border-radius:0;padding:.75rem 1rem}.tab-button.active[_ngcontent-%COMP%]:after{left:.5rem;right:auto;width:3px;height:100%;top:0;bottom:0}.header-content[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.header-text[_ngcontent-%COMP%]{text-align:center}.add-btn[_ngcontent-%COMP%]{width:100%;justify-content:center}.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}.form-footer[_ngcontent-%COMP%]{flex-direction:column}.form-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;justify-content:center}.photos-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:1rem}.menu-items-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.item-header[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem}.item-price[_ngcontent-%COMP%]{align-self:flex-end}.item-actions[_ngcontent-%COMP%]{justify-content:center}}@media (max-width: 480px){.section-title[_ngcontent-%COMP%]{font-size:1.5rem}.upload-area[_ngcontent-%COMP%]{padding:1rem}.upload-icon[_ngcontent-%COMP%]{font-size:2rem}.upload-title[_ngcontent-%COMP%]{font-size:1.1rem}.photos-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.photo-image[_ngcontent-%COMP%]{height:150px}.tab-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.85rem}}']})};var Ne=class o{constructor(t,e){this.router=t;this.location=e}copyButtonText="Copia email";downloadForm(){console.log("\u{1F4E5} Download modulo cancellazione account...");try{let t=document.createElement("a");t.href="assets/Modulo_Cancellazione_Account_TheSpoon.pdf",t.download="Modulo_Cancellazione_Account_TheSpoon.pdf",t.target="_blank",document.body.appendChild(t),t.click(),document.body.removeChild(t),console.log("\u2705 Download avviato"),this.showDownloadFeedback()}catch(t){console.error("\u274C Errore durante il download:",t),window.open("assets/documents/modulo-cancellazione-account.pdf","_blank")}}copyEmail(){let t="servizioclienti@thespoon.com";try{navigator.clipboard&&window.isSecureContext?navigator.clipboard.writeText(t).then(()=>{console.log("\u{1F4CB} Email copiata negli appunti"),this.showCopyFeedback()}).catch(e=>{console.error("\u274C Errore copia clipboard:",e),this.fallbackCopyEmail(t)}):this.fallbackCopyEmail(t)}catch(e){console.error("\u274C Errore durante la copia:",e),this.fallbackCopyEmail(t)}}fallbackCopyEmail(t){try{let e=document.createElement("textarea");e.value=t,e.style.position="fixed",e.style.opacity="0",document.body.appendChild(e),e.focus(),e.select(),document.execCommand("copy"),document.body.removeChild(e),console.log("\u{1F4CB} Email copiata (fallback)"),this.showCopyFeedback()}catch(e){console.error("\u274C Fallback copia fallito:",e),alert(`Copia questa email: ${t}`)}}showDownloadFeedback(){let t="Scarica Modulo PDF",e=document.querySelector(".download-btn");e&&(e.innerHTML='<span class="me-2">\u2705</span>Download avviato...',e.classList.add("btn-success"),e.classList.remove("btn-primary"),setTimeout(()=>{e.innerHTML=`<span class="me-2">\u{1F4E5}</span>${t}`,e.classList.remove("btn-success"),e.classList.add("btn-primary")},3e3))}showCopyFeedback(){this.copyButtonText="Copiato!";let t=document.querySelector(".copy-btn");t&&(t.classList.add("copied"),setTimeout(()=>{this.copyButtonText="Copia email",t.classList.remove("copied")},2e3))}goBack(){console.log("\u2190 Tornando indietro..."),this.location.back()}navigateToSettings(){console.log("\u2699\uFE0F Navigazione a impostazioni..."),this.router.navigate(["/business-dashboard/settings"])}navigateToDashboard(){console.log("\u{1F3E0} Navigazione a dashboard..."),this.router.navigate(["/business-dashboard"])}static \u0275fac=function(e){return new(e||o)(h(R),h(pt))};static \u0275cmp=w({type:o,selectors:[["app-delete-account-section"]],decls:70,vars:1,consts:[[1,"container-xl","py-5"],[1,"row","justify-content-center"],[1,"col-lg-8","col-xl-6"],[1,"card","shadow-lg","border-0","rounded-4","delete-card","mb-4"],[1,"card-body","p-4","p-md-5"],["role","alert",1,"alert","alert-warning","rounded-3","mb-4","warning-alert"],[1,"d-flex","align-items-center"],[1,"me-3","fs-4"],[1,"fw-bold","mb-4","step-title"],[1,"steps-container"],[1,"step-item","mb-4"],[1,"step-number"],[1,"step-content"],[1,"fw-semibold","mb-2","step-heading"],[1,"step-description","mb-3"],[1,"btn","btn-lg","download-btn",3,"click"],[1,"me-2"],[1,"step-description"],[1,"step-item"],[1,"email-container"],[1,"email-box","p-3","rounded-3"],[1,"d-flex","align-items-center","justify-content-between"],[1,"email-label"],[1,"email-address","fw-bold"],[1,"btn","btn-sm","copy-btn",3,"click","title"],[1,"copy-icon"],[1,"important-note","mt-5","p-4","rounded-3"],[1,"fw-bold","mb-2"],[1,"mb-0","note-list"]],template:function(e,r){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"span",7),s(8,"\u26A0\uFE0F"),i(),n(9,"div")(10,"strong"),s(11,"Attenzione!"),i(),g(12,"br"),s(13," La cancellazione dell'account \xE8 irreversibile. "),i()()(),n(14,"h4",8),s(15," \u{1F4CB} Procedura di Cancellazione "),i(),n(16,"div",9)(17,"div",10)(18,"div",11),s(19,"1"),i(),n(20,"div",12)(21,"h5",13),s(22,"Scarica il Modulo"),i(),n(23,"p",14),s(24," Scarica e compila il modulo di richiesta cancellazione account. "),i(),n(25,"button",15),f("click",function(){return r.downloadForm()}),n(26,"span",16),s(27,"\u{1F4E5}"),i(),s(28," Scarica Modulo PDF "),i()()(),n(29,"div",10)(30,"div",11),s(31,"2"),i(),n(32,"div",12)(33,"h5",13),s(34,"Compila il Modulo"),i(),n(35,"p",17),s(36," Compila tutti i campi richiesti nel modulo PDF scaricato. "),i()()(),n(37,"div",18)(38,"div",11),s(39,"3"),i(),n(40,"div",12)(41,"h5",13),s(42,"Invia via Email"),i(),n(43,"p",14),s(44," Invia il modulo compilato al nostro servizio clienti. "),i(),n(45,"div",19)(46,"div",20)(47,"div",21)(48,"div")(49,"small",22),s(50,"\u{1F4E7} Email di destinazione:"),i(),n(51,"div",23),s(52," servizioclienti@thespoon.com "),i()(),n(53,"button",24),f("click",function(){return r.copyEmail()}),n(54,"span",25),s(55,"\u{1F4CB}"),i()()()()()()()(),n(56,"div",26)(57,"h6",27)(58,"span",16),s(59,"\u2139\uFE0F"),i(),s(60," Informazioni Importanti "),i(),n(61,"ul",28)(62,"li"),s(63,"La cancellazione verr\xE0 elaborata entro 5-7 giorni lavorativi"),i(),n(64,"li"),s(65,"Tutti i dati del ristorante verranno eliminati definitivamente"),i(),n(66,"li"),s(67,"Le prenotazioni attive verranno automaticamente cancellate"),i(),n(68,"li"),s(69,"Riceverai una conferma via email una volta completata la procedura"),i()()()()()()()()),e&2&&(a(53),c("title",r.copyButtonText))},dependencies:[O],styles:['.container-xl[_ngcontent-%COMP%]{background:transparent;color:var(--text-color)}.delete-icon[_ngcontent-%COMP%]{width:80px;height:80px;font-size:3rem;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#dc35451a,#dc354533);border-radius:50%;border:3px solid rgba(220,53,69,.3)}.delete-subtitle[_ngcontent-%COMP%]{color:var(--text-light)!important}.delete-card[_ngcontent-%COMP%]{background:var(--card-bg)!important;border:1px solid var(--border-color)!important;box-shadow:var(--shadow-hover)!important}.warning-alert[_ngcontent-%COMP%]{background:var(--warning-bg)!important;border:1px solid var(--warning-border)!important;color:var(--warning-text)!important}.warning-alert[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--warning-text)!important}.step-title[_ngcontent-%COMP%]{color:var(--text-color)!important}.steps-container[_ngcontent-%COMP%]{position:relative}.step-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;position:relative}.step-item[_ngcontent-%COMP%]:not(:last-child):after{content:"";position:absolute;left:24px;top:60px;bottom:-20px;width:2px;background:linear-gradient(to bottom,var(--primary-color),transparent)}.step-number[_ngcontent-%COMP%]{width:48px;height:48px;background:var(--primary-color);color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:1.1rem;margin-right:1.5rem;flex-shrink:0;box-shadow:var(--shadow);z-index:2;position:relative}.step-content[_ngcontent-%COMP%]{flex:1;padding-top:.5rem}.step-heading[_ngcontent-%COMP%]{color:var(--text-color)!important}.step-description[_ngcontent-%COMP%]{color:var(--text-light)!important;line-height:1.6}.download-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color),var(--primary-dark))!important;border:none!important;color:#fff!important;font-weight:600;transition:all .3s ease;border-radius:.5rem!important}.download-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--shadow-hover)}.download-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.back-btn[_ngcontent-%COMP%]{border-color:var(--border-color)!important;color:var(--text-color)!important;transition:all .3s ease}.back-btn[_ngcontent-%COMP%]:hover{background-color:var(--bg-secondary)!important;border-color:var(--primary-color)!important;color:var(--primary-color)!important}.email-container[_ngcontent-%COMP%]{margin-top:1rem}.email-box[_ngcontent-%COMP%]{background:var(--bg-secondary)!important;border:1px solid var(--border-color)!important}.email-label[_ngcontent-%COMP%]{color:var(--text-muted)!important;font-size:.85rem}.email-address[_ngcontent-%COMP%]{color:var(--primary-color)!important;font-size:1.1rem;font-family:Courier New,monospace}.copy-btn[_ngcontent-%COMP%]{background:var(--primary-color)!important;border:none!important;color:#fff!important;border-radius:.375rem!important;transition:all .3s ease;padding:.5rem .75rem}.copy-btn[_ngcontent-%COMP%]:hover{background:var(--primary-dark)!important;transform:scale(1.05)}.copy-btn.copied[_ngcontent-%COMP%]{background:var(--success-color)!important;transform:scale(1.1)}.copy-icon[_ngcontent-%COMP%]{font-size:1rem}.important-note[_ngcontent-%COMP%]{background:var(--bg-secondary)!important;border:1px solid var(--border-color)!important}.important-note[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:var(--text-color)!important}.note-list[_ngcontent-%COMP%]{color:var(--text-light)!important;padding-left:1.2rem}.note-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:.5rem;line-height:1.5}.note-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin-bottom:0}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.delete-card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .6s ease-out}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1)}50%{transform:scale(1.05)}}.copy-btn.copied[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse .6s ease-in-out}@media (max-width: 768px){.delete-icon[_ngcontent-%COMP%]{width:60px;height:60px;font-size:2rem}.display-6[_ngcontent-%COMP%]{font-size:1.75rem!important}.step-number[_ngcontent-%COMP%]{width:40px;height:40px;font-size:1rem;margin-right:1rem}.step-item[_ngcontent-%COMP%]:not(:last-child):after{left:20px;top:50px}.download-btn[_ngcontent-%COMP%], .back-btn[_ngcontent-%COMP%]{font-size:.9rem;padding:.75rem 1.5rem}.email-address[_ngcontent-%COMP%]{font-size:1rem}}@media (max-width: 576px){.email-box[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.copy-btn[_ngcontent-%COMP%]{align-self:flex-start}.step-content[_ngcontent-%COMP%]{padding-top:.25rem}}']})};function xr(o,t){o&1&&g(0,"div",24)}function Cr(o,t){if(o&1){let e=b();n(0,"div",19),f("click",function(){let l=p(e).$implicit,m=d();return u(m.setActiveTab(l.id))}),n(1,"div",20)(2,"span",21),s(3),i(),n(4,"span",22),s(5),i()(),v(6,xr,1,0,"div",23),i()}if(o&2){let e=t.$implicit,r=d();C("active",r.isTabActive(e.id)),c("title",e.description),a(3),_(e.icon),a(2),_(e.label),a(),c("ngIf",r.isTabActive(e.id))}}function yr(o,t){o&1&&(n(0,"div",25)(1,"div",26)(2,"h2",27),s(3,"\u{1F4CA} Dashboard Overview"),i(),n(4,"p",28),s(5,"Panoramica del tuo business"),i()(),g(6,"app-dashboard-overview"),i())}function Mr(o,t){o&1&&(n(0,"div",25)(1,"div",26)(2,"h2",27),s(3,"\u{1F464} Gestione Profilo"),i(),n(4,"p",28),s(5," Aggiorna i dati del tuo business e ristorante "),i()(),n(6,"div",29)(7,"h3",30),s(8,"\u{1F3E2} Dati Business"),i(),g(9,"app-profile-section"),i(),n(10,"div",29),g(11,"app-restaurant-section"),i()())}function Pr(o,t){o&1&&(n(0,"div",25)(1,"div",26)(2,"h2",27),s(3,"\u{1F48E} Gestione Abbonamento"),i(),n(4,"p",28),s(5," Piano attuale e opzioni di upgrade "),i()(),g(6,"app-subscription-section"),i())}function wr(o,t){o&1&&(n(0,"div",25)(1,"div",26)(2,"h2",27),s(3,"\u2699\uFE0F Impostazioni Account"),i(),n(4,"p",28),s(5,"Preferenze e configurazioni"),i()(),g(6,"app-settings-section"),i())}function Or(o,t){o&1&&(n(0,"div",25)(1,"div",26)(2,"h2",31),s(3,"\u26A0\uFE0F Elimina Account"),i(),n(4,"p",28),s(5," Cancellazione definitiva dell'account "),i()(),g(6,"app-delete-account-section"),i())}var Ae=class o{constructor(t,e){this.authService=t;this.router=e;this.currentUser=this.authService.currentUser,this.userFullName=this.authService.getUserFullName()}activeTab=localStorage.getItem("dashboard_active_tab")||"dashboard";tabs=[{id:"dashboard",label:"Dashboard",icon:"\u{1F4CA}",description:"Panoramica generale"},{id:"profilo",label:"Profilo",icon:"\u{1F464}",description:"Dati business e ristorante"},{id:"abbonamento",label:"Abbonamento",icon:"\u{1F48E}",description:"Piano e fatturazione"},{id:"impostazioni",label:"Impostazioni",icon:"\u2699\uFE0F",description:"Preferenze account"},{id:"elimina",label:"Elimina Account",icon:"\u{1F5D1}\uFE0F",description:"Cancella definitivamente"}];currentUser;userFullName="";ngOnInit(){if(!this.authService.isLoggedIn()){console.log("\u274C Accesso negato: utente non autenticato"),this.router.navigate(["/"]);return}if(!this.authService.isBusiness()){console.log("\u274C Accesso negato: solo per account business"),this.router.navigate(["/"]);return}console.log("\u2705 Business Dashboard caricata per:",this.userFullName)}setActiveTab(t){this.activeTab=t,localStorage.setItem("dashboard_active_tab",t),console.log("\u{1F4CB} Tab attivo:",t)}isTabActive(t){return this.activeTab===t}goToHomepage(){this.router.navigate(["/"])}static \u0275fac=function(e){return new(e||o)(h(I),h(R))};static \u0275cmp=w({type:o,selectors:[["app-business-dashboard"]],decls:32,vars:7,consts:[[1,"dashboard-container"],[1,"dashboard-header"],[1,"container-xl"],[1,"row","align-items-center","py-3"],[1,"col-md-8"],[1,"welcome-section"],[1,"welcome-title","mb-1"],[1,"welcome-subtitle","mb-0"],[1,"tab-navigation"],[1,"row"],[1,"col-12"],[1,"tab-list"],["class","tab-item",3,"active","title","click",4,"ngFor","ngForOf"],[1,"text-center","d-md-none"],[1,"arrow-left"],[1,"arrow-right"],[1,"dashboard-content"],[1,"col-12'"],["class","content-section",4,"ngIf"],[1,"tab-item",3,"click","title"],[1,"tab-content"],[1,"tab-icon"],[1,"tab-label"],["class","tab-indicator",4,"ngIf"],[1,"tab-indicator"],[1,"content-section"],[1,"section-header","mb-4"],[1,"section-title"],[1,"section-description"],[1,"mb-5"],[1,"subsection-title"],[1,"section-title","text-danger"]],template:function(e,r){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h1",6),s(7),i(),n(8,"p",7),s(9,"Gestisci il tuo business da qui"),i()()()()()(),n(10,"div",8)(11,"div",2)(12,"div",9)(13,"div",10)(14,"div",11),v(15,Cr,7,6,"div",12),i()()()()(),n(16,"div",13)(17,"p")(18,"span",14),s(19,"\u2190"),i(),s(20," Scorri "),n(21,"span",15),s(22,"\u2192"),i()()(),n(23,"div",16)(24,"div",2)(25,"div",9)(26,"div",17),v(27,yr,7,0,"div",18)(28,Mr,12,0,"div",18)(29,Pr,7,0,"div",18)(30,wr,7,0,"div",18)(31,Or,7,0,"div",18),i()()()()()),e&2&&(a(7),x("Ciao, ",r.userFullName,"! \u{1F44B}"),a(8),c("ngForOf",r.tabs),a(12),c("ngIf",r.activeTab==="dashboard"),a(),c("ngIf",r.activeTab==="profilo"),a(),c("ngIf",r.activeTab==="abbonamento"),a(),c("ngIf",r.activeTab==="impostazioni"),a(),c("ngIf",r.activeTab==="elimina"))},dependencies:[O,D,S,Te,Re,De,Ve,Fe,Ne],styles:[".dashboard-container[_ngcontent-%COMP%]{min-height:100vh;background-color:var(--bg-color);color:var(--text-color)}.dashboard-header[_ngcontent-%COMP%]{background-color:var(--card-bg);border-bottom:2px solid var(--border-color);box-shadow:var(--shadow)}.welcome-section[_ngcontent-%COMP%]{display:flex;flex-direction:column}.welcome-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:var(--text-color);margin:0}.welcome-subtitle[_ngcontent-%COMP%]{font-size:1.1rem;color:var(--text-light);margin:0}.header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.header-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-radius:.5rem;font-weight:500;transition:all .3s ease}.header-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--shadow-hover)}.tab-navigation[_ngcontent-%COMP%]{background-color:var(--card-bg);border-bottom:1px solid var(--border-color);position:sticky;top:0;z-index:100}.tab-list[_ngcontent-%COMP%]{display:flex;overflow-x:auto;scrollbar-width:none;-ms-overflow-style:none}.tab-list[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.tab-item[_ngcontent-%COMP%]{position:relative;cursor:pointer;padding:1rem 2rem;min-width:fit-content;transition:all .3s ease;border-radius:0;-webkit-user-select:none;user-select:none}.tab-item[_ngcontent-%COMP%]:hover{background-color:#00cdb51a}.tab-item.active[_ngcontent-%COMP%]{background-color:#00cdb526}.tab-content[_ngcontent-%COMP%]{display:flex;align-items:center;white-space:nowrap}.tab-icon[_ngcontent-%COMP%]{font-size:1.2rem;display:inline-block}.tab-label[_ngcontent-%COMP%]{font-size:.95rem;font-weight:500;color:var(--text-color);transition:color .3s ease}.tab-item[_ngcontent-%COMP%]:hover   .tab-label[_ngcontent-%COMP%]{color:var(--primary-color)}.tab-item.active[_ngcontent-%COMP%]   .tab-label[_ngcontent-%COMP%]{color:var(--primary-color);font-weight:600}.tab-indicator[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0;height:3px;background:var(--primary-gradient);border-radius:3px 3px 0 0;animation:_ngcontent-%COMP%_slideIn .3s ease}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:scaleX(0)}to{transform:scaleX(1)}}.dashboard-content[_ngcontent-%COMP%]{padding:2rem 0;min-height:calc(100vh - 200px)}.content-section[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .5s ease}.section-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.section-title[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;color:var(--text-color);margin-bottom:.5rem}.section-description[_ngcontent-%COMP%]{font-size:1.1rem;color:var(--text-light);margin:0}.subsection-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:var(--text-color);margin-bottom:1rem;padding-bottom:.5rem;border-bottom:2px solid var(--primary-color);display:inline-block}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 768px){.welcome-title[_ngcontent-%COMP%]{font-size:1.5rem}.welcome-subtitle[_ngcontent-%COMP%]{font-size:1rem}.header-actions[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem}.header-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;font-size:.9rem}.tab-label[_ngcontent-%COMP%]{font-size:.9rem}.section-title[_ngcontent-%COMP%]{font-size:2rem}.section-description[_ngcontent-%COMP%]{font-size:1rem}.dashboard-content[_ngcontent-%COMP%]{padding:1rem 0}}@media (max-width: 576px){.tab-content[_ngcontent-%COMP%]{flex-direction:column;gap:.25rem}.tab-icon[_ngcontent-%COMP%]{font-size:1rem}.tab-label[_ngcontent-%COMP%]{font-size:.8rem;text-align:center}}.text-primary[_ngcontent-%COMP%]{color:var(--primary-color)!important}.text-danger[_ngcontent-%COMP%]{color:#dc3545!important}[_nghost-%COMP%], [_nghost-%COMP%]   *[_ngcontent-%COMP%]{font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,sans-serif}"]})};var Je=ce(Ce());function Sr(o,t){o&1&&(n(0,"div",5)(1,"div",6)(2,"span",7),s(3,"Verifica token..."),i()(),n(4,"p",8),s(5,"Verifica del link in corso..."),i()())}function Ir(o,t){if(o&1){let e=b();n(0,"div",5)(1,"div",9),g(2,"i",10),i(),n(3,"h3",11),s(4,"Link Non Valido"),i(),n(5,"p",12),s(6,"Il link per il reset della password \xE8 scaduto o non valido."),i(),n(7,"button",13),f("click",function(){p(e);let l=d();return u(l.goToLogin())}),g(8,"i",14),s(9," Torna al Login "),i()()}}function kr(o,t){o&1&&(n(0,"div",36),s(1," Le password non corrispondono "),i())}function Er(o,t){o&1&&g(0,"span",37)}function Tr(o,t){if(o&1){let e=b();n(0,"div",15)(1,"div",16),g(2,"i",17),n(3,"h2",18),s(4,"Reimposta Password"),i(),n(5,"p",8),s(6,"Inserisci la tua nuova password"),i()(),n(7,"form",19,0),f("ngSubmit",function(){p(e);let l=d();return u(l.onSubmit())}),n(9,"div",20)(10,"label",21),s(11,"Nuova Password"),i(),n(12,"div",22)(13,"span",23),g(14,"i",24),i(),n(15,"input",25),P("ngModelChange",function(l){p(e);let m=d();return M(m.resetData.newPassword,l)||(m.resetData.newPassword=l),u(l)}),i(),n(16,"button",26),f("click",function(){p(e);let l=d();return u(l.togglePassword())}),g(17,"i",27),i()(),n(18,"small",8),s(19,"Minimo 6 caratteri"),i()(),n(20,"div",9)(21,"label",28),s(22,"Conferma Password"),i(),n(23,"div",22)(24,"span",23),g(25,"i",24),i(),n(26,"input",29),P("ngModelChange",function(l){p(e);let m=d();return M(m.resetData.confirmPassword,l)||(m.resetData.confirmPassword=l),u(l)}),i(),n(27,"button",26),f("click",function(){p(e);let l=d();return u(l.toggleConfirmPassword())}),g(28,"i",27),i()(),v(29,kr,2,0,"div",30),i(),n(30,"button",31),v(31,Er,1,0,"span",32),s(32),i()(),n(33,"div",33)(34,"button",34),f("click",function(){p(e);let l=d();return u(l.goToLogin())}),g(35,"i",35),s(36," Torna al Login "),i()()()}if(o&2){let e=ct(8),r=d();a(15),c("type",r.showPassword?"text":"password"),y("ngModel",r.resetData.newPassword),a(2),C("fa-eye",!r.showPassword)("fa-eye-slash",r.showPassword),a(9),C("is-invalid",!r.passwordsMatch()),c("type",r.showConfirmPassword?"text":"password"),y("ngModel",r.resetData.confirmPassword),a(2),C("fa-eye",!r.showConfirmPassword)("fa-eye-slash",r.showConfirmPassword),a(),c("ngIf",!r.passwordsMatch()),a(),c("disabled",r.resetting||!e.valid||!r.passwordsMatch()),a(),c("ngIf",r.resetting),a(),x(" ",r.resetting?"Aggiornamento...":"Aggiorna Password"," ")}}var Ue=class o{constructor(t,e,r){this.route=t;this.router=e;this.authService=r}token="";loading=!0;resetting=!1;isValidToken=!1;showPassword=!1;showConfirmPassword=!1;resetData={newPassword:"",confirmPassword:""};ngOnInit(){this.route.queryParams.subscribe(t=>{this.token=t.token,this.token?this.validateToken():(this.loading=!1,this.isValidToken=!1)})}validateToken(){setTimeout(()=>{this.isValidToken=!0,this.loading=!1},1500)}onSubmit(){!this.passwordsMatch()||this.resetData.newPassword.length<6||(this.resetting=!0,this.authService.resetPassword(this.token,this.resetData.newPassword).subscribe({next:t=>{console.log("\u2705 Password resettata con successo:",t),this.resetting=!1,Je.default.fire({title:"\u{1F389} Password Aggiornata!",html:`
            <div style="text-align: center;">
              <div style="font-size: 3rem; margin-bottom: 1rem;">\u2705</div>
              <p style="margin-bottom: 1rem;">La tua password \xE8 stata aggiornata con successo!</p>
              <div style="background: #d4edda; padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                <p style="margin: 0; color: #155724;"><strong>Ora puoi accedere con la nuova password</strong></p>
              </div>
            </div>
          `,icon:"success",confirmButtonText:"Vai al Login",confirmButtonColor:"#28a745",allowOutsideClick:!1}).then(()=>{this.goToLogin()})},error:t=>{console.error("\u274C Errore reset password:",t),this.resetting=!1,Je.default.fire({title:"Errore Reset",text:"Si \xE8 verificato un errore durante l'aggiornamento della password.",icon:"error",confirmButtonText:"Riprova",confirmButtonColor:"#dc3545"})}}))}passwordsMatch(){return this.resetData.newPassword===this.resetData.confirmPassword}togglePassword(){this.showPassword=!this.showPassword}toggleConfirmPassword(){this.showConfirmPassword=!this.showConfirmPassword}goToLogin(){this.router.navigate(["/"])}static \u0275fac=function(e){return new(e||o)(h(xt),h(R),h(I))};static \u0275cmp=w({type:o,selectors:[["app-reset-password"]],decls:5,vars:3,consts:[["resetForm","ngForm"],[1,"container-fluid","min-vh-100","d-flex","align-items-center","justify-content-center"],[1,"reset-container"],["class","text-center py-5",4,"ngIf"],["class","reset-form",4,"ngIf"],[1,"text-center","py-5"],["role","status",1,"spinner-border","text-primary","mb-3"],[1,"visually-hidden"],[1,"text-muted"],[1,"mb-4"],[1,"fas","fa-exclamation-triangle","fa-3x","text-warning"],[1,"text-danger"],[1,"text-muted","mb-4"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-arrow-left","me-2"],[1,"reset-form"],[1,"text-center","mb-4"],[1,"fas","fa-key","fa-3x","text-primary","mb-3"],[1,"fw-bold"],[3,"ngSubmit"],[1,"mb-3"],["for","newPassword",1,"form-label"],[1,"input-group"],[1,"input-group-text"],[1,"fas","fa-lock"],["id","newPassword","name","newPassword","placeholder","Inserisci la nuova password","minlength","6","required","",1,"form-control",3,"ngModelChange","type","ngModel"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"fas"],["for","confirmPassword",1,"form-label"],["id","confirmPassword","name","confirmPassword","placeholder","Conferma la nuova password","required","",1,"form-control",3,"ngModelChange","type","ngModel"],["class","invalid-feedback d-block",4,"ngIf"],["type","submit",1,"btn","btn-success","w-100","mb-3",3,"disabled"],["class","spinner-border spinner-border-sm me-2",4,"ngIf"],[1,"text-center"],["type","button",1,"btn","btn-link",3,"click"],[1,"fas","fa-arrow-left","me-1"],[1,"invalid-feedback","d-block"],[1,"spinner-border","spinner-border-sm","me-2"]],template:function(e,r){e&1&&(n(0,"div",1)(1,"div",2),v(2,Sr,6,0,"div",3)(3,Ir,10,0,"div",3)(4,Tr,37,18,"div",4),i()()),e&2&&(a(2),c("ngIf",r.loading),a(),c("ngIf",!r.loading&&!r.isValidToken),a(),c("ngIf",!r.loading&&r.isValidToken))},dependencies:[O,S,U,be,F,N,ve,wt,Ot,A,_e],styles:[".reset-container[_ngcontent-%COMP%]{width:100%;max-width:400px;background:var(--bg-color);padding:2rem;border-radius:12px;box-shadow:0 8px 25px #0000001a}.input-group-text[_ngcontent-%COMP%]{background:var(--bg-secondary);border-color:var(--border-color);color:var(--text-color)}.form-control[_ngcontent-%COMP%]{background:var(--bg-color);border-color:var(--border-color);color:var(--text-color)}.form-control[_ngcontent-%COMP%]:focus{background:var(--bg-color);border-color:var(--primary-color);color:var(--text-color);box-shadow:0 0 0 .2rem #00cdb540}"]})};var Be=(o,t)=>{let e=te(I),r=te(R);return e.isLoggedIn()?e.isCustomer()?(console.log("\u{1F464} Customer accesso alla homepage consentito"),!0):e.isBusiness()?(console.log("\u{1F3E2} Business bloccato dalla homepage \u2192 redirect a dashboard"),r.navigate(["/business-dashboard"]),!1):(console.log("\u2753 Ruolo non riconosciuto, accesso homepage consentito"),!0):(console.log("\u{1F464} Guest accesso alla homepage consentito"),!0)};var Dt=(o,t)=>{let e=te(I),r=te(R);return e.isLoggedIn()?e.isBusiness()?(console.log("\u{1F3E2} Business accesso alla dashboard consentito"),!0):e.isCustomer()?(console.log("\u{1F464} Customer bloccato dalla dashboard \u2192 redirect homepage"),r.navigate(["/"]),!1):(console.log("\u2753 Ruolo non riconosciuto \u2192 redirect homepage"),r.navigate(["/"]),!1):(console.log("\u274C Accesso negato: utente non autenticato \u2192 redirect homepage"),r.navigate(["/"]),!1)};var zt=[{path:"",component:ke,canActivate:[Be]},{path:"restaurant/:id",loadComponent:()=>import("./chunk-3C4V6PDC.js").then(o=>o.RestaurantDetailComponent),canActivate:[Be]},{path:"business-dashboard",component:Ae,canActivate:[Dt]},{path:"dashboard-customer",component:Ie,canActivate:[Be]},{path:"reset-password",component:Ue,title:"Reset Password - TheSpoon"},{path:"**",redirectTo:""}];var Le=class o{constructor(t){this.authService=t}intercept(t,e){let r=this.authService.getToken();if(r){let l=t.clone({headers:t.headers.set("Authorization",`Bearer ${r}`)});return console.log("\u{1F517} Token aggiunto alla richiesta:",t.url),e.handle(l)}return e.handle(t)}static \u0275fac=function(e){return new(e||o)(Y(I))};static \u0275prov=G({token:o,factory:o.\u0275fac})};var Vt={providers:[at(),mt(),yt(zt,Mt({scrollPositionRestoration:"top",anchorScrolling:"enabled"})),ht(),{provide:bt,useClass:Le,multi:!0}]};var Rr=o=>({height:o});function Dr(o,t){if(o&1){let e=b();Ge(0),n(1,"a",11),f("click",function(){p(e);let l=d();return u(l.openAuthModal())}),s(2," Accedi "),i(),qe()}}function zr(o,t){if(o&1){let e=b();n(0,"button",19),f("click",function(){p(e);let l=d(2);return u(l.goToCustomerDashboard())}),g(1,"i",20),i()}}function Vr(o,t){if(o&1){let e=b();Ge(0),v(1,zr,2,0,"button",12),n(2,"div",13)(3,"span",14),s(4),i(),n(5,"button",15),f("click",function(){p(e);let l=d();return u(l.logout())}),g(6,"i",16),n(7,"span",17),s(8,"Logout"),i(),g(9,"i",18),i()(),qe()}if(o&2){let e=d();a(),c("ngIf",e.authService.isCustomer()),a(3),x(" Ciao, ",e.getUserDisplayName(),"! ")}}var je=class o{constructor(t,e,r){this.themeService=t;this.authService=e;this.router=r}goHome=new de;isAuthModalOpen=!1;onThemeToggle(){this.themeService.toggleTheme(),this.closeMobileNavbar()}onGoHome(){this.goHome.emit(),this.closeMobileNavbar()}openAuthModal(){console.log("\u{1F510} Apertura modal auth"),this.isAuthModalOpen=!0,this.closeMobileNavbar()}closeAuthModal(){console.log("\u{1F512} Chiusura modal auth"),this.isAuthModalOpen=!1}onAuthSuccess(){console.log("\u2705 Autenticazione completata dalla navbar"),this.closeAuthModal()}logout(){console.log("\u{1F513} Logout dalla navbar"),this.authService.logout(),this.closeMobileNavbar()}goToCustomerDashboard(){console.log("\u{1F464} Navigazione alla dashboard customer"),this.router.navigate(["/dashboard-customer"]),this.closeMobileNavbar()}closeMobileNavbar(){let t=document.getElementById("navbarNav");if(t&&t.classList.contains("show")){let e=document.querySelector(".navbar-toggler");e&&e.click()}}getUserDisplayName(){let t=this.authService.currentUser();return t?.firstName&&t?.lastName?`${t.firstName} ${t.lastName}`:t?.firstName?t.firstName:t?.email?t.email.split("@")[0]:"Utente"}get isLoggedIn(){return this.authService.isLoggedIn()}get userFullName(){return this.authService.getUserFullName()}get userEmail(){return this.authService.getUserEmail()}static \u0275fac=function(e){return new(e||o)(h(Z),h(I),h(R))};static \u0275cmp=w({type:o,selectors:[["app-navbar"]],outputs:{goHome:"goHome"},decls:13,vars:8,consts:[[1,"navbar","navbar-expand-lg","sticky-top","shadow-lg","navbar-bg"],[1,"container-xl"],[1,"navbar-brand","d-flex","align-items-center","gap-2",2,"cursor","pointer",3,"click"],["alt","TheSpoon Logo",3,"src","ngStyle"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav",1,"navbar-toggler","border-0"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav","ms-auto","d-flex","align-items-center","gap-3"],[4,"ngIf"],[1,"btn","btn-outline-secondary","rounded-circle","p-2","d-flex","align-items-center","justify-content-center",2,"width","40px","height","40px",3,"click"],[3,"closeModal","authSuccess","isOpen"],[1,"nav-link","px-3","py-2","rounded-pill",2,"cursor","pointer",3,"click"],["class","btn btn-outline-primary rounded-circle p-2 d-flex align-items-center justify-content-center","style","width: 40px; height: 40px","title","Il mio profilo",3,"click",4,"ngIf"],[1,"d-flex","align-items-center","gap-2"],[1,"text-muted","small","d-md-inline"],[1,"btn","btn-outline-danger","btn-sm",3,"click"],[1,"fas","fa-sign-out-alt","me-1","d-none","d-md-inline"],[1,"d-none","d-md-inline"],[1,"fas","fa-sign-out-alt","d-md-none"],["title","Il mio profilo",1,"btn","btn-outline-primary","rounded-circle","p-2","d-flex","align-items-center","justify-content-center",2,"width","40px","height","40px",3,"click"],[1,"fas","fa-user"]],template:function(e,r){e&1&&(n(0,"nav",0)(1,"div",1)(2,"a",2),f("click",function(){return r.onGoHome()}),g(3,"img",3),i(),n(4,"button",4),g(5,"span",5),i(),n(6,"div",6)(7,"div",7),v(8,Dr,3,0,"ng-container",8)(9,Vr,10,2,"ng-container",8),n(10,"button",9),f("click",function(){return r.onThemeToggle()}),s(11),i()()()()(),n(12,"app-auth-modal",10),f("closeModal",function(){return r.closeAuthModal()})("authSuccess",function(){return r.onAuthSuccess()}),i()),e&2&&(a(3),c("src",r.themeService.isDarkTheme()?"/images/logoNavbarDark1nobg.png":"/images/logoNavbarLightnobg.png",B)("ngStyle",ge(6,Rr,r.themeService.isDarkTheme()?"50px":"45px")),a(5),c("ngIf",!r.isLoggedIn),a(),c("ngIf",r.isLoggedIn),a(2),x(" ",r.themeService.isDarkTheme()?"\u2600\uFE0F":"\u{1F319}"," "),a(),c("isOpen",r.isAuthModalOpen))},dependencies:[O,S,pe,Rt],styles:[".navbar[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-bottom:1px solid #2d3748}.navbar-brand[_ngcontent-%COMP%]:hover{transform:scale(1.05);transition:transform .3s ease}.nav-link[_ngcontent-%COMP%]{font-weight:500}.btn-outline-secondary[_ngcontent-%COMP%]{border-color:#495057;color:#fff}.btn-outline-secondary[_ngcontent-%COMP%]:hover{background-color:#00cdb5!important;border-color:#00cdb5!important;color:#fff!important}.btn-outline-primary[_ngcontent-%COMP%]{border-color:#00cdb5;color:#00cdb5;background-color:transparent;transition:all .3s ease}.btn-outline-primary[_ngcontent-%COMP%]:hover{background-color:#00cdb5!important;border-color:#00cdb5!important;color:#fff!important;transform:scale(1.1)}.btn-outline-primary[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem #00cdb540}.btn-outline-danger[_ngcontent-%COMP%]{transition:all .3s ease}.btn-outline-danger[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.btn-outline-secondary[_ngcontent-%COMP%]{transition:all .3s ease}.btn-outline-secondary[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.transition-all[_ngcontent-%COMP%]{transition:all .3s ease}@media (max-width: 991.98px){.navbar-nav[_ngcontent-%COMP%]{text-align:center;margin-top:1rem}.navbar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{margin:.5rem 0}.navbar-nav[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem;align-items:center}.navbar-nav[_ngcontent-%COMP%]   .gap-3[_ngcontent-%COMP%]{gap:.5rem!important}.navbar-nav[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{min-width:120px;justify-content:center}.navbar-nav[_ngcontent-%COMP%]   .rounded-circle[_ngcontent-%COMP%]{min-width:40px}}@media (hover: hover){.navbar-brand[_ngcontent-%COMP%]:hover, .btn[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.btn-outline-primary[_ngcontent-%COMP%]:hover, .btn-outline-secondary[_ngcontent-%COMP%]:hover{transform:scale(1.1)}}.navbar-nav[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]{min-height:40px;align-items:center}@media (max-width: 767.98px){.navbar-nav[_ngcontent-%COMP%]{padding:1rem 0}.navbar-nav[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:.25rem 0}}*[_ngcontent-%COMP%]{transition:all .3s ease}"]})};var Fr=o=>({height:o});function Nr(o,t){if(o&1&&(n(0,"a",30),g(1,"i"),i()),o&2){let e=t.$implicit;c("href",e.url,B)("title",e.name),a(),me(e.icon)}}function Ar(o,t){if(o&1&&(n(0,"li")(1,"a",31),s(2),i()()),o&2){let e=t.$implicit;a(),c("href",e.url,B),a(),_(e.name)}}function Ur(o,t){if(o&1&&(n(0,"li")(1,"a",31),s(2),i()()),o&2){let e=t.$implicit;a(),c("href",e.url,B),a(),_(e.name)}}function Br(o,t){if(o&1&&(n(0,"li")(1,"a",31),s(2),i()()),o&2){let e=t.$implicit;a(),c("href",e.url,B),a(),_(e.name)}}var He=class o{constructor(t){this.themeService=t}currentYear=new Date().getFullYear();socialLinks=[{name:"Facebook",icon:"fab fa-facebook-f",url:"#"},{name:"Instagram",icon:"fab fa-instagram",url:"#"},{name:"Twitter",icon:"fab fa-twitter",url:"#"},{name:"LinkedIn",icon:"fab fa-linkedin-in",url:"#"}];footerLinks={company:[{name:"Chi siamo",url:"#"},{name:"Come funziona",url:"#"},{name:"Carriere",url:"#"},{name:"Press",url:"#"}],restaurants:[{name:"Aggiungi ristorante",url:"#"},{name:"Partner con noi",url:"#"},{name:"Business login",url:"#"},{name:"Manager",url:"#"}],support:[{name:"Centro assistenza",url:"#"},{name:"Contattaci",url:"#"},{name:"FAQ",url:"#"},{name:"Feedback",url:"#"}],legal:[{name:"Privacy Policy",url:"#"},{name:"Termini di servizio",url:"#"},{name:"Cookie Policy",url:"#"},{name:"GDPR",url:"#"}]};static \u0275fac=function(e){return new(e||o)(h(Z))};static \u0275cmp=w({type:o,selectors:[["app-footer"]],decls:56,vars:8,consts:[[1,"footer","mt-5"],[1,"container-xl"],[1,"row","g-4","py-5"],[1,"col-lg-4","col-md-6"],[1,"footer-brand","mb-4"],["src","/images/logoNavbarLightnobg.png","alt","TheSpoon Logo",3,"ngStyle"],[1,"footer-description"],[1,"social-links","text-center"],[1,"footer-title","mb-3"],[1,"d-flex","flex-row","gap-3","justify-content-between"],["class","social-link",3,"href","title",4,"ngFor","ngForOf"],[1,"col-lg-2","col-md-6","col-6","text-center"],[1,"footer-links"],[4,"ngFor","ngForOf"],[1,"row","py-4","border-top","footer-border","text-center"],[1,"col-lg-6"],[1,"newsletter-text","mb-3"],[1,"newsletter-form","d-flex","gap-2"],["type","email","placeholder","La tua email...",1,"form-control","newsletter-input"],[1,"btn","btn-primary","newsletter-btn","px-4"],[1,"app-download","d-flex","gap-3"],["href","#",1,"app-store-btn"],["src","https://developer.apple.com/app-store/marketing/guidelines/images/badge-download-on-the-app-store.svg","alt","Download su App Store",2,"height","40px"],["href","#",1,"play-store-btn"],["src","https://play.google.com/intl/en_us/badges/static/images/badges/en_badge_web_generic.png","alt","Scarica su Google Play",2,"height","40px"],[1,"row","py-4","border-top","footer-border"],[1,"col-md-6"],[1,"copyright","mb-0"],[1,"col-md-6","text-md-end"],[1,"made-with","mb-0"],[1,"social-link",3,"href","title"],[3,"href"]],template:function(e,r){e&1&&(n(0,"footer",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",4),g(6,"img",5),n(7,"p",6),s(8," Scopri l'autentica cucina italiana e prenota il tuo tavolo nei migliori ristoranti d'Italia. Dalla pizza napoletana alla bistecca fiorentina, trova l'esperienza culinaria perfetta per te. "),i()(),n(9,"div",7)(10,"h6",8),s(11,"Seguici"),i(),n(12,"div",9),v(13,Nr,2,4,"a",10),i()()()(),n(14,"div",11)(15,"h6",8),s(16,"Azienda"),i(),n(17,"ul",12),v(18,Ar,3,2,"li",13),i()(),n(19,"div",11)(20,"h6",8),s(21,"Supporto"),i(),n(22,"ul",12),v(23,Ur,3,2,"li",13),i()(),n(24,"div",11)(25,"h6",8),s(26,"Legale"),i(),n(27,"ul",12),v(28,Br,3,2,"li",13),i()(),n(29,"div",14)(30,"div",15)(31,"h6",8),s(32,"Newsletter"),i(),n(33,"p",16),s(34,"Ricevi le migliori offerte e novit\xE0 direttamente nella tua email"),i(),n(35,"div",17),g(36,"input",18),n(37,"button",19),s(38," Iscriviti "),i()()(),n(39,"div",15)(40,"h6",8),s(41,"Scarica l'App"),i(),n(42,"p",16),s(43,"Prenota ovunque tu sia con la nostra app mobile"),i(),n(44,"div",20)(45,"a",21),g(46,"img",22),i(),n(47,"a",23),g(48,"img",24),i()()()(),n(49,"div",25)(50,"div",26)(51,"p",27),s(52),i()(),n(53,"div",28)(54,"p",29),s(55," Fatto con \u2764\uFE0F by Nicmar "),i()()()()()()),e&2&&(a(6),c("ngStyle",ge(6,Fr,r.themeService.isDarkTheme()?"50px":"45px")),a(7),c("ngForOf",r.socialLinks),a(5),c("ngForOf",r.footerLinks.company),a(5),c("ngForOf",r.footerLinks.support),a(5),c("ngForOf",r.footerLinks.legal),a(24),x(" \xA9 ",r.currentYear," TheSpoon. Tutti i diritti riservati. "))},dependencies:[O,D,pe],styles:['.footer[_ngcontent-%COMP%]{background:var(--bg-secondary);color:var(--text-light);border-top:1px solid var(--border-color);margin-top:auto}.footer-logo[_ngcontent-%COMP%]{height:50px;width:auto;filter:brightness(.9)}.footer-title[_ngcontent-%COMP%]{color:var(--text-color);font-weight:600;font-size:1rem;margin-bottom:1rem!important}.footer-description[_ngcontent-%COMP%]{color:var(--text-light);line-height:1.6;margin-bottom:2rem;font-size:.95rem}.footer-links[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.footer-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:.75rem}.footer-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--text-light);text-decoration:none;font-size:.9rem;transition:all .3s ease}.footer-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--primary-color);transform:translate(5px)}.social-links[_ngcontent-%COMP%]{margin-top:2rem}.social-link[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:40px;height:40px;background:var(--bg-color);color:var(--text-light);border-radius:50%;text-decoration:none;transition:all .3s ease;border:1px solid var(--border-color)}.social-link[_ngcontent-%COMP%]:hover{background:var(--primary-color);color:#fff;transform:translateY(-3px);box-shadow:0 5px 15px #00cdb54d}.newsletter-text[_ngcontent-%COMP%]{color:var(--text-light);font-size:.9rem}.newsletter-input[_ngcontent-%COMP%]{background:var(--bg-color)!important;border:1px solid var(--border-color)!important;color:var(--text-color)!important;border-radius:8px}.newsletter-input[_ngcontent-%COMP%]:focus{border-color:var(--primary-color)!important;box-shadow:0 0 0 .2rem #00cdb540!important;background:var(--bg-color)!important}.newsletter-input[_ngcontent-%COMP%]::placeholder{color:var(--text-muted)}.newsletter-btn[_ngcontent-%COMP%]{background:var(--primary-gradient)!important;border:none!important;border-radius:8px;font-weight:600;white-space:nowrap}.newsletter-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 5px 15px #00cdb54d}.app-download[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{transition:all .3s ease}.app-download[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{transform:translateY(-3px);opacity:.8}.footer-border[_ngcontent-%COMP%]{border-color:var(--border-color)!important}.copyright[_ngcontent-%COMP%], .made-with[_ngcontent-%COMP%]{color:var(--text-muted);font-size:.85rem}@media (max-width: 768px){.footer-brand[_ngcontent-%COMP%]{text-align:center;margin-bottom:3rem}.newsletter-form[_ngcontent-%COMP%]{flex-direction:column}.newsletter-btn[_ngcontent-%COMP%]{width:100%;margin-top:.5rem}.app-download[_ngcontent-%COMP%]{justify-content:center;flex-wrap:wrap}.footer-links[_ngcontent-%COMP%]{text-align:center}.copyright[_ngcontent-%COMP%], .made-with[_ngcontent-%COMP%]{text-align:center!important;margin-bottom:1rem}}@media (max-width: 576px){.footer[_ngcontent-%COMP%]{padding:0 1rem}.col-6[_ngcontent-%COMP%]{flex:0 0 100%;max-width:100%;margin-bottom:2rem}.social-link[_ngcontent-%COMP%]{width:35px;height:35px;font-size:.9rem}}[data-bs-theme="light"][_nghost-%COMP%]   .footer[_ngcontent-%COMP%], [data-bs-theme="light"]   [_nghost-%COMP%]   .footer[_ngcontent-%COMP%]{background:var(--bg-secondary);color:var(--text-light)}[data-bs-theme="light"][_nghost-%COMP%]   .footer-logo[_ngcontent-%COMP%], [data-bs-theme="light"]   [_nghost-%COMP%]   .footer-logo[_ngcontent-%COMP%]{filter:brightness(1)}[data-bs-theme="dark"][_nghost-%COMP%]   .footer[_ngcontent-%COMP%], [data-bs-theme="dark"]   [_nghost-%COMP%]   .footer[_ngcontent-%COMP%]{background:var(--bg-secondary)}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.footer-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .social-link[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .6s ease forwards}.footer-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(1)   a[_ngcontent-%COMP%]{animation-delay:.1s}.footer-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(2)   a[_ngcontent-%COMP%]{animation-delay:.2s}.footer-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(3)   a[_ngcontent-%COMP%]{animation-delay:.3s}.footer-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(4)   a[_ngcontent-%COMP%]{animation-delay:.4s}']})};var Ye=class o{constructor(t){this.router=t}title="theSpoon";navigateToHome(){console.log("\u{1F3E0} Navigazione alla homepage dal logo"),this.router.navigate(["/"]).then(()=>{console.log("\u2705 Navigazione alla home completata")})}navigateToLogin(){console.log("\u{1F511} Navigazione al login"),alert("Login page non ancora implementata")}static \u0275fac=function(e){return new(e||o)(h(R))};static \u0275cmp=w({type:o,selectors:[["app-root"]],decls:3,vars:0,consts:[[3,"goHome"]],template:function(e,r){e&1&&(n(0,"app-navbar",0),f("goHome",function(){return r.navigateToHome()}),i(),g(1,"router-outlet")(2,"app-footer"))},dependencies:[O,Ct,je,He],encapsulation:2})};vt(Ye,Vt).catch(o=>console.error(o));
